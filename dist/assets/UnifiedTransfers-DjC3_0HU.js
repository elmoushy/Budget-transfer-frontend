import{c as xe,d as se,r as i,u as te,y as R,w as H,e as f,h as q,G as V,f as e,t,b as ve,D as me,n,l as a,Q as fe,m as U,F as ee,s as _,_ as ie,C as ke,o as Ze,T as Rt,I as Ye,q as Z,a as Y,J as Mt,z as Bt,k as Fe,v as At,i as Et,H as Ft,K as It,L as We,M as xt}from"./index-BPQ70nuw.js";import{F as ue,t as Ce,I as qt,u as Vt}from"./TransferService-DzWpUv1R.js";import{a as he}from"./apiService-BXlmQZqc.js";import{S as Nt,T as Lt}from"./trash-Btw1immh.js";import"./check-U8SryUHp.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=xe("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=xe("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=xe("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),zt={class:"modal-header"},Jt={class:"modal-body"},Ht={class:"form-group"},Wt={for:"timePeriod",class:"required"},Gt={class:"select-wrapper"},Kt={value:"",disabled:""},Qt={value:"Jan"},Zt={value:"Feb"},Yt={value:"Mar"},Xt={value:"Apr"},ea={value:"May"},ta={value:"Jun"},aa={value:"Jul"},oa={value:"Aug"},sa={value:"Sep"},na={value:"Oct"},la={value:"Nov"},ra={value:"Dec"},ia={class:"form-group"},ca={for:"transferReason",class:"required"},ua={key:0,class:"error-message"},da={class:"modal-footer"},va=se({__name:"NewRequestModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(v,{emit:C}){const r=v,w=C,c=i(""),h=i(!1),u=i({timePeriod:"",transferReason:""}),F=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],T={placeholder:"Enter your reason here...",modules:{toolbar:F}},S=te(),s=R(()=>S.language==="ar"),g=R(()=>S.darkMode),$=i(!1),y=i("info"),k=i(""),M=i("");function A(){E(),w("update:modelValue",!1)}function E(){u.value={timePeriod:"",transferReason:""},c.value="",h.value=!1}async function x(){const P=c.value===""||c.value==="<p><br></p>"||c.value==="";if(!u.value.timePeriod||P){P&&(h.value=!0),y.value="warning",k.value=s.value?"تنبيه!":"Warning!",M.value=s.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",$.value=!0;return}h.value=!1;try{const m={transaction_date:u.value.timePeriod,notes:c.value,type:"FAR"},b=await he.transfers.createTransfer(m);w("submit",b.data),A()}catch(m){console.error("Error creating transfer request:",m),y.value="error",k.value=s.value?"خطأ!":"Error!",M.value=s.value?"حدث خطأ أثناء إنشاء الطلب":"Error creating request",$.value=!0}}return H(()=>r.modelValue,P=>{P&&E()}),(P,m)=>(_(),f(ee,null,[v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:A},[e("div",{class:n(["modal-container",{"dark-mode":g.value}]),onClick:m[2]||(m[2]=U(()=>{},["stop"]))},[e("div",zt,[e("h2",null,t(s.value?"طلب مناقلة جديد":"New Transfer Request"),1),e("button",{class:"close-modal",onClick:A},"×")]),e("div",Jt,[e("div",Ht,[e("label",Wt,t(s.value?"الفترة الزمنية":"Time Period"),1),e("div",Gt,[ve(e("select",{id:"timePeriod","onUpdate:modelValue":m[0]||(m[0]=b=>u.value.timePeriod=b),required:""},[e("option",Kt,t(s.value?"اختر فترة":"Select period"),1),e("option",Qt,t(s.value?"يناير":"January"),1),e("option",Zt,t(s.value?"فبراير":"February"),1),e("option",Yt,t(s.value?"مارس":"March"),1),e("option",Xt,t(s.value?"أبريل":"April"),1),e("option",ea,t(s.value?"مايو":"May"),1),e("option",ta,t(s.value?"يونيو":"June"),1),e("option",aa,t(s.value?"يوليو":"July"),1),e("option",oa,t(s.value?"أغسطس":"August"),1),e("option",sa,t(s.value?"سبتمبر":"September"),1),e("option",na,t(s.value?"أكتوبر":"October"),1),e("option",la,t(s.value?"نوفمبر":"November"),1),e("option",ra,t(s.value?"ديسمبر":"December"),1)],512),[[me,u.value.timePeriod]]),m[4]||(m[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",ia,[e("label",ca,t(s.value?"سبب المناقلة":"Reason for Transfer"),1),V(a(fe),{content:c.value,"onUpdate:content":m[1]||(m[1]=b=>c.value=b),toolbar:F,contentType:"html",theme:"snow",options:T,class:n(["transfer-editor",{"editor-error":h.value}])},null,8,["content","class"]),h.value?(_(),f("div",ua,t(s.value?"هذا الحقل مطلوب":"This field is required"),1)):q("",!0)])]),e("div",da,[e("button",{class:"btn-secondary",onClick:A},t(s.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:x},t(s.value?"إنشاء":"Create"),1)])],2)])):q("",!0),V(ue,{show:$.value,"onUpdate:show":m[3]||(m[3]=b=>$.value=b),type:y.value,title:k.value,message:M.value,timer:3e3},null,8,["show","type","title","message"])],64))}}),Ke=ie(va,[["__scopeId","data-v-e0141eb7"]]),pa={class:"modal-header"},_a={class:"modal-body"},ma={class:"form-group"},fa={for:"timePeriod",class:"required"},ha={class:"select-wrapper"},ba={value:"",disabled:""},ga={value:"Jan"},ya={value:"Feb"},$a={value:"Mar"},ka={value:"Apr"},Ca={value:"May"},wa={value:"Jun"},Pa={value:"Jul"},Ta={value:"Aug"},ja={value:"Sep"},Sa={value:"Oct"},Da={value:"Nov"},Ra={value:"Dec"},Ma={class:"form-group"},Ba={for:"enhancementReason",class:"required"},Aa={key:0,class:"error-message"},Ea={class:"modal-footer"},Fa=se({__name:"EnhancementsRequestModel",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(v,{emit:C}){const r=v,w=C,c=i("<p>Enter your reason here...</p>"),h=i(!1),u=i({timePeriod:"",enhancementReason:""}),F=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],T={placeholder:"Enter your reason here...",modules:{toolbar:F}},S=te(),s=R(()=>S.language==="ar"),g=R(()=>S.darkMode),$=i(!1),y=i("info"),k=i(""),M=i("");function A(){y.value="warning",k.value=s.value?"تحقق من البيانات":"Validation Error",M.value=s.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",$.value=!0}function E(b){console.error("Error creating enhancement request:",b),y.value="error",k.value=s.value?"خطأ!":"Error!",M.value=s.value?"حدث خطأ أثناء إنشاء الطلب":"Error creating request",$.value=!0}function x(){P(),w("update:modelValue",!1)}function P(){u.value={timePeriod:"",enhancementReason:""},c.value="<p></p>",h.value=!1}async function m(){const b=c.value==="<p></p>"||c.value==="<p><br></p>"||c.value==="";if(!u.value.timePeriod||b){b&&(h.value=!0),A();return}h.value=!1;try{const D={transaction_date:u.value.timePeriod,notes:c.value,type:"AFR"},I=await he.transfers.createTransfer(D);w("submit",I),x()}catch(D){E(D)}}return H(()=>r.modelValue,b=>{b&&P()}),(b,D)=>(_(),f(ee,null,[v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:x},[e("div",{class:n(["modal-container",{"dark-mode":g.value}]),onClick:D[2]||(D[2]=U(()=>{},["stop"]))},[e("div",pa,[e("h2",null,t(s.value?"طلب تعزيز جديد":"New Enhancement Request"),1),e("button",{class:"close-modal",onClick:x},"×")]),e("div",_a,[e("div",ma,[e("label",fa,t(s.value?"الفترة الزمنية":"Time Period"),1),e("div",ha,[ve(e("select",{id:"timePeriod","onUpdate:modelValue":D[0]||(D[0]=I=>u.value.timePeriod=I),required:""},[e("option",ba,t(s.value?"اختر فترة":"Select period"),1),e("option",ga,t(s.value?"يناير":"January"),1),e("option",ya,t(s.value?"فبراير":"February"),1),e("option",$a,t(s.value?"مارس":"March"),1),e("option",ka,t(s.value?"أبريل":"April"),1),e("option",Ca,t(s.value?"مايو":"May"),1),e("option",wa,t(s.value?"يونيو":"June"),1),e("option",Pa,t(s.value?"يوليو":"July"),1),e("option",Ta,t(s.value?"أغسطس":"August"),1),e("option",ja,t(s.value?"سبتمبر":"September"),1),e("option",Sa,t(s.value?"أكتوبر":"October"),1),e("option",Da,t(s.value?"نوفمبر":"November"),1),e("option",Ra,t(s.value?"ديسمبر":"December"),1)],512),[[me,u.value.timePeriod]]),D[4]||(D[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",Ma,[e("label",Ba,t(s.value?"سبب التعزيز":"Reason for Enhancement"),1),V(a(fe),{content:c.value,"onUpdate:content":D[1]||(D[1]=I=>c.value=I),toolbar:F,contentType:"html",theme:"snow",options:T,class:n(["transfer-editor",{"editor-error":h.value}])},null,8,["content","class"]),h.value?(_(),f("div",Aa,t(s.value?"هذا الحقل مطلوب":"This field is required"),1)):q("",!0)])]),e("div",Ea,[e("button",{class:"btn-secondary",onClick:x},t(s.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:m},t(s.value?"إنشاء":"Create"),1)])],2)])):q("",!0),V(ue,{show:$.value,"onUpdate:show":D[3]||(D[3]=I=>$.value=I),type:y.value,title:k.value,message:M.value,timer:3e3},null,8,["show","type","title","message"])],64))}}),Ia=ie(Fa,[["__scopeId","data-v-541acc7f"]]),xa={class:"modal-header"},qa={class:"modal-body"},Va={class:"form-group"},Na={for:"timePeriod",class:"required"},La={class:"select-wrapper"},Oa={value:"",disabled:""},Ua={value:"Jan"},za={value:"Feb"},Ja={value:"Mar"},Ha={value:"Apr"},Wa={value:"May"},Ga={value:"Jun"},Ka={value:"Jul"},Qa={value:"Aug"},Za={value:"Sep"},Ya={value:"Oct"},Xa={value:"Nov"},eo={value:"Dec"},to={class:"form-group"},ao={for:"contractReason",class:"required"},oo={key:0,class:"error-message"},so={class:"modal-footer"},no=se({__name:"NewContractModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(v,{emit:C}){const r=v,w=C,c=i(""),h=i(!1),u=i({timePeriod:"",contractReason:""}),F=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],T={placeholder:"Enter your reason here...",modules:{toolbar:F}},S=te(),s=R(()=>S.language==="ar"),g=R(()=>S.darkMode),$=i(!1),y=i("info"),k=i(""),M=i(""),A=(m,b="info")=>{let D="";return b==="error"?D=s.value?"خطأ!":"Error!":b==="success"?D=s.value?"تم!":"Success!":b==="warning"?D=s.value?"تنبيه!":"Warning!":D=s.value?"معلومات":"Information",k.value=D,M.value=m,y.value=b,$.value=!0,new Promise(I=>{const z=setInterval(()=>{$.value||(clearInterval(z),I(!0))},100)})};function E(){x(),w("update:modelValue",!1)}function x(){u.value={timePeriod:"",contractReason:""},c.value="",h.value=!1}async function P(){const m=c.value===""||c.value==="<p><br></p>"||c.value==="";if(!u.value.timePeriod||m){m&&(h.value=!0),A(s.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields","warning");return}h.value=!1;try{const b={transaction_date:u.value.timePeriod,notes:c.value,type:"FAD"},D=await he.transfers.createTransfer(b);w("submit",D),E(),A(s.value?"تم إنشاء طلب العقد بنجاح":"Contract request created successfully","success")}catch(b){console.error("Error creating contract request:",b),A(s.value?"حدث خطأ أثناء إنشاء الطلب":"Error creating request","error")}}return H(()=>r.modelValue,m=>{m&&x()}),(m,b)=>(_(),f(ee,null,[v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:E},[e("div",{class:n(["modal-container",{"dark-mode":g.value}]),onClick:b[2]||(b[2]=U(()=>{},["stop"]))},[e("div",xa,[e("h2",null,t(s.value?"طلب عقد جديد":"New Contract Request"),1),e("button",{class:"close-modal",onClick:E},"×")]),e("div",qa,[e("div",Va,[e("label",Na,t(s.value?"الفترة الزمنية":"Time Period"),1),e("div",La,[ve(e("select",{id:"timePeriod","onUpdate:modelValue":b[0]||(b[0]=D=>u.value.timePeriod=D),required:""},[e("option",Oa,t(s.value?"اختر فترة":"Select period"),1),e("option",Ua,t(s.value?"يناير":"January"),1),e("option",za,t(s.value?"فبراير":"February"),1),e("option",Ja,t(s.value?"مارس":"March"),1),e("option",Ha,t(s.value?"أبريل":"April"),1),e("option",Wa,t(s.value?"مايو":"May"),1),e("option",Ga,t(s.value?"يونيو":"June"),1),e("option",Ka,t(s.value?"يوليو":"July"),1),e("option",Qa,t(s.value?"أغسطس":"August"),1),e("option",Za,t(s.value?"سبتمبر":"September"),1),e("option",Ya,t(s.value?"أكتوبر":"October"),1),e("option",Xa,t(s.value?"نوفمبر":"November"),1),e("option",eo,t(s.value?"ديسمبر":"December"),1)],512),[[me,u.value.timePeriod]]),b[4]||(b[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",to,[e("label",ao,t(s.value?"سبب العقد":"Reason for Contract"),1),V(a(fe),{content:c.value,"onUpdate:content":b[1]||(b[1]=D=>c.value=D),toolbar:F,contentType:"html",theme:"snow",options:T,class:n(["transfer-editor",{"editor-error":h.value}])},null,8,["content","class"]),h.value?(_(),f("div",oo,t(s.value?"هذا الحقل مطلوب":"This field is required"),1)):q("",!0)])]),e("div",so,[e("button",{class:"btn-secondary",onClick:E},t(s.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:P},t(s.value?"إنشاء":"Create"),1)])],2)])):q("",!0),V(ue,{show:$.value,"onUpdate:show":b[3]||(b[3]=D=>$.value=D),type:y.value,title:k.value,message:M.value,timer:3e3},null,8,["show","type","title","message"])],64))}}),lo=ie(no,[["__scopeId","data-v-55c36ece"]]),ro={class:"modal-header"},io={class:"modal-body"},co={class:"form-group"},uo={for:"timePeriod",class:"required"},vo={class:"select-wrapper"},po={value:"",disabled:""},_o={value:"Jan"},mo={value:"Feb"},fo={value:"Mar"},ho={value:"Apr"},bo={value:"May"},go={value:"Jun"},yo={value:"Jul"},$o={value:"Aug"},ko={value:"Sep"},Co={value:"Oct"},wo={value:"Nov"},Po={value:"Dec"},To={class:"form-group"},jo={for:"transferReason",class:"required"},So={key:0,class:"error-message"},Do={class:"modal-footer"},Ro=se({__name:"EditTransferModal",props:{modelValue:{type:Boolean,default:!1},transferData:{type:Object,required:!1,default:()=>({})}},emits:["update:modelValue","submit"],setup(v,{emit:C}){const r=v,w=C,c=i(""),h=i(!1),u=i({timePeriod:"",transferId:null}),F=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],T={placeholder:"Enter your reason here...",modules:{toolbar:F}},S=te(),s=R(()=>S.language==="ar"),g=R(()=>S.darkMode);function $(){w("update:modelValue",!1)}H(()=>r.transferData,P=>{P&&Object.keys(P).length>0&&(u.value.timePeriod=P.transaction_date||"",u.value.transferId=P.transaction_id,c.value=P.notes||"<p>Enter your reason here...</p>")},{immediate:!0,deep:!0}),H(()=>r.modelValue,P=>{P&&r.transferData&&(u.value.timePeriod=r.transferData.transaction_date||"",u.value.transferId=r.transferData.transaction_id,c.value=r.transferData.notes||"<p>Enter your reason here...</p>")});const y=i(!1),k=i("success"),M=i(""),A=i(""),E=i(3e3);async function x(){const P=c.value==="<p>Enter your reason here...</p>"||c.value==="<p><br></p>"||c.value==="";if(!u.value.timePeriod||P){P&&(h.value=!0),k.value="warning",M.value=s.value?"تنبيه":"Warning",A.value=s.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",E.value=0,y.value=!0;return}h.value=!1;try{const m={transaction_date:u.value.timePeriod,notes:c.value,type:"FAR"},b=await he.transfers.updateTransfer(u.value.transferId,m);k.value="success",M.value=s.value?"تم بنجاح":"Success",A.value=s.value?"تم تحديث طلب المناقلة بنجاح":"Transfer request updated successfully",E.value=3e3,y.value=!0,w("submit",b.data),$()}catch(m){console.error("Error updating transfer request:",m),k.value="error",M.value=s.value?"خطأ":"Error",A.value=s.value?"حدث خطأ أثناء تحديث الطلب":"Error updating request",E.value=0,y.value=!0}}return(P,m)=>(_(),f(ee,null,[v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:$},[e("div",{class:n(["modal-container",{"dark-mode":g.value}]),onClick:m[2]||(m[2]=U(()=>{},["stop"]))},[e("div",ro,[e("h2",null,t(s.value?"تعديل المناقلة":"Edit Transfer"),1),e("button",{class:"close-modal",onClick:$},"×")]),e("div",io,[e("div",co,[e("label",uo,t(s.value?"الفترة الزمنية":"Time Period"),1),e("div",vo,[ve(e("select",{id:"timePeriod","onUpdate:modelValue":m[0]||(m[0]=b=>u.value.timePeriod=b),required:""},[e("option",po,t(s.value?"اختر فترة":"Select period"),1),e("option",_o,t(s.value?"يناير":"January"),1),e("option",mo,t(s.value?"فبراير":"February"),1),e("option",fo,t(s.value?"مارس":"March"),1),e("option",ho,t(s.value?"أبريل":"April"),1),e("option",bo,t(s.value?"مايو":"May"),1),e("option",go,t(s.value?"يونيو":"June"),1),e("option",yo,t(s.value?"يوليو":"July"),1),e("option",$o,t(s.value?"أغسطس":"August"),1),e("option",ko,t(s.value?"سبتمبر":"September"),1),e("option",Co,t(s.value?"أكتوبر":"October"),1),e("option",wo,t(s.value?"نوفمبر":"November"),1),e("option",Po,t(s.value?"ديسمبر":"December"),1)],512),[[me,u.value.timePeriod]]),m[4]||(m[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",To,[e("label",jo,t(s.value?"سبب المناقلة":"Reason for Transfer"),1),V(a(fe),{content:c.value,"onUpdate:content":m[1]||(m[1]=b=>c.value=b),toolbar:F,contentType:"html",theme:"snow",options:T,class:n(["transfer-editor",{"editor-error":h.value}])},null,8,["content","class"]),h.value?(_(),f("div",So,t(s.value?"هذا الحقل مطلوب":"This field is required"),1)):q("",!0)])]),e("div",Do,[e("button",{class:"btn-secondary",onClick:$},t(s.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:x},t(s.value?"حفظ التغييرات":"Save Changes"),1)])],2)])):q("",!0),V(ue,{show:y.value,"onUpdate:show":m[3]||(m[3]=b=>y.value=b),type:k.value,title:M.value,message:A.value,timer:E.value,showConfirmButton:!0,confirmButtonText:s.value?"حسناً":"OK"},null,8,["show","type","title","message","timer","confirmButtonText"])],64))}}),Ie=ie(Ro,[["__scopeId","data-v-713b316e"]]),Mo={class:"modal-header"},Bo={class:"modal-body"},Ao={class:"form-group"},Eo={for:"contractPeriod",class:"required"},Fo={class:"select-wrapper"},Io={value:"",disabled:""},xo={value:"Jan"},qo={value:"Feb"},Vo={value:"Mar"},No={value:"Apr"},Lo={value:"May"},Oo={value:"Jun"},Uo={value:"Jul"},zo={value:"Aug"},Jo={value:"Sep"},Ho={value:"Oct"},Wo={value:"Nov"},Go={value:"Dec"},Ko={class:"form-group"},Qo={for:"contractDescription",class:"required"},Zo={key:0,class:"error-message"},Yo={class:"modal-footer"},Xo=se({__name:"EditContractModal",props:{modelValue:{type:Boolean,default:!1},contractData:{type:Object,required:!0,default:()=>({})}},emits:["update:modelValue","submit"],setup(v,{emit:C}){const r=v,w=C,c=i(""),h=i(!1),u=i({contractPeriod:"",contractId:null}),F=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],T={placeholder:"Enter contract description here...",modules:{toolbar:F}},S=te(),s=R(()=>S.language==="ar"),g=R(()=>S.darkMode),$=i(!1),y=i("success"),k=i(""),M=i(""),A=i(3e3);function E(){w("update:modelValue",!1)}H(()=>r.contractData,P=>{P&&Object.keys(P).length>0&&(u.value.contractPeriod=P.transaction_date||"",u.value.contractId=P.transaction_id,c.value=P.notes||"<p>Enter contract description here...</p>")},{immediate:!0,deep:!0}),H(()=>r.modelValue,P=>{P&&r.contractData&&(u.value.contractPeriod=r.contractData.transaction_date||"",u.value.contractId=r.contractData.transaction_id,c.value=r.contractData.notes||"<p>Enter contract description here...</p>")});async function x(){const P=c.value==="<p>Enter contract description here...</p>"||c.value==="<p><br></p>"||c.value==="";if(!u.value.contractPeriod||P){P&&(h.value=!0),y.value="warning",k.value=s.value?"تنبيه":"Attention",M.value=s.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",A.value=0,$.value=!0;return}h.value=!1;try{const m={transaction_date:u.value.contractPeriod,notes:c.value,type:"CTR"},b=await he.transfers.updateTransfer(u.value.contractId,m);y.value="success",k.value=s.value?"تم بنجاح":"Success",M.value=s.value?"تم تحديث العقد بنجاح":"Contract updated successfully",A.value=3e3,$.value=!0,w("submit",b.data),E()}catch(m){console.error("Error updating contract:",m),y.value="error",k.value=s.value?"خطأ":"Error",M.value=s.value?"حدث خطأ أثناء تحديث العقد":"Error updating contract",A.value=0,$.value=!0}}return(P,m)=>(_(),f(ee,null,[v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:E},[e("div",{class:n(["modal-container",{"dark-mode":g.value}]),onClick:m[2]||(m[2]=U(()=>{},["stop"]))},[e("div",Mo,[e("h2",null,t(s.value?"تحرير العقد":"Edit Contract"),1),e("button",{class:"close-modal",onClick:E},"×")]),e("div",Bo,[e("div",Ao,[e("label",Eo,t(s.value?"فترة العقد":"Contract Period"),1),e("div",Fo,[ve(e("select",{id:"contractPeriod","onUpdate:modelValue":m[0]||(m[0]=b=>u.value.contractPeriod=b),required:""},[e("option",Io,t(s.value?"اختر فترة":"Select period"),1),e("option",xo,t(s.value?"يناير":"January"),1),e("option",qo,t(s.value?"فبراير":"February"),1),e("option",Vo,t(s.value?"مارس":"March"),1),e("option",No,t(s.value?"أبريل":"April"),1),e("option",Lo,t(s.value?"مايو":"May"),1),e("option",Oo,t(s.value?"يونيو":"June"),1),e("option",Uo,t(s.value?"يوليو":"July"),1),e("option",zo,t(s.value?"أغسطس":"August"),1),e("option",Jo,t(s.value?"سبتمبر":"September"),1),e("option",Ho,t(s.value?"أكتوبر":"October"),1),e("option",Wo,t(s.value?"نوفمبر":"November"),1),e("option",Go,t(s.value?"ديسمبر":"December"),1)],512),[[me,u.value.contractPeriod]]),m[4]||(m[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",Ko,[e("label",Qo,t(s.value?"وصف العقد":"Contract Description"),1),V(a(fe),{content:c.value,"onUpdate:content":m[1]||(m[1]=b=>c.value=b),toolbar:F,contentType:"html",theme:"snow",options:T,class:n(["transfer-editor",{"editor-error":h.value}])},null,8,["content","class"]),h.value?(_(),f("div",Zo,t(s.value?"هذا الحقل مطلوب":"This field is required"),1)):q("",!0)])]),e("div",Yo,[e("button",{class:"btn-secondary",onClick:E},t(s.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:x},t(s.value?"حفظ التغييرات":"Save Changes"),1)])],2)])):q("",!0),V(ue,{show:$.value,"onUpdate:show":m[3]||(m[3]=b=>$.value=b),type:y.value,title:k.value,message:M.value,timer:A.value,showConfirmButton:!0,confirmButtonText:s.value?"حسناً":"OK"},null,8,["show","type","title","message","timer","confirmButtonText"])],64))}}),es=ie(Xo,[["__scopeId","data-v-7b141b7d"]]),ts={class:"modal-header"},as={class:"modal-body file-modal-body"},os={key:0,class:"file-upload-section"},ss=["accept"],ns={class:"drop-zone-content"},ls={class:"file-types"},rs={key:0,class:"selected-file"},is={key:1,class:"file-error"},cs=["disabled"],us={key:0},ds={key:1},vs={key:1,class:"read-only-notice"},ps={class:"file-list-section"},_s={key:0,class:"loading-files"},ms={key:1,class:"no-files"},fs={key:2,class:"file-list"},hs={class:"file-info"},bs={class:"file-name"},gs={class:"file-size"},ys={class:"file-date"},$s={class:"file-actions"},ks=["onClick"],Cs={__name:"AttachmentModal",props:{show:{type:Boolean,default:!1},transactionId:{type:Number,default:0},status:{type:String,default:"pending"}},emits:["update:show","files-updated"],setup(v,{emit:C}){const r=v,w=C,c=te(),h=i(!1),u=i(!1),F=i([]),T=i(!1),S=i(null),s=i(null),g=i(!1),$=i(!1),y=i(""),k=i([".xlsx",".pdf",".doc",".docx",".xls"]);H(()=>c.darkMode,j=>{h.value=j},{immediate:!0}),H(()=>c.language,j=>{u.value=j==="ar"},{immediate:!0}),H(()=>r.transactionId,j=>{j&&r.show&&x()});function M(j){return j?new Date(j).toLocaleDateString():""}function A(j){return j<1024?j+" B":j<1024*1024?(j/1024).toFixed(1)+" KB":(j/(1024*1024)).toFixed(1)+" MB"}function E(){w("update:show",!1),D()}async function x(){if(r.transactionId){T.value=!0;try{const j=await Ce.listFiles(r.transactionId);j&&j.attachments?F.value=j.attachments:F.value=[]}catch(j){console.error("Error loading files:",j),F.value=[]}finally{T.value=!1}}}function P(j){const L=j.target.files[0];L&&b(L)}function m(j){g.value=!1;const L=j.dataTransfer.files[0];L&&b(L)}function b(j){if(j.size>20971520){y.value=u.value?"حجم الملف كبير جدًا. الحد الأقصى هو 5 ميغابايت.":"File is too large. Maximum size is 5MB.";return}const B="."+j.name.split(".").pop().toLowerCase();if(!k.value.includes(B)){y.value=u.value?"نوع الملف غير مدعوم. الأنواع المدعومة هي: .xlsx، .pdf، .doc، .docx":"File type not allowed. Allowed types are: .xlsx, .pdf, .doc, .docx";return}y.value="",S.value=j}function D(){S.value=null,y.value="",s.value&&(s.value.value="")}const I=i(!1),z=i("success"),O=i(""),Q=i("");async function W(){if(!(!S.value||!r.transactionId)){$.value=!0;try{await Ce.uploadFile(S.value,r.transactionId),D(),x(),w("files-updated"),z.value="success",O.value=u.value?"تم بنجاح!":"Success!",Q.value=u.value?"تم تحميل الملف بنجاح":"File uploaded successfully",I.value=!0}catch(j){console.error("Error uploading file:",j),y.value=u.value?"حدث خطأ أثناء تحميل الملف. يرجى المحاولة مرة أخرى.":"Error uploading file. Please try again."}finally{$.value=!1}}}function G(j){const L=atob(j.file_data),B=L.length,pe=new Uint8Array(B);for(let le=0;le<B;le++)pe[le]=L.charCodeAt(le);const ne=new Blob([pe],{type:j.file_type}),ae=URL.createObjectURL(ne),oe=document.createElement("a");oe.href=ae,oe.download=j.file_name,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(ae)}return(j,L)=>(_(),f(ee,null,[v.show?(_(),f("div",{key:0,class:"modal-overlay",onClick:E},[e("div",{class:n(["file-modal-container",{"dark-mode":h.value}]),onClick:L[3]||(L[3]=U(()=>{},["stop"]))},[e("div",ts,[e("h2",null,t(u.value?"إدارة المرفقات":"Manage Attachments"),1),e("button",{class:"close-modal",onClick:E},"×")]),e("div",as,[v.status.toLowerCase()==="waiting-to-submit"?(_(),f("div",os,[e("h3",null,t(u.value?"تحميل ملف جديد":"Upload New File"),1),e("div",{class:n(["file-drop-zone",{"file-drop-active":g.value}]),onDragover:L[1]||(L[1]=U(B=>g.value=!0,["prevent"])),onDragleave:L[2]||(L[2]=B=>g.value=!1),onDrop:U(m,["prevent"])},[e("input",{type:"file",ref_key:"fileInput",ref:s,onChange:P,class:"file-input",accept:k.value.join(",")},null,40,ss),e("div",ns,[V(a(Ot),{size:"48"}),e("p",null,t(u.value?"اسحب وأفلت الملف هنا أو":"Drag and drop files here or"),1),e("button",{class:"btn-secondary",onClick:L[0]||(L[0]=B=>j.$refs.fileInput.click())},t(u.value?"اختر ملفًا":"Browse files"),1),e("p",ls,t(u.value?"الملفات المسموح بها":"Allowed files")+": .xlsx, .pdf, .doc, .docx ",1)]),S.value?(_(),f("div",rs,[V(a(Ge),{size:"18"}),e("span",null,t(S.value.name),1),e("button",{class:"clear-file",onClick:U(D,["prevent"])},"×")])):q("",!0),y.value?(_(),f("div",is,t(y.value),1)):q("",!0)],34),e("button",{class:"btn-primary upload-btn",disabled:!S.value||$.value,onClick:W},[$.value?(_(),f("span",ds,t(u.value?"جاري التحميل...":"Uploading..."),1)):(_(),f("span",us,t(u.value?"تحميل الملف":"Upload File"),1))],8,cs)])):(_(),f("div",vs,[V(a(qt),{size:"18"}),e("p",null,t(u.value?"المرفقات للقراءة فقط. لا يمكن إضافة مرفقات جديدة بعد التقديم.":"Attachments are read-only. You cannot add new attachments after submission."),1)])),e("div",ps,[e("h3",null,t(u.value?"المرفقات الحالية":"Current Attachments"),1),T.value?(_(),f("div",_s,t(u.value?"جاري تحميل المرفقات...":"Loading attachments..."),1)):F.value.length===0?(_(),f("div",ms,t(u.value?"لا توجد مرفقات لهذه المعاملة":"No attachments for this transaction"),1)):(_(),f("ul",fs,[(_(!0),f(ee,null,ke(F.value,B=>(_(),f("li",{key:B.attachment_id,class:"file-item"},[e("div",hs,[V(a(Ge),{size:"18"}),e("span",bs,t(B.file_name),1),e("span",gs,t(A(B.file_size)),1),e("span",ys,t(M(B.upload_date)),1)]),e("div",$s,[e("button",{onClick:pe=>G(B),class:"icon-btn",title:"Download"},[V(a(Ut),{size:"18"})],8,ks)])]))),128))]))])])],2)])):q("",!0),V(ue,{show:I.value,"onUpdate:show":L[4]||(L[4]=B=>I.value=B),type:z.value,title:O.value,message:Q.value,timer:3e3},null,8,["show","type","title","message"])],64))}},ws={class:"modal-header"},Ps={class:"modal-body approval-pipeline-body"},Ts={key:0,class:"waiting-to-submit"},js={class:"waiting-message"},Ss={key:1,class:"approval-steps"},Ds={class:"step-icon"},Rs={class:"step-content"},Ms={class:"step-title"},Bs={class:"step-approver"},As={key:0,class:"step-date"},Es={key:1,class:"step-status"},Fs={key:2,class:"step-status rejected-text"},Is={class:"step-icon"},xs={class:"step-content"},qs={class:"step-title"},Vs={class:"step-approver"},Ns={key:0,class:"step-date"},Ls={key:1,class:"step-status"},Os={key:2,class:"step-status rejected-text"},Us={class:"step-icon"},zs={class:"step-content"},Js={class:"step-title"},Hs={class:"step-approver"},Ws={key:0,class:"step-date"},Gs={key:1,class:"step-status"},Ks={key:2,class:"step-status rejected-text"},Qs={class:"step-icon"},Zs={class:"step-content"},Ys={class:"step-title"},Xs={class:"step-approver"},en={key:0,class:"step-date"},tn={key:1,class:"step-status"},an={key:2,class:"step-status rejected-text"},on=se({__name:"ApprovalPipelineModal",props:{modelValue:{type:Boolean,default:!1},approvalData:{type:Object,required:!0,default:()=>({})}},emits:["update:modelValue"],setup(v,{emit:C}){const r=v,w=C,c=te(),h=R(()=>c.language==="ar"),u=R(()=>c.darkMode),F=R(()=>{var $,y,k,M,A,E,x,P,m;return!(($=r.approvalData)!=null&&$.approvel_1)&&!((y=r.approvalData)!=null&&y.approvel_2)&&!((k=r.approvalData)!=null&&k.approvel_3)&&!((M=r.approvalData)!=null&&M.approvel_4)&&!((A=r.approvalData)!=null&&A.approvel_1_date)&&!((E=r.approvalData)!=null&&E.approvel_2_date)&&!((x=r.approvalData)!=null&&x.approvel_3_date)&&!((P=r.approvalData)!=null&&P.approvel_4_date)&&((m=r.approvalData)==null?void 0:m.status_level)===1});function T($){var y,k,M,A,E,x,P,m,b,D,I;if(((y=r.approvalData)==null?void 0:y.status_level)===-1){if($<4){let z,O,Q;return $===1?(z=(k=r.approvalData)==null?void 0:k.approvel_1_date,O=(M=r.approvalData)==null?void 0:M.approvel_1,Q=(A=r.approvalData)==null?void 0:A.approvel_2_date):$===2?(z=(E=r.approvalData)==null?void 0:E.approvel_2_date,O=(x=r.approvalData)==null?void 0:x.approvel_2,Q=(P=r.approvalData)==null?void 0:P.approvel_3_date):(z=(m=r.approvalData)==null?void 0:m.approvel_3_date,O=(b=r.approvalData)==null?void 0:b.approvel_3,Q=(D=r.approvalData)==null?void 0:D.approvel_4_date),!!z&&!!O&&!Q}if($===4)return!!((I=r.approvalData)!=null&&I.approvel_4_date)}return!1}function S($){for(let y=1;y<$;y++)if(T(y))return!0;return!1}function s(){w("update:modelValue",!1)}function g($){return $?new Date($).toLocaleDateString():""}return($,y)=>{var k,M,A,E,x,P,m,b,D,I,z,O,Q,W,G,j;return v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:s},[e("div",{class:n(["approval-modal-container",{"dark-mode":u.value}]),onClick:y[0]||(y[0]=U(()=>{},["stop"]))},[e("div",ws,[e("h2",null,t(h.value?"سير عملية الموافقة":"Approval Pipeline"),1),e("button",{class:"close-modal",onClick:s},"×")]),e("div",Ps,[F.value?(_(),f("div",Ts,[y[1]||(y[1]=e("div",{class:"waiting-icon"},[e("i",{class:"fas fa-clock"})],-1)),e("div",js,t(h.value?"في انتظار التقديم":"Waiting to submit"),1)])):(_(),f("div",Ss,[e("div",{class:n(["step-card",{approved:(k=v.approvalData)==null?void 0:k.approvel_1_date,pending:!((M=v.approvalData)!=null&&M.approvel_1_date),rejected:T(1),rtl:h.value}])},[e("div",Ds,[e("i",{class:n(T(1)?"fas fa-times-circle":"fas fa-clipboard-check")},null,2)]),e("div",Rs,[e("div",Ms,t(h.value?"قسم التخطيط والموازنة":"Planning & Budget"),1),e("div",Bs,t(((A=v.approvalData)==null?void 0:A.approvel_1)||"-"),1),(E=v.approvalData)!=null&&E.approvel_1_date?(_(),f("div",As,t(g(v.approvalData.approvel_1_date)),1)):T(1)?(_(),f("div",Fs,t(h.value?"مرفوض":"Rejected"),1)):(_(),f("div",Es,t(h.value?"قيد الانتظار":"Pending"),1))])],2),e("div",{class:n(["step-arrow",{"rtl-arrow":h.value}])},null,2),e("div",{class:n(["step-card",{approved:((x=v.approvalData)==null?void 0:x.approvel_2_date)&&!T(2),pending:!((P=v.approvalData)!=null&&P.approvel_2_date)&&!T(2),rejected:T(2),rtl:h.value,"greyed-out":S(2)}])},[e("div",Is,[e("i",{class:n(T(2)?"fas fa-times-circle":"fas fa-file-invoice-dollar")},null,2)]),e("div",xs,[e("div",qs,t(h.value?"مدير إدارة المالية":"Finance Director"),1),e("div",Vs,t(((m=v.approvalData)==null?void 0:m.approvel_2)||"-"),1),(b=v.approvalData)!=null&&b.approvel_2_date?(_(),f("div",Ns,t(g(v.approvalData.approvel_2_date)),1)):!T(2)&&!S(2)?(_(),f("div",Ls,t(h.value?"قيد الانتظار":"Pending"),1)):T(2)?(_(),f("div",Os,t(h.value?"مرفوض":"Rejected"),1)):q("",!0)])],2),e("div",{class:n(["step-arrow",{"rtl-arrow":h.value}])},null,2),e("div",{class:n(["step-card",{approved:((D=v.approvalData)==null?void 0:D.approvel_3_date)&&!T(3),pending:!((I=v.approvalData)!=null&&I.approvel_3_date)&&!T(3),rejected:T(3),rtl:h.value,"greyed-out":S(3)}])},[e("div",Us,[e("i",{class:n(T(3)?"fas fa-times-circle":"fas fa-chart-line")},null,2)]),e("div",zs,[e("div",Js,t(h.value?"المدير المالي التنفيذي":"CFO"),1),e("div",Hs,t(((z=v.approvalData)==null?void 0:z.approvel_3)||"-"),1),(O=v.approvalData)!=null&&O.approvel_3_date?(_(),f("div",Ws,t(g(v.approvalData.approvel_3_date)),1)):!T(3)&&!S(3)?(_(),f("div",Gs,t(h.value?"قيد الانتظار":"Pending"),1)):T(3)?(_(),f("div",Ks,t(h.value?"مرفوض":"Rejected"),1)):q("",!0)])],2),e("div",{class:n(["step-arrow",{"rtl-arrow":h.value}])},null,2),e("div",{class:n(["step-card",{approved:((Q=v.approvalData)==null?void 0:Q.approvel_4_date)&&!T(4),pending:!((W=v.approvalData)!=null&&W.approvel_4_date)&&!T(4),rejected:T(4),rtl:h.value,"greyed-out":S(4)}])},[e("div",Qs,[e("i",{class:n(T(4)?"fas fa-times-circle":"fas fa-check-double")},null,2)]),e("div",Zs,[e("div",Ys,t(h.value?"المدير العام":"General Manager"),1),e("div",Xs,t(((G=v.approvalData)==null?void 0:G.approvel_4)||"-"),1),(j=v.approvalData)!=null&&j.approvel_4_date?(_(),f("div",en,t(g(v.approvalData.approvel_4_date)),1)):!T(4)&&!S(4)?(_(),f("div",tn,t(h.value?"قيد الانتظار":"Pending"),1)):T(4)?(_(),f("div",an,t(h.value?"مرفوض":"Rejected"),1)):q("",!0)])],2)]))])],2)])):q("",!0)}}}),sn=ie(on,[["__scopeId","data-v-650058fb"]]),nn={class:"rejection-modal-header"},ln={class:"rejection-modal-body"},rn={key:0,class:"loading-container"},cn={key:1,class:"error-container"},un={key:2,class:"no-reports"},dn={key:3,class:"reports-list"},vn={class:"report-header"},pn={class:"report-title"},_n={class:"report-number"},mn={class:"report-date"},fn={class:"report-content"},hn={class:"report-field"},bn={class:"field-label"},gn={class:"field-value"},yn={class:"report-field reason"},$n={class:"field-label"},kn={class:"reason-text"},Cn={class:"report-footer"},wn={class:"transaction-id"},Pn=se({__name:"RejectionReportModal",props:{show:{type:Boolean,default:!1},transactionId:{type:Number,default:0}},emits:["update:show"],setup(v,{emit:C}){const r=v,w=C,c=i([]),h=i(!1),u=i(""),F=te(),T=R(()=>F.darkMode),S=R(()=>F.language==="ar");H(()=>r.show,async y=>{y&&r.transactionId&&await $()}),H(()=>r.transactionId,async y=>{r.show&&y&&await $()});function s(y){return y?new Date(y).toLocaleString():""}function g(){w("update:show",!1)}async function $(){if(r.transactionId){h.value=!0,u.value="",c.value=[];try{const y=await Ce.getRejectionReports(r.transactionId);c.value=y||[]}catch(y){u.value=S.value?"حدث خطأ أثناء تحميل تقارير الرفض":"An error occurred while loading rejection reports",console.error("Error loading rejection reports:",y)}finally{h.value=!1}}}return Ze(async()=>{r.show&&r.transactionId&&await $()}),(y,k)=>v.show?(_(),f("div",{key:0,class:"rejection-modal-overlay",onClick:g},[e("div",{class:n(["rejection-modal-container",{"dark-mode":T.value}]),onClick:k[0]||(k[0]=U(()=>{},["stop"]))},[e("div",nn,[e("h2",null,t(S.value?"تقارير الرفض":"Rejection Reports"),1),e("button",{class:"close-modal",onClick:g},k[1]||(k[1]=[e("span",{class:"close-icon"},"×",-1)]))]),e("div",ln,[h.value?(_(),f("div",rn,[k[2]||(k[2]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,t(S.value?"جاري التحميل...":"Loading..."),1)])):u.value?(_(),f("div",cn,[k[3]||(k[3]=e("div",{class:"error-icon"},"!",-1)),e("p",null,t(u.value),1)])):c.value.length===0?(_(),f("div",un,[k[4]||(k[4]=e("div",{class:"info-icon"},"i",-1)),e("p",null,t(S.value?"لا توجد تقارير رفض":"No rejection reports found"),1)])):(_(),f("div",dn,[V(Rt,{name:"fade",tag:"div"},{default:Ye(()=>[(_(!0),f(ee,null,ke(c.value,(M,A)=>(_(),f("div",{key:A,class:"report-card"},[e("div",vn,[e("div",pn,[k[5]||(k[5]=e("span",{class:"report-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})])],-1)),e("span",_n,t(S.value?"تقرير رفض":"Rejection Report")+" #"+t(A+1),1)]),e("div",mn,t(s(M.created_at)),1)]),e("div",fn,[e("div",hn,[e("span",bn,t(S.value?"رفض بواسطة":"Rejected by")+":",1),e("span",gn,t(M["rejected by"]),1)]),e("div",yn,[e("span",$n,t(S.value?"السبب":"Reason")+":",1),e("div",kn,t(M.reason_text),1)])]),e("div",Cn,[e("div",wn,t(S.value?"رقم المعاملة":"Transaction ID")+": "+t(M.transaction_id),1)])]))),128))]),_:1})]))])],2)])):q("",!0)}}),Tn=ie(Pn,[["__scopeId","data-v-8f9f49fb"]]),jn={class:"modal-header"},Sn={class:"modal-body oracle-pipeline-body"},Dn={class:"waiting-for-erp"},Rn={class:"waiting-message"},Mn={class:"waiting-description"},Bn=se({__name:"OracleApprovalPipelineModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:C}){const r=C,w=te(),c=R(()=>w.language==="ar"),h=R(()=>w.darkMode);function u(){r("update:modelValue",!1)}return(F,T)=>v.modelValue?(_(),f("div",{key:0,class:"modal-overlay",onClick:u},[e("div",{class:n(["oracle-modal-container",{"dark-mode":h.value}]),onClick:T[0]||(T[0]=U(()=>{},["stop"]))},[e("div",jn,[e("h2",null,t(c.value?"حالة نظام الأوراكل":"Oracle ERP Status"),1),e("button",{class:"close-modal",onClick:u},"×")]),e("div",Sn,[e("div",Dn,[T[1]||(T[1]=e("div",{class:"waiting-icon"},[e("i",{class:"fas fa-sync-alt fa-spin"})],-1)),e("div",Rn,t(c.value?"في انتظار الاتصال بنظام ERP...":"Waiting to connect to ERP..."),1),e("div",Mn,t(c.value?"جاري محاولة الاتصال بنظام أوراكل للمؤسسة":"Attempting to establish connection with Oracle Enterprise System"),1)])])],2)])):q("",!0)}}),An=ie(Bn,[["__scopeId","data-v-c157c779"]]),K="https://lightidea.org:9000",En="https://lightidea.org:9000",Fn="/api/budget/transfers/list/",In=6,Qe={async fetchTransfers(v="FAR",C="",r=1){const w=Y();if(!w.token)throw new Error("Authentication token not found");const c={page:r.toString(),page_size:In.toString()},h={Authorization:`Bearer ${w.token}`,Accept:"application/json","Content-Type":"application/json"},u=C.trim()?{code:v,search:C.trim()}:{code:v};try{return(await Z.post(`${En}${Fn}`,u,{headers:h,params:c})).data}catch(F){throw console.error("Error fetching transfers:",F),F}},async deleteTransfer(v){const C=Y();if(!C.token)throw new Error("Authentication token not found");try{return(await Z.delete(`${K}/api/budget/transfers/${v}/delete/`,{headers:{Authorization:`Bearer ${C.token}`}})).data}catch(r){throw console.error("Error deleting transfer:",r),r}},async getTransferDetails(v){const C=Y();try{return(await Z.get(`${K}/api/budget/transfers/${v}/`,{headers:{Authorization:`Bearer ${C.token}`}})).data}catch(r){throw console.error("Error fetching transfer details:",r),r}},async submitTransferRequest(v){const C=Y();try{return(await Z.post(`${K}/api/adjd-transfers/submit/`,{transaction:v},{headers:{Authorization:`Bearer ${C.token}`}})).data}catch(r){throw console.error("Error submitting transfer request:",r),r}},async reopenTransferRequest(v){const C=Y();try{return(await Z.post(`${K}/api/adjd-transfers/reopen/`,{transaction:v,action:"reopen"},{headers:{Authorization:`Bearer ${C.token}`}})).data}catch(r){throw console.error("Error reopening transfer request:",r),r}},async generateReport(v){const C=Y();try{return(await Z.get(`${K}/api/budget/transfers/${v}/report/`,{headers:{Authorization:`Bearer ${C.token}`},responseType:"blob"})).data}catch(r){throw console.error("Error generating report:",r),r}},async createTransfer(v,C){const r=Y();try{const w=C.map(u=>({transaction:u.transaction,cost_center_code:u.cost_center_code,cost_center_name:u.cost_center_name,account_code:u.account_code,account_name:u.account_name,approved_budget:parseFloat(u.approved_budget)||0,available_budget:parseFloat(u.available_budget)||0,from_center:parseFloat(u.from_center)||0,to_center:parseFloat(u.to_center)||0,encumbrance:parseFloat(u.encumbrance)||0,actual:parseFloat(u.actual)||0,done:1}));let c;switch(v){case"AFR":c=`${K}/api/adjd-transfers/create/`;break;case"FAD":c=`${K}/api/fund-adj-transfers/create/`;break;case"FAR":default:c=`${K}/api/fund-transfers/create/`;break}return(await Z.post(c,w,{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(w){throw console.error("Error creating transfer request:",w),w}},async uploadFile(v,C){const r=Y(),w=new FormData;w.append("file",v),w.append("transaction_id",C.toString());try{return(await Z.post(`${K}/api/budget/transfers/upload-file/`,w,{headers:{Authorization:`Bearer ${r.token}`,"Content-Type":"multipart/form-data"}})).data}catch(c){throw console.error("Error uploading file:",c),c}},async listFiles(v){const C=Y();try{return(await Z.get(`${K}/api/budget/transfers/${v}/files/`,{headers:{Authorization:`Bearer ${C.token}`}})).data}catch(r){throw console.error("Error listing files:",r),r}},async uploadExcelFile(v,C){const r=Y(),w=new FormData;w.append("file",v);try{return(await Z.post(`${K}/api/budget/transfers/${C}/upload-excel/`,w,{headers:{Authorization:`Bearer ${r.token}`,"Content-Type":"multipart/form-data"}})).data}catch(c){throw console.error("Error uploading Excel file:",c),c}},async getPivotFundDetails(v,C){const r=Y();try{return(await Z.get(`${K}/api/accounts-entities/pivot-funds/getdetail/?entity_id=${v}&account_id=${C}`,{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(w){throw(!w.response||w.response.status!==404)&&console.error("Error fetching pivot fund details:",w),w}},getTransfers(v){return Z.get(`${K}/api/budget/transfers/?transaction=${v}`)}},xn="_unifiedPage_1a4vb_4",qn="_darkTheme_1a4vb_20",Vn="_glassPanel_1a4vb_30",Nn="_pageHeader_1a4vb_65",Ln="_pageTitle_1a4vb_93",On="_pageSubtitle_1a4vb_118",Un="_btnPrimary_1a4vb_137",zn="_btnSecondary_1a4vb_153",Jn="_btnDanger_1a4vb_170",Hn="_backgroundEffects_1a4vb_198",Wn="_floatingOrb_1a4vb_208",Gn="_floatSimple_1a4vb_1",Kn="_orb1_1a4vb_215",Qn="_orb2_1a4vb_223",Zn="_loadingState_1a4vb_245",Yn="_loadingContainer_1a4vb_259",Xn="_loadingSpinnerEnhanced_1a4vb_268",el="_spinnerRing_1a4vb_275",tl="_spinSimple_1a4vb_1",al="_ring1_1a4vb_282",ol="_ring2_1a4vb_290",sl="_loadingCore_1a4vb_303",nl="_coreDot_1a4vb_312",ll="_pulseSimple_1a4vb_1",rl="_loadingDots_1a4vb_321",il="_dot_1a4vb_327",cl="_bounceSimple_1a4vb_1",ul="_dot1_1a4vb_335",dl="_dot2_1a4vb_339",vl="_dot3_1a4vb_343",pl="_loadingText_1a4vb_347",_l="_loadingProgress_1a4vb_355",ml="_progressBar_1a4vb_364",fl="_progressSimple_1a4vb_1",hl="_emptyState_1a4vb_449",bl="_emptyIcon_1a4vb_458",gl="_modalOverlay_1a4vb_465",yl="_modalContainer_1a4vb_478",$l="_modalHeader_1a4vb_494",kl="_modalFooter_1a4vb_498",Cl="_modalBody_1a4vb_503",wl="_closeModal_1a4vb_538",Pl="_descriptionContent_1a4vb_556",Tl="_headerLeft_1a4vb_579",jl="_headerRight_1a4vb_583",Sl="_searchSection_1a4vb_599",Dl="_searchContainer_1a4vb_605",Rl="_searchInputWrapper_1a4vb_612",Ml="_searchIcon_1a4vb_621",Bl="_searchInput_1a4vb_612",Al="_clearSearch_1a4vb_630",El="_searchActions_1a4vb_694",Fl="_btnFilter_1a4vb_699",Il="_btnRefresh_1a4vb_700",xl="_tableContainer_1a4vb_737",ql="_modernTableWrapper_1a4vb_744",Vl="_modernTable_1a4vb_744",Nl="_tableHeader_1a4vb_761",Ll="_tableRow_1a4vb_820",Ol="_rowPending_1a4vb_835",Ul="_rowApproved_1a4vb_840",zl="_rowRejected_1a4vb_845",Jl="_rowSubmitted_1a4vb_850",Hl="_actionButtonsGroup_1a4vb_873",Wl="_actionBtn_1a4vb_880",Gl="_disabled_1a4vb_893",Kl="_editBtn_1a4vb_898",Ql="_deleteBtn_1a4vb_903",Zl="_rejectionIconBtn_1a4vb_914",Yl="_rejectionIconSmall_1a4vb_943",Xl="_pulseWarning_1a4vb_1",er="_codeLink_1a4vb_972",tr="_descriptionBtn_1a4vb_1001",ar="_trackBtn_1a4vb_1018",or="_attachmentBtn_1a4vb_1043",sr="_statusBadge_1a4vb_1068",nr="_statusPending_1a4vb_1079",lr="_statusApproved_1a4vb_1084",rr="_statusRejected_1a4vb_1089",ir="_statusSubmitted_1a4vb_1094",cr="_tdRejection_1a4vb_1105",ur="_rejectionContainer_1a4vb_1110",dr="_rejectionPreview_1a4vb_1117",vr="_rejectionStatusBadge_1a4vb_1141",pr="_rejectionIcon_1a4vb_914",_r="_rejectionLabel_1a4vb_1154",mr="_rejectionReasonPreview_1a4vb_1166",fr="_reasonText_1a4vb_1170",hr="_pulseRejection_1a4vb_1",br="_loadingDotsInline_1a4vb_1193",gr="_bounceDot_1a4vb_1",yr="_rejectionDetailsBtn_1a4vb_1229",$r="_btnIcon_1a4vb_1272",kr="_btnText_1a4vb_1276",Cr="_rejectionNotAvailable_1a4vb_1280",wr="_naIcon_1a4vb_1291",Pr="_naText_1a4vb_1297",Tr="_paginationWrapper_1a4vb_1375",jr="_paginationInfo_1a4vb_1385",Sr="_paginationText_1a4vb_1392",Dr="_itemsPerPage_1a4vb_1397",Rr="_pageSizeSelect_1a4vb_1405",Mr="_paginationControls_1a4vb_1428",Br="_paginationBtn_1a4vb_1434",Ar="_active_1a4vb_1465",Er="_pageNumbers_1a4vb_1471",Fr="_pageNumber_1a4vb_1471",Ir="_ellipsis_1a4vb_1483",xr="_rejectionPopupOverlay_1a4vb_1601",qr="_fadeIn_1a4vb_1",Vr="_rejectionPopupContainer_1a4vb_1616",Nr="_popupSlideIn_1a4vb_1",Lr="_rejectionPopupHeader_1a4vb_1636",Or="_rejectionPopupTitle_1a4vb_1650",Ur="_rejectionPopupIcon_1a4vb_1656",zr="_bounce_1a4vb_1",Jr="_rejectionPopupClose_1a4vb_1677",Hr="_rejectionPopupBody_1a4vb_1708",Wr="_rejectionDetails_1a4vb_1229",Gr="_rejectionMeta_1a4vb_1718",Kr="_metaLabel_1a4vb_1733",Qr="_metaValue_1a4vb_1739",Zr="_rejectionReasonContent_1a4vb_1753",Yr="_reasonLabel_1a4vb_1759",Xr="_reasonTextContainer_1a4vb_1770",ei="_reasonTextFull_1a4vb_1783",ti="_rejectionPopupFooter_1a4vb_1795",ai="_btnPopupClose_1a4vb_1809",oi="_btnPopupDetails_1a4vb_1825",o={unifiedPage:xn,darkTheme:qn,glassPanel:Vn,pageHeader:Nn,pageTitle:Ln,pageSubtitle:On,btnPrimary:Un,btnSecondary:zn,btnDanger:Jn,backgroundEffects:Hn,floatingOrb:Wn,floatSimple:Gn,orb1:Kn,orb2:Qn,loadingState:Zn,loadingContainer:Yn,loadingSpinnerEnhanced:Xn,spinnerRing:el,spinSimple:tl,ring1:al,ring2:ol,loadingCore:sl,coreDot:nl,pulseSimple:ll,loadingDots:rl,dot:il,bounceSimple:cl,dot1:ul,dot2:dl,dot3:vl,loadingText:pl,loadingProgress:_l,progressBar:ml,progressSimple:fl,emptyState:hl,emptyIcon:bl,modalOverlay:gl,modalContainer:yl,modalHeader:$l,modalFooter:kl,modalBody:Cl,closeModal:wl,descriptionContent:Pl,headerLeft:Tl,headerRight:jl,searchSection:Sl,searchContainer:Dl,searchInputWrapper:Rl,searchIcon:Ml,searchInput:Bl,clearSearch:Al,searchActions:El,btnFilter:Fl,btnRefresh:Il,tableContainer:xl,modernTableWrapper:ql,modernTable:Vl,tableHeader:Nl,tableRow:Ll,rowPending:Ol,rowApproved:Ul,rowRejected:zl,rowSubmitted:Jl,actionButtonsGroup:Hl,actionBtn:Wl,disabled:Gl,editBtn:Kl,deleteBtn:Ql,rejectionIconBtn:Zl,rejectionIconSmall:Yl,pulseWarning:Xl,codeLink:er,descriptionBtn:tr,trackBtn:ar,attachmentBtn:or,statusBadge:sr,statusPending:nr,statusApproved:lr,statusRejected:rr,statusSubmitted:ir,tdRejection:cr,rejectionContainer:ur,rejectionPreview:dr,rejectionStatusBadge:vr,rejectionIcon:pr,rejectionLabel:_r,rejectionReasonPreview:mr,reasonText:fr,pulseRejection:hr,loadingDotsInline:br,bounceDot:gr,rejectionDetailsBtn:yr,btnIcon:$r,btnText:kr,rejectionNotAvailable:Cr,naIcon:wr,naText:Pr,paginationWrapper:Tr,paginationInfo:jr,paginationText:Sr,itemsPerPage:Dr,pageSizeSelect:Rr,paginationControls:Mr,paginationBtn:Br,active:Ar,pageNumbers:Er,pageNumber:Fr,ellipsis:Ir,rejectionPopupOverlay:xr,fadeIn:qr,rejectionPopupContainer:Vr,popupSlideIn:Nr,rejectionPopupHeader:Lr,rejectionPopupTitle:Or,rejectionPopupIcon:Ur,bounce:zr,rejectionPopupClose:Jr,rejectionPopupBody:Hr,rejectionDetails:Wr,rejectionMeta:Gr,metaLabel:Kr,metaValue:Qr,rejectionReasonContent:Zr,reasonLabel:Yr,reasonTextContainer:Xr,reasonTextFull:ei,rejectionPopupFooter:ti,btnPopupClose:ai,btnPopupDetails:oi},si=["dir"],ni=["title"],li=["placeholder"],ri=["onClick","disabled","title"],ii=["onClick","disabled","title"],ci=["onClick","title"],ui=["onClick"],di=["onClick"],vi=["onClick","title"],pi=["disabled"],_i=["disabled"],mi=["onClick","disabled"],fi=["disabled"],hi=["disabled"],bi=["innerHTML"],wi=se({name:"UnifiedTransfersPage",__name:"UnifiedTransfers",setup(v){const C=Mt(),r=te(),w=Vt(),c=R(()=>{switch(C.name){case"Home":return{pageType:"transfers",code:"FAR",newRequestComponent:Ke,editComponent:Ie,cssClass:"home-page",title:"Transfers",subtitle:"Fund Adjustment Requests",searchPlaceholder:"Search transfers...",showRejectionColumn:!1,detailRoute:"/cost-center-transfer"};case"Enhancements":return{pageType:"enhancements",code:"AFR",newRequestComponent:Ia,editComponent:Ie,cssClass:"enhancements-page",title:"Enhancements",subtitle:"Additional Fund Requests",searchPlaceholder:"Search enhancements...",showRejectionColumn:!1,detailRoute:"/cost-center-transfer"};case"Settlements":return{pageType:"contracts",code:"FAD",newRequestComponent:lo,editComponent:es,cssClass:"contract-page",title:"Settlements",subtitle:"Fund Adjustment Department",searchPlaceholder:"Search settlements...",showRejectionColumn:!1,detailRoute:"/contracts"};default:return{pageType:"transfers",code:"FAR",newRequestComponent:Ke,editComponent:Ie,cssClass:"home-page",title:"Transfers",subtitle:"Fund Adjustment Requests",searchPlaceholder:"Search transfers...",showRejectionColumn:!1,detailRoute:"/cost-center-transfer"}}}),h=R(()=>c.value.cssClass),u=R(()=>{if(g.value)switch(C.name){case"Home":return"المناقلات";case"Enhancements":return"التعزيزات";case"Settlements":return"التسويات";default:return"المناقلات"}return c.value.title}),F=R(()=>{if(g.value)switch(C.name){case"Home":return"طلبات تعديل الميزانية";case"Enhancements":return"طلبات الأموال الإضافية";case"Settlements":return"قسم تعديل الأموال";default:return"طلبات تعديل الميزانية"}return c.value.subtitle}),T=R(()=>{if(g.value)switch(C.name){case"Home":return"البحث في المناقلات...";case"Enhancements":return"البحث في التعزيزات...";case"Settlements":return"البحث في التسويات...";default:return"البحث في المناقلات..."}return c.value.searchPlaceholder}),S=R(()=>c.value.newRequestComponent),s=R(()=>c.value.editComponent),g=R(()=>r.language==="ar"),$=R(()=>g.value?"طلب جديد":"New Request"),y=R(()=>g.value?`إنشاء ${u.value} جديد`:`Create New ${c.value.title}`),k=R(()=>g.value?"جاري التحميل...":"Loading..."),M=R(()=>g.value?"لا توجد بيانات":"No Data Available"),A=R(()=>g.value?`لا توجد ${u.value} متاحة`:`No ${c.value.title.toLowerCase()} available`),E=R(()=>g.value?"تأكيد الحذف":"Confirm Delete"),x=R(()=>g.value?"هل أنت متأكد من حذف هذا العنصر؟":"Are you sure you want to delete this item?"),P=R(()=>g.value?"إلغاء":"Cancel"),m=R(()=>g.value?"حذف":"Delete"),b=R(()=>g.value?"الوصف":"Description"),D=R(()=>g.value?"إغلاق":"Close"),I=R(()=>({actions:g.value?"الإجراءات":"Actions",code:g.value?"الرمز":"Code",requestedBy:g.value?"طلب بواسطة":"Requested By",description:g.value?"الوصف":"Description",requestDate:g.value?"تاريخ الطلب":"Request Date",transactionDate:g.value?"تاريخ المعاملة":"Transaction Date",track:g.value?"تتبع":"Track",status:g.value?"الحالة":"Status",attachments:g.value?"المرفقات":"Attachments",rejection:g.value?"الرفض":"Rejection"})),z=R(()=>{const l=(B.value-1)*6+1,d=Math.min(B.value*6,G.value);return g.value?`عرض ${l} إلى ${d} من ${G.value} عنصر`:`Showing ${l} to ${d} of ${G.value} items`}),O=i(!1),Q=i(null),W=i([]),G=i(0),j=i(!1),L=i(!1),B=i(1),pe=i(6),ne=i(""),ae=i(null),oe=i(!1),le=i(!1),qe=i(""),we=i(!1),Ve=i(null),be=i(!1),_e=i(null),Pe=i(!1),Ne=i(0),Le=i("pending"),Te=i(!1),Oe=i(null),Ue=i(!1),Xe=i(0),je=i(!1),Se=i(!1),ze=i("info"),Je=i(""),de=i(new Map),De=i(new Set),ge=i(!1),ye=i(null),$e=i(""),ce=R(()=>G.value===0?1:Math.ceil(G.value/pe.value)),et=R(()=>{const l=[],d=ce.value,N=B.value;if(d<=7)for(let p=1;p<=d;p++)l.push(p);else if(N<=4){for(let p=1;p<=5;p++)l.push(p);d>6&&l.push(-1),l.push(d)}else if(N>=d-3){l.push(1),d>6&&l.push(-1);for(let p=d-4;p<=d;p++)l.push(p)}else{l.push(1),l.push(-1);for(let p=N-1;p<=N+1;p++)l.push(p);l.push(-1),l.push(d)}return l});function tt(l){if(!l)return"";try{return new Date(l).toLocaleDateString("en-GB")}catch{return l}}function at(l){return l?l.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""):""}function ot(l){const d=l.toLowerCase();return d==="pending"?o.rowPending:d==="approved"?o.rowApproved:d==="rejected"?o.rowRejected:d==="submitted"?o.rowSubmitted:""}function st(l){const d=l.toLowerCase();return d==="pending"?o.statusPending:d==="approved"?o.statusApproved:d==="rejected"?o.statusRejected:d==="submitted"?o.statusSubmitted:""}function nt(l){const d=c.value.detailRoute,N=c.value.pageType==="enhancements"?{source:"EnhancementsPage"}:{};return{path:`${d}/${l.transaction_id}`,query:N}}function lt(l){return!l.attachment_count||l.attachment_count===0?g.value?"لا توجد مرفقات":"No attachments":g.value?`${l.attachment_count} مرفق(ات)`:`${l.attachment_count} attachment(s)`}function Re(l){return l.status.toLowerCase()==="rejected"}function X(l){return!l.approvel_1&&!l.approvel_2&&!l.approvel_3&&!l.approvel_4&&!l.approvel_1_date&&!l.approvel_2_date&&!l.approvel_3_date&&!l.approvel_4_date&&l.status_level===1}function rt(l){c.value.pageType==="enhancements"&&w.setNavigationSource("EnhancementsPage",{transactionId:l.transaction_id,code:l.code})}async function He(l){if(de.value.has(l))return de.value.get(l)||"";if(De.value.has(l))return"";try{De.value.add(l);const d=await Ce.getRejectionReports(l);if(d&&d.length>0){const N=d[d.length-1],p=N.rejection_reason||N.reason_text||(g.value?"لا يوجد سبب محدد":"No specific reason provided");return de.value.set(l,p),p}else{const N=g.value?"لا يوجد تقرير رفض":"No rejection report available";return de.value.set(l,N),N}}catch(d){console.error("Error fetching rejection reason:",d);const N=g.value?"خطأ في تحميل سبب الرفض":"Error loading rejection reason";return de.value.set(l,N),N}finally{De.value.delete(l)}}async function J(){try{O.value=!0;const l=await Qe.fetchTransfers(c.value.code,ne.value,B.value);l&&l.results?(Q.value=l,W.value=Array.isArray(l.results)?l.results:l.results.results||[],G.value=l.count||0,j.value=!!l.next,L.value=!!l.previous,W.value.filter(N=>Re(N)).forEach(N=>{de.value.has(N.transaction_id)||He(N.transaction_id)})):(W.value=[],G.value=0)}catch(l){console.error("Error fetching data:",l),Ee("error","Failed to load data"),W.value=[],G.value=0}finally{O.value=!1}}function it(){ae.value&&clearTimeout(ae.value),ae.value=setTimeout(()=>{B.value=1,J()},500)}function ct(){ne.value="",B.value=1,J()}function ut(){B.value<ce.value&&(B.value++,J())}function dt(){B.value>1&&(B.value--,J())}function vt(){B.value!==1&&(B.value=1,J())}function pt(){B.value!==ce.value&&(B.value=ce.value,J())}function _t(l){l!==-1&&l!==B.value&&l>=1&&l<=ce.value&&(B.value=l,J())}function mt(l){qe.value=l.description_x||l.notes||"",le.value=!0}function Me(){le.value=!1}function ft(l){Ve.value=l,we.value=!0}function ht(l){X(l)&&(_e.value=l,be.value=!0)}function Be(){be.value=!1,_e.value=null}function bt(){_e.value&&(O.value=!0,be.value=!1,Qe.deleteTransfer(_e.value.transaction_id).then(()=>{Ee("success","Item deleted successfully"),J()}).catch(l=>{console.error("Error deleting item:",l),Ee("error","Failed to delete item")}).finally(()=>{O.value=!1,_e.value=null}))}function gt(l){Ne.value=l.transaction_id,Le.value=X(l)?"waiting-to-submit":l.status,Pe.value=!0}function yt(l){Oe.value=l,Te.value=!0}function $t(){je.value=!0}async function kt(l){if(Re(l)){ye.value=l;try{const d=await He(l.transaction_id);$e.value=d,ge.value=!0}catch(d){console.error("Error loading rejection reason:",d),$e.value=g.value?"خطأ في تحميل سبب الرفض":"Error loading rejection reason",ge.value=!0}}}function Ae(){ge.value=!1,ye.value=null,$e.value=""}function Ct(){oe.value=!0}function wt(l){console.log("New request submitted:",l),J()}function Pt(l){console.log("Item updated:",l),J()}function Tt(){J()}function Ee(l,d){ze.value=l,Je.value=d,Se.value=!0}function jt(l){l.target.classList.add("search-focused")}function St(l){l.target.classList.remove("search-focused")}function Dt(){}return Ze(()=>{J()}),Bt(()=>{ae.value&&(clearTimeout(ae.value),ae.value=null),document.querySelectorAll(".unified-page *").forEach(d=>{const N=d;N.style.animation="none"})}),H(()=>C.name,()=>{B.value=1,ne.value="",J()}),H(()=>r.darkMode,()=>{}),(l,d)=>{const N=Ft("router-link");return _(),f("div",{class:n([a(o).unifiedPage,h.value,{[a(o).darkTheme]:a(r).darkMode}]),dir:g.value?"rtl":"ltr"},[e("div",{class:n(a(o).backgroundEffects)},[e("div",{class:n([a(o).floatingOrb,a(o).orb1])},null,2),e("div",{class:n([a(o).floatingOrb,a(o).orb2])},null,2)],2),e("div",{class:n([a(o).pageHeader,a(o).glassPanel])},[e("div",{class:n(a(o).headerLeft)},[e("h1",{class:n(a(o).pageTitle)},t(u.value),3),e("p",{class:n(a(o).pageSubtitle)},t(F.value),3)],2),e("div",{class:n(a(o).headerRight)},[e("button",{class:n(a(o).btnPrimary),onClick:Ct,title:y.value},[e("span",null,t($.value),1)],10,ni)],2)],2),e("div",{class:n([a(o).searchSection,a(o).glassPanel])},[e("div",{class:n(a(o).searchContainer)},[e("div",{class:n(a(o).searchInputWrapper)},[ve(e("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>ne.value=p),type:"text",class:n(a(o).searchInput),placeholder:T.value,onInput:it,onFocus:jt,onBlur:St},null,42,li),[[At,ne.value]]),ne.value?(_(),f("button",{key:0,class:n(a(o).clearSearch),onClick:ct},d[12]||(d[12]=[e("span",null,"×",-1)]),2)):q("",!0)],2),e("div",{class:n(a(o).searchActions)},[e("button",{class:n(a(o).btnFilter),title:"Advanced Filters"},d[13]||(d[13]=[e("span",null,"Filters",-1)]),2),e("button",{class:n(a(o).btnRefresh),onClick:J,title:"Refresh Data"},d[14]||(d[14]=[e("span",null,"⟳",-1)]),2)],2)],2)],2),e("div",{class:n([a(o).tableContainer,a(o).glassPanel])},[O.value?(_(),f("div",{key:0,class:n(a(o).loadingState)},[e("div",{class:n(a(o).loadingContainer)},[e("div",{class:n(a(o).loadingSpinnerEnhanced)},[e("div",{class:n([a(o).spinnerRing,a(o).ring1])},null,2),e("div",{class:n([a(o).spinnerRing,a(o).ring2])},null,2),e("div",{class:n(a(o).loadingCore)},[e("div",{class:n(a(o).coreDot)},null,2)],2)],2),e("div",{class:n(a(o).loadingDots)},[e("span",{class:n([a(o).dot,a(o).dot1])},null,2),e("span",{class:n([a(o).dot,a(o).dot2])},null,2),e("span",{class:n([a(o).dot,a(o).dot3])},null,2)],2)],2),e("p",{class:n(a(o).loadingText)},t(k.value),3),e("div",{class:n(a(o).loadingProgress)},[e("div",{class:n(a(o).progressBar)},null,2)],2)],2)):W.value.length===0?(_(),f("div",{key:1,class:n(a(o).emptyState)},[e("div",{class:n(a(o).emptyIcon)},"📋",2),e("h3",null,t(M.value),1),e("p",null,t(A.value),1)],2)):!O.value&&W.value.length>0?(_(),f("div",{key:2,class:n(a(o).modernTableWrapper)},[e("table",{class:n(a(o).modernTable)},[e("thead",null,[e("tr",{class:n(a(o).tableHeader)},[e("th",{class:n(a(o).thActions)},t(I.value.actions),3),e("th",{class:n(a(o).thCode)},t(I.value.code),3),e("th",{class:n(a(o).thRequestedBy)},t(I.value.requestedBy),3),e("th",{class:n(a(o).thDescription)},t(I.value.description),3),e("th",{class:n(a(o).thRequestDate)},t(I.value.requestDate),3),e("th",{class:n(a(o).thTransactionDate)},t(I.value.transactionDate),3),e("th",{class:n(a(o).thTrack)},t(I.value.track),3),e("th",{class:n(a(o).thStatus)},t(I.value.status),3),e("th",{class:n(a(o).thAttachments)},t(I.value.attachments),3)],2)]),e("tbody",null,[(_(!0),f(ee,null,ke(W.value,p=>(_(),f("tr",{key:p.transaction_id,class:n([a(o).tableRow,ot(p.status)]),onMouseenter:Dt},[e("td",{class:n(a(o).tdActions)},[e("div",{class:n(a(o).actionButtonsGroup)},[e("button",{class:n([a(o).actionBtn,a(o).editBtn,{[a(o).disabled]:!X(p)}]),onClick:re=>X(p)?ft(p):null,disabled:!X(p),title:X(p)?"Edit":"Cannot edit after submission"},[V(a(Nt),{size:16})],10,ri),e("button",{class:n([a(o).actionBtn,a(o).deleteBtn,{[a(o).disabled]:!X(p)}]),onClick:re=>X(p)?ht(p):null,disabled:!X(p),title:X(p)?"Delete":"Cannot delete after submission"},[V(a(Lt),{size:16})],10,ii),Re(p)?(_(),f("button",{key:0,class:n([a(o).actionBtn,a(o).rejectionIconBtn]),onClick:re=>kt(p),title:g.value?"عرض سبب الرفض":"View rejection reason"},[e("span",{class:n(a(o).rejectionIconSmall)},"⚠",2)],10,ci)):q("",!0)],2)],2),e("td",{class:n(a(o).tdCode)},[V(N,{to:nt(p),class:n(a(o).codeLink),onClick:re=>rt(p)},{default:Ye(()=>[Et(t(p.code),1)]),_:2},1032,["to","class","onClick"])],2),e("td",{class:n(a(o).tdRequestedBy)},t(p.requested_by),3),e("td",{class:n(a(o).tdDescription)},[e("button",{class:n(a(o).descriptionBtn),onClick:re=>mt(p),title:"View full description"},[V(a(It),{size:16})],10,ui)],2),e("td",{class:n(a(o).tdRequestDate)},t(tt(p.request_date)),3),e("td",{class:n(a(o).tdTransactionDate)},t(p.transaction_date),3),e("td",{class:n(a(o).tdTrack)},[e("button",{class:n(a(o).trackBtn),onClick:d[1]||(d[1]=re=>$t())},"Track",2)],2),e("td",{class:n(a(o).tdStatus)},[e("span",{class:n([a(o).statusBadge,st(p.status)]),onClick:re=>yt(p),role:"button"},t(p.status),11,di)],2),e("td",{class:n(a(o).tdAttachments)},[e("button",{class:n(a(o).attachmentBtn),onClick:re=>gt(p),title:lt(p)}," Attachments ",10,vi)],2)],34))),128))])],2)],2)):q("",!0)],2),!O.value&&W.value.length>0?(_(),f("div",{key:0,class:n([a(o).paginationWrapper,a(o).glassPanel])},[e("div",{class:n(a(o).paginationInfo)},[e("span",{class:n(a(o).paginationText)},t(z.value),3),e("div",{class:n(a(o).itemsPerPage)},null,2)],2),e("div",{class:n(a(o).paginationControls)},[e("button",{class:n([a(o).paginationBtn,a(o).paginationBtnFirst]),onClick:vt,disabled:B.value===1,title:"First Page"}," ⟪ ",10,pi),e("button",{class:n([a(o).paginationBtn,a(o).paginationBtnPrev]),onClick:dt,disabled:B.value===1,title:"Previous Page"}," ⟨ ",10,_i),e("div",{class:n(a(o).pageNumbers)},[(_(!0),f(ee,null,ke(et.value,p=>(_(),f("button",{key:p,class:n([a(o).paginationBtn,a(o).pageNumber,{[a(o).active]:p===B.value,[a(o).ellipsis]:p===-1}]),onClick:re=>_t(p),disabled:p===-1},t(p===-1?"...":p),11,mi))),128))],2),e("button",{class:n([a(o).paginationBtn,a(o).paginationBtnNext]),onClick:ut,disabled:B.value>=ce.value,title:"Next Page"}," ⟩ ",10,fi),e("button",{class:n([a(o).paginationBtn,a(o).paginationBtnLast]),onClick:pt,disabled:B.value>=ce.value,title:"Last Page"}," ⟫ ",10,hi)],2)],2)):q("",!0),(_(),Fe(We(S.value),{modelValue:oe.value,"onUpdate:modelValue":d[2]||(d[2]=p=>oe.value=p),onSubmit:wt},null,40,["modelValue"])),(_(),Fe(We(s.value),{modelValue:we.value,"onUpdate:modelValue":d[3]||(d[3]=p=>we.value=p),"contract-data":Ve.value,onSubmit:Pt},null,40,["modelValue","contract-data"])),V(Cs,{show:Pe.value,"onUpdate:show":d[4]||(d[4]=p=>Pe.value=p),transactionId:Ne.value,status:Le.value,onFilesUpdated:Tt},null,8,["show","transactionId","status"]),V(sn,{modelValue:Te.value,"onUpdate:modelValue":d[5]||(d[5]=p=>Te.value=p),"approval-data":Oe.value},null,8,["modelValue","approval-data"]),V(Tn,{modelValue:Ue.value,"onUpdate:modelValue":d[6]||(d[6]=p=>Ue.value=p),transactionId:Xe.value},null,8,["modelValue","transactionId"]),V(An,{modelValue:je.value,"onUpdate:modelValue":d[7]||(d[7]=p=>je.value=p)},null,8,["modelValue"]),V(ue,{modelValue:Se.value,"onUpdate:modelValue":d[8]||(d[8]=p=>Se.value=p),type:ze.value,message:Je.value,timer:3e3},null,8,["modelValue","type","message"]),be.value?(_(),f("div",{key:1,class:n(a(o).modalOverlay),onClick:Be},[e("div",{class:n([a(o).modalContainer,a(o).deleteModal]),onClick:d[9]||(d[9]=U(()=>{},["stop"]))},[e("div",{class:n(a(o).modalHeader)},[e("h3",null,t(E.value),1),e("button",{class:n(a(o).closeModal),onClick:Be},"×",2)],2),e("div",{class:n(a(o).modalBody)},[e("p",null,t(x.value),1)],2),e("div",{class:n(a(o).modalFooter)},[e("button",{class:n(a(o).btnSecondary),onClick:Be},t(P.value),3),e("button",{class:n(a(o).btnDanger),onClick:bt},t(m.value),3)],2)],2)],2)):q("",!0),le.value?(_(),f("div",{key:2,class:n(a(o).modalOverlay),onClick:Me},[e("div",{class:n([a(o).modalContainer,a(o).descModal]),onClick:d[10]||(d[10]=U(()=>{},["stop"]))},[e("div",{class:n(a(o).modalHeader)},[e("h3",null,t(b.value),1),e("button",{class:n(a(o).closeModal),onClick:Me},"×",2)],2),e("div",{class:n(a(o).modalBody)},[e("div",{class:n(a(o).descriptionContent),innerHTML:at(qe.value)},null,10,bi)],2),e("div",{class:n(a(o).modalFooter)},[e("button",{class:n(a(o).btnSecondary),onClick:Me},t(D.value),3)],2)],2)],2)):q("",!0),(_(),Fe(xt,{to:"body"},[ge.value?(_(),f("div",{key:0,class:n(a(o).rejectionPopupOverlay),onClick:Ae},[e("div",{class:n(a(o).rejectionPopupContainer),onClick:d[11]||(d[11]=U(()=>{},["stop"]))},[e("div",{class:n(a(o).rejectionPopupHeader)},[e("div",{class:n(a(o).rejectionPopupTitle)},[e("span",{class:n(a(o).rejectionPopupIcon)},"⚠",2),e("h3",null,t(g.value?"سبب الرفض":"Rejection Reason"),1)],2),e("button",{class:n(a(o).rejectionPopupClose),onClick:Ae},d[15]||(d[15]=[e("span",null,"×",-1)]),2)],2),e("div",{class:n(a(o).rejectionPopupBody)},[ye.value?(_(),f("div",{key:0,class:n(a(o).rejectionDetails)},[e("div",{class:n(a(o).rejectionMeta)},[e("span",{class:n(a(o).metaLabel)},t(g.value?"رقم المعاملة:":"Transaction:"),3),e("span",{class:n(a(o).metaValue)},t(ye.value.code),3)],2),e("div",{class:n(a(o).rejectionReasonContent)},[e("p",{class:n(a(o).reasonLabel)},t(g.value?"السبب:":"Reason:"),3),e("div",{class:n(a(o).reasonTextContainer)},[e("p",{class:n(a(o).reasonTextFull)},t($e.value),3)],2)],2)],2)):q("",!0)],2),e("div",{class:n(a(o).rejectionPopupFooter)},[e("button",{class:n(a(o).btnPopupClose),onClick:Ae},t(g.value?"إغلاق":"Close"),3)],2)],2)],2)):q("",!0)]))],10,si)}}});export{wi as default};
