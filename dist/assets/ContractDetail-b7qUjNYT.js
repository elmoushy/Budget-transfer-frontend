import{a as g,x as y,_ as qe,J as xe,q as Ie,u as Me,r as i,y as S,w as he,o as Pe,e as v,s as _,f as a,h as fe,G as be,t as r,n as m,i as N,F as V,C as q,b as x,v as ge,H as ye,m as Le,p as Oe}from"./index-BVpQjujX.js";import{a as me}from"./apiService-DINXhCER.js";import{F as Je}from"./FileUploadModal-C5MrJgsm.js";import{F as Ge}from"./FuturisticPopup-DxKtzys7.js";import"./TransferService-COXi858y.js";import"./check-BTRxuJE8.js";const w="https://lightidea.org:9000/",We="/api/budget/transfers/list/",He=6,T={async fetchContracts(u="",c=1){const s=g();if(!s.token)throw new Error("Authentication token not found");const p={page:c.toString(),page_size:He.toString()},E={Authorization:`Bearer ${s.token}`,Accept:"application/json","Content-Type":"application/json"},f=u.trim()?{code:"FAD",search:u.trim()}:{code:"FAD"};try{return(await y.post(`${w}${We}`,f,{params:p,headers:E})).data}catch(d){throw console.error("Error fetching contracts:",d),d}},async deleteContract(u){const c=g();if(!c.token)throw new Error("Authentication token not found");try{return(await y.delete(`${w}/api/budget/transfers/${u}/delete/`,{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json"}})).data}catch(s){throw console.error("Error deleting contract:",s),s}},async getContractDetails(u){const c=g();try{return(await y.get(`${w}/api/adjd-transfers/?transaction=${u}`,{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json"}})).data}catch(s){throw console.error("Error fetching contract details:",s),s}},async submitContractRequest(u){const c=g();try{return(await y.post(`${w}/api/budget/transfers/${u}/submit/`,{},{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json","Content-Type":"application/json"}})).data}catch(s){throw console.error("Error submitting contract request:",s),s}},async reopenContractRequest(u){const c=g();try{return(await y.post(`${w}/api/budget/transfers/${u}/reopen/`,{},{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json","Content-Type":"application/json"}})).data}catch(s){throw console.error("Error reopening contract request:",s),s}},async generateReport(u){const c=g();try{return(await y.get(`${w}/api/budget/transfers/${u}/report/`,{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json"}})).data}catch(s){throw console.error("Error generating report:",s),s}},async createContract(u){const c=g();try{return(await y.post(`${w}/api/adjd-transfers/create/`,u,{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json","Content-Type":"application/json"}})).data}catch(s){throw console.error("Error creating contract:",s),s}},async uploadFile(u,c){const s=g();try{const p=new FormData;return p.append("file",u),(await y.post(`${w}/api/budget/transfers/${c}/files/upload/`,p,{headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json","Content-Type":"multipart/form-data"}})).data}catch(p){throw console.error("Error uploading file:",p),p}},async listFiles(u){const c=g();try{return(await y.get(`${w}/api/budget/transfers/${u}/files/`,{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json"}})).data}catch(s){throw console.error("Error listing files:",s),s}},async downloadFile(u){const c=g();try{return(await y.get(`${w}/api/budget/transfers/files/${u}/download/`,{headers:{Authorization:`Bearer ${c.token}`},responseType:"blob"})).data}catch(s){throw console.error("Error downloading file:",s),s}},async uploadExcelFile(u,c){const s=g(),p=new FormData;p.append("file",u);try{return(await y.post(`${w}/api/budget/transfers/${c}/excel/upload/`,p,{headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json","Content-Type":"multipart/form-data"}})).data}catch(E){throw console.error("Error uploading Excel file:",E),E}},async getPivotFundDetails(u,c){const s=g();try{return(await y.get(`${w}/api/accounts-entities/pivot-funds/getdetail/`,{params:{entity_id:u,account_id:c},headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json"}})).data}catch(p){throw console.error("Error fetching pivot fund details:",p),p}},getContracts(u){const c=g();return y.get(`${w}/api/budget/transfers/${u}/`,{headers:{Authorization:`Bearer ${c.token}`,Accept:"application/json"}})}},Ke={class:"page-header"},Ze={key:0,class:"balance-error-message"},Xe={class:"error-text"},Ye={class:"header-actions"},Qe={class:"transaction-info"},et={class:"transaction-label"},tt={class:"transaction-id"},at=["disabled"],ot={key:0,class:"loading-container"},nt={key:1,class:"error-container"},rt={key:2,class:"data-container"},st={class:"card-container table-container"},lt={class:"transfer-table"},ct={class:"action-column"},ut=["onClick","disabled"],it=["onClick"],dt={key:1,class:"validation-success-indicator"},pt={class:"number-cell"},vt=["onUpdate:modelValue","onInput","placeholder","readonly"],_t={class:"number-cell"},ht=["onUpdate:modelValue","onInput","placeholder","readonly"],ft={class:"number-cell"},bt={class:"name-display"},gt={class:"number-cell"},yt={class:"name-display"},mt={class:"number-cell"},wt={class:"name-display"},Ct={class:"number-cell"},Ft={class:"name-display"},St={class:"name-display"},At=["onUpdate:modelValue","onChange","disabled"],kt={value:""},Et=["value"],$t={class:"name-display"},Bt=["onUpdate:modelValue","onChange","disabled"],Rt={value:""},Dt=["value"],jt={class:"summary-row"},Nt={class:"number-cell"},Tt={class:"number-cell"},Ut={class:"number-cell"},zt={class:"number-cell"},Vt={class:"number-cell"},qt={class:"number-cell"},xt={colspan:"4",class:"summary-label"},It={colspan:"11",class:"add-row-cell"},Mt=["disabled"],Pt={class:"total-info"},Lt={class:"action-buttons"},Ot=["disabled"],Jt=["disabled"],Gt=["disabled"],Wt={class:"error-modal-header"},Ht={class:"error-modal-body"},Kt={class:"error-list"},Zt={__name:"ContractDetail",setup(u){const c=xe(),s=Ie(),p=Me(),E=g(),f=i(null),d=i([]),I=i(!0),M=i(!1);i(null),i(null);const P=i([]),W=i(!1),H=i(!1),L=i([]),K=i(!1),Z=i(!1),R=i([]),C=i(!1),$=i(null),b=i("not yet sent for approval"),X=S(()=>d.value.some(e=>e.validation_errors&&e.validation_errors.length>0)),F=S(()=>b.value==="is rejected"||b.value==="not yet sent for approval"),Y=S(()=>(b.value==="is rejected"||b.value==="not yet sent for approval")&&C.value),Q=S(()=>$.value&&$.value.balanced===!1||X.value?!1:b.value==="not yet sent for approval"),ee=S(()=>$.value&&$.value.balanced===!1||X.value?!1:b.value==="is rejected"),te=S(()=>b.value==="is rejected"||b.value==="not yet sent for approval"),we=S(()=>{const e=b.value;if(n.value)switch(e){case"approved":return"Ù…Ø¹ØªÙ…Ø¯";case"is rejected":return"Ù…Ø±ÙÙˆØ¶";case"watting for approval":return"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©";case"not yet sent for approval":return"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø©";default:return e}else switch(e){case"watting for approval":return"Waiting for approval";default:return e.charAt(0).toUpperCase()+e.slice(1)}}),Ce=S(()=>{switch(b.value){case"approved":return"status-approved";case"is rejected":return"status-rejected";case"watting for approval":return"status-waiting";case"not yet sent for approval":return"status-not-sent";default:return""}}),Fe=S(()=>p.darkMode),n=S(()=>p.language==="ar"),Se=S(()=>p.language==="ar"),D=S(()=>{const e=d.value;return{toSum:e.reduce((o,t)=>o+(parseFloat(t.to_center)||0),0),fromSum:e.reduce((o,t)=>o+(parseFloat(t.from_center)||0),0),encumbranceSum:e.reduce((o,t)=>o+(parseFloat(t.encumbrance)||0),0),availableBudgetSum:e.reduce((o,t)=>o+(parseFloat(t.available_budget)||0),0),actualSum:e.reduce((o,t)=>o+(parseFloat(t.actual)||0),0),approvedBudgetSum:e.reduce((o,t)=>o+(parseFloat(t.approved_budget)||0),0)}}),ae=async()=>{W.value=!0,H.value=!1;try{const e=await me.accountEntities.getEntities();e.data&&(P.value=e.data)}catch(e){console.error("Failed to fetch cost center entities:",e),H.value=!0}finally{W.value=!1}},oe=async()=>{K.value=!0,Z.value=!1;try{const e=await me.accountEntities.getAccounts();e.data&&e.data.data&&(L.value=e.data.data)}catch(e){console.error("Failed to fetch account entities:",e),Z.value=!0}finally{K.value=!1}},ne=e=>{if(!e)return"";const o=P.value.find(t=>t.entity===e);return o?o.alias_default:""},Ae=(e,o)=>{const t=o.target.value;e.cost_center_code=t,e.cost_center_name=ne(t),e.lastChangedField="cost_center_code",ie(e),U()},re=e=>{if(!e)return"";const o=L.value.find(t=>t.account===e);return o?o.alias_default:""},ke=(e,o)=>{const t=o.target.value;e.account_code=t,e.account_name=re(t),e.lastChangedField="account_code",ie(e),U()},se=(e,o)=>{const t=`${o}_input`,h=e[t];if(!h){e[o]=null;return}const l=h.replace(/[^\d.-]/g,"").replace(/--/g,"-").replace(/\.+/g,".");/^-?\d*\.?\d*$/.test(l)?(e[t]=l,e[o]=parseFloat(l)||0):e[t]=e[o]?e[o].toString():"",U()},Ee=()=>{d.value.forEach(e=>{e.to_center_input=e.to_center!==null?e.to_center.toString():"",e.from_center_input=e.from_center!==null?e.from_center.toString():"",e.encumbrance_input=e.encumbrance!==null?e.encumbrance.toString():"",e.available_budget_input=e.available_budget!==null?e.available_budget.toString():"",e.actual_input=e.actual!==null?e.actual.toString():"",e.approved_budget_input=e.approved_budget!==null?e.approved_budget.toString():""})},le=()=>{const e={transaction:f.value,cost_center_code:"",cost_center_name:"",account_code:"",account_name:"",approved_budget:0,available_budget:0,from_center:0,from_center_input:"",to_center:0,to_center_input:"",encumbrance:0,actual:0,done:1,financialDataFromApi:!1,lastChangedField:null};d.value.push(e),C.value=!0},A=(e,o="info",t=null)=>{let h="";return o==="success"?h=n.value?"Ù†Ø¬Ø§Ø­!":"Success!":o==="error"?h=n.value?"Ø®Ø·Ø£!":"Error!":o==="warning"?h=n.value?"ØªØ­Ø°ÙŠØ±!":"Warning!":h=n.value?"ØªÙ†Ø¨ÙŠÙ‡!":"Notice!",de.value=o,pe.value=h,ve.value=e,_e.value=t||(o==="success"?3e3:0),G.value=!0,new Promise(l=>{z.value=()=>{l({dismiss:"close"})}})},$e=()=>{z.value&&(z.value(),z.value=null)},Be=async()=>{try{const e=d.value.filter(t=>t.cost_center_code&&t.account_code);if(!e.length){A(n.value?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„":"No valid rows to send","warning");return}const o=e.map(t=>({transaction:f.value,cost_center_code:t.cost_center_code,cost_center_name:t.cost_center_name,account_code:t.account_code,account_name:t.account_name,approved_budget:parseFloat(t.approved_budget)||0,available_budget:parseFloat(t.available_budget)||0,from_center:parseFloat(t.from_center)||0,to_center:parseFloat(t.to_center)||0,encumbrance:parseFloat(t.encumbrance)||0,actual:parseFloat(t.actual)||0,done:1}));await T.createContract(o,E.token),await A(n.value?"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø¯ Ø¨Ù†Ø¬Ø§Ø­":"Contract created successfully","success"),await j(),C.value=!1,R.value=JSON.parse(JSON.stringify(d.value))}catch(e){A(n.value?"ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø¯":"Failed to create contract","error"),console.error("Error creating contract:",e)}},Re=e=>{d.value.length>1?(d.value.splice(e,1),C.value=!0):A(n.value?"ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ ØµÙ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„":"At least one row must exist","warning")},U=()=>{if(!R.value||R.value.length===0){C.value=d.value.length>0;return}if(R.value.length!==d.value.length){C.value=!0;return}for(let e=0;e<d.value.length;e++){const o=d.value[e];if(!o.contract_id){C.value=!0;return}const t=R.value.find(B=>B.contract_id===o.contract_id);if(!t){C.value=!0;return}const h=["approved_budget","available_budget","from_center","to_center","encumbrance","actual"];for(const B of h)if(parseFloat(t[B]||0)!==parseFloat(o[B]||0)){C.value=!0;return}const l=["cost_center_code","cost_center_name","account_code","account_name"];for(const B of l)if(t[B]!==o[B]){C.value=!0;return}}C.value=!1};he(()=>d.value,()=>{U()},{deep:!0});const j=async()=>{I.value=!0,M.value=!1;try{const e=await T.getContractDetails(f.value);e&&e.summary?($.value=e.summary,e.summary.status?b.value=e.summary.status:e.status&&e.status.status?b.value=e.status.status:b.value="not yet sent for approval",d.value=e.transfers||[]):(d.value=e,$.value=null,b.value="not yet sent for approval"),Ee(),R.value=JSON.parse(JSON.stringify(d.value)),C.value=!1}catch(e){M.value=!0,console.error("Failed to load contract data:",e)}finally{I.value=!1}},k=e=>e==null?null:new Intl.NumberFormat(n.value?"ar-SA":"en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),De=async()=>{try{await T.submitContractRequest(f.value),await A(n.value?"ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­":"Request submitted successfully","success"),s.push("/contracts")}catch{A(n.value?"ÙØ´Ù„ ÙÙŠ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨":"Failed to submit request","error")}},je=async()=>{try{await T.reopenContractRequest(f.value),await A(n.value?"ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­":"Request reopened successfully","success"),await j()}catch{A(n.value?"ÙØ´Ù„ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ø·Ù„Ø¨":"Failed to reopen request","error")}},Ne=async()=>{try{const e=await T.generateReport(f.value),o=window.URL.createObjectURL(e),t=document.createElement("a");t.href=o,t.setAttribute("download",`contract-report-${f.value}.pdf`),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(o),A(n.value?"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­":"Report generated successfully","success",3e3)}catch{A(n.value?"ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±":"Failed to generate report","error")}};he(()=>c.params.id,e=>{e&&(f.value=parseInt(e,10),j())},{immediate:!0}),Pe(()=>{f.value=parseInt(c.params.id,10),f.value?(j(),ae(),oe()):(d.value=[],le(),ae(),oe())});const O=i(!1),ce=i([]),Te=e=>{ce.value=e,O.value=!0},ue=()=>{O.value=!1},J=i(!1),Ue=()=>{J.value=!0},ze=()=>{J.value=!1},Ve=()=>{j()},ie=async e=>{if(!(!e.cost_center_code||!e.account_code))try{const o=await T.getPivotFundDetails(e.cost_center_code,e.account_code);if(o&&o.data){const t=o.data;e.actual=parseFloat(t.actual)||0,e.available_budget=parseFloat(t.fund)||0,e.approved_budget=parseFloat(t.budget)||0,e.encumbrance=parseFloat(t.encumbrance)||0,e.financialDataFromApi=!0,U()}}catch(o){o.response&&o.response.status===404?(A(n.value?`Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯ÙŠØ¯. Ø§Ù„Ù…Ø±ÙƒØ²: ${e.cost_center_code}, Ø§Ù„Ø­Ø³Ø§Ø¨: ${e.account_code}`:`This doesn't have data for Cost Center: ${e.cost_center_code}, Account: ${e.account_code}`,"warning"),e.lastChangedField==="account_code"?(e.account_code="",e.account_name=""):(e.cost_center_code="",e.cost_center_name=""),e.actual=0,e.available_budget=0,e.approved_budget=0,e.encumbrance=0,e.financialDataFromApi=!1):console.error("Failed to fetch pivot fund details:",o)}},G=i(!1),de=i("success"),pe=i(""),ve=i(""),_e=i(0),z=i(null);return(e,o)=>(_(),v("div",{class:m(["contract-request-page",{"dark-mode":Fe.value,rtl:Se.value}])},[a("div",Ke,[$.value&&!$.value.balanced?(_(),v("div",Ze,[o[2]||(o[2]=a("div",{class:"error-icon"},"!",-1)),a("span",Xe,r(n.value?"Ø§Ù„Ù…ÙŠØ²Ø§Ù† ØºÙŠØ± Ù…ØªÙˆØ§Ø²Ù†. ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚ÙŠÙ… Ø§Ù„Ø¹Ù‚Ø¯.":"Unbalanced contract. Please review your contract values."),1)])):fe("",!0),a("div",Ye,[a("div",Qe,[a("span",et,r(n.value?"Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©:":"Transaction ID:"),1),a("span",tt,r(f.value),1),a("span",{class:m(["status-indicator",Ce.value])},r(we.value),3)]),a("button",{class:m(["btn-header-create",{"btn-disabled":!Y.value}]),onClick:Be,disabled:!Y.value},[o[3]||(o[3]=a("span",{class:"btn-icon"},"âœ“",-1)),N(" "+r(n.value?"Ø­ÙØ¸":"Save"),1)],10,at)])]),I.value?(_(),v("div",ot,[o[4]||(o[4]=a("div",{class:"loading-spinner"},null,-1)),a("p",null,r(n.value?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...":"Loading..."),1)])):M.value?(_(),v("div",nt,[o[5]||(o[5]=a("div",{class:"error-icon"},"!",-1)),a("p",null,r(n.value?"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª":"Error loading data"),1),a("button",{class:"btn-retry",onClick:j},r(n.value?"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©":"Retry"),1)])):(_(),v("div",rt,[a("div",st,[a("table",lt,[a("thead",null,[a("tr",null,[o[6]||(o[6]=a("th",{class:"action-column"},null,-1)),a("th",null,r(n.value?"Ø¥Ù„Ù‰":"To"),1),a("th",null,r(n.value?"Ù…Ù†":"From"),1),a("th",null,r(n.value?"Ø­Ù‚Ù‹Ø§ Ù…Ø§Ù„ÙŠÙ‹Ø§":"Encumbrance"),1),a("th",null,r(n.value?"Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©":"Available Budget"),1),a("th",null,r(n.value?"Ø§Ù„Ø­Ø§Ù„Ù‰":"Actual"),1),a("th",null,r(n.value?"Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©":"Approved Budget"),1),a("th",null,r(n.value?"Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨":"Account Name"),1),a("th",null,r(n.value?"Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨":"Account Code"),1),a("th",null,r(n.value?"Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯":"Cost Center Name"),1),a("th",null,r(n.value?"Ø±Ù‚Ù… Ø§Ù„Ø¨Ù†Ø¯":"Cost Center Code"),1)])]),a("tbody",null,[(_(!0),v(V,null,q(d.value,(t,h)=>(_(),v("tr",{key:t.contract_id||h,class:m(["data-row",{"row-error":t.validation_errors&&t.validation_errors.length>0,"row-valid":!t.validation_errors||t.validation_errors.length===0}])},[a("td",ct,[a("button",{class:m(["btn-delete-row",{"btn-disabled":!F.value}]),onClick:l=>Re(h),title:"Delete Row",disabled:!F.value},o[7]||(o[7]=[a("span",{class:"delete-icon"},"Ã—",-1)]),10,ut),t.validation_errors&&t.validation_errors.length>0?(_(),v("div",{key:0,class:"validation-error-indicator",onClick:l=>Te(t.validation_errors)},o[8]||(o[8]=[a("span",{class:"error-icon-small"},"!",-1)]),8,it)):(_(),v("div",dt,o[9]||(o[9]=[a("span",{class:"success-icon-small"},"âœ“",-1)])))]),a("td",pt,[x(a("input",{type:"text","onUpdate:modelValue":l=>t.to_center_input=l,class:m(["number-input",{"readonly-input":!F.value}]),onInput:l=>se(t,"to_center"),placeholder:n.value?"Ø¥Ù„Ù‰":"To",readonly:!F.value},null,42,vt),[[ge,t.to_center_input]])]),a("td",_t,[x(a("input",{type:"text","onUpdate:modelValue":l=>t.from_center_input=l,class:m(["number-input",{"readonly-input":!F.value}]),onInput:l=>se(t,"from_center"),placeholder:n.value?"Ù…Ù†":"From",readonly:!F.value},null,42,ht),[[ge,t.from_center_input]])]),a("td",ft,[a("div",bt,r(k(t.encumbrance)||"-"),1)]),a("td",gt,[a("div",yt,r(k(t.available_budget)||"-"),1)]),a("td",mt,[a("div",wt,r(k(t.actual)||"-"),1)]),a("td",Ct,[a("div",Ft,r(k(t.approved_budget)||"-"),1)]),a("td",St,r(t.account_name||re(t.account_code)||"-"),1),a("td",null,[x(a("select",{"onUpdate:modelValue":l=>t.account_code=l,class:m(["account-select",{"readonly-input":!F.value}]),onChange:l=>ke(t,l),disabled:!F.value},[a("option",kt,r(n.value?"Ø§Ø®ØªØ± Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨":"Select Account"),1),(_(!0),v(V,null,q(L.value,l=>(_(),v("option",{key:l.account,value:l.account},r(l.account),9,Et))),128))],42,At),[[ye,t.account_code]])]),a("td",$t,r(t.cost_center_name||ne(t.cost_center_code)||"-"),1),a("td",null,[x(a("select",{"onUpdate:modelValue":l=>t.cost_center_code=l,class:m(["cost-center-select",{"readonly-input":!F.value}]),onChange:l=>Ae(t,l),disabled:!F.value},[a("option",Rt,r(n.value?"Ø§Ø®ØªØ± Ø±Ù‚Ù… Ø§Ù„Ø¨Ù†Ø¯":"Select Cost Center"),1),(_(!0),v(V,null,q(P.value,l=>(_(),v("option",{key:l.entity,value:l.entity},r(l.entity),9,Dt))),128))],42,Bt),[[ye,t.cost_center_code]])])],2))),128))]),a("tfoot",null,[a("tr",jt,[o[10]||(o[10]=a("td",null,null,-1)),a("td",Nt,r(k(D.value.toSum)||"-"),1),a("td",Tt,r(k(D.value.fromSum)||"-"),1),a("td",Ut,r(k(D.value.encumbranceSum)||"-"),1),a("td",zt,r(k(D.value.availableBudgetSum)||"-"),1),a("td",Vt,r(k(D.value.actualSum)||"-"),1),a("td",qt,r(k(D.value.approvedBudgetSum)||"-"),1),a("td",xt,r(n.value?"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ":"Overall Sum"),1)]),a("tr",null,[a("td",It,[a("button",{class:m(["btn-add-row",{"btn-disabled":!F.value}]),onClick:le,disabled:!F.value},[o[11]||(o[11]=a("span",{class:"add-icon"},"+",-1)),N(" "+r(n.value?"Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯":"Add New Row"),1)],10,Mt)])])])])]),a("div",Pt,r(n.value?`Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ ${d.value.length}`:`Total ${d.value.length}`),1),a("div",Lt,[a("button",{class:m(["btn-action btn-submit",{"btn-disabled":!Q.value}]),onClick:De,disabled:!Q.value},[o[12]||(o[12]=a("span",{class:"btn-icon"},"â†’",-1)),N(" "+r(n.value?"ØªÙ‚Ø¯ÙŠÙ…":"Submit"),1)],10,Ot),a("button",{class:m(["btn-action btn-upload",{"btn-disabled":!te.value}]),onClick:Ue,disabled:!te.value},[o[13]||(o[13]=a("span",{class:"btn-icon"},"â†‘",-1)),N(" "+r(n.value?"Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ø¹Ù‚Ø¯":"Upload Contract File"),1)],10,Jt),a("button",{class:m(["btn-action btn-reopen",{"btn-disabled":!ee.value}]),onClick:je,disabled:!ee.value},[o[14]||(o[14]=a("span",{class:"btn-icon"},"â†»",-1)),N(" "+r(n.value?"Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ø·Ù„Ø¨":"Re-open Request"),1)],10,Gt),a("button",{class:"btn-action btn-report",onClick:Ne},[o[15]||(o[15]=a("span",{class:"btn-icon"},"ğŸ“„",-1)),N(" "+r(n.value?"ØªÙ‚Ø±ÙŠØ±":"Report"),1)])]),be(Je,{show:J.value,"is-arabic":n.value,"transaction-id":f.value,"auth-token":Le(E).token,onClose:ze,onUploadSuccess:Ve},null,8,["show","is-arabic","transaction-id","auth-token"])])),O.value?(_(),v("div",{key:3,class:"error-modal-overlay",onClick:ue},[a("div",{class:"error-modal-content",onClick:o[0]||(o[0]=Oe(()=>{},["stop"]))},[a("div",Wt,[a("h3",null,r(n.value?"Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚":"Validation Errors"),1),a("button",{class:"error-modal-close",onClick:ue},"Ã—")]),a("div",Ht,[a("ul",Kt,[(_(!0),v(V,null,q(ce.value,(t,h)=>(_(),v("li",{key:h},r(t),1))),128))])])])])):fe("",!0),be(Ge,{show:G.value,"onUpdate:show":o[1]||(o[1]=t=>G.value=t),type:de.value,title:pe.value,message:ve.value,timer:_e.value,showConfirmButton:!0,confirmButtonText:n.value?"Ù…ÙˆØ§ÙÙ‚":"OK",onConfirm:$e},null,8,["show","type","title","message","timer","confirmButtonText"])],2))}},oa=qe(Zt,[["__scopeId","data-v-0a389455"]]);export{oa as default};
