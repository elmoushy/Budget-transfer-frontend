import{d as Q,r as u,B as H,o as W,C as X,w as I,e as s,n as y,f as g,k as J,h as b,t as C,O as Y,V as Z,b as ee,v as te,a6 as x,m as L,F as oe,G as le,X as M,q as l,y as ae}from"./index-DwiZp2IY.js";const se={key:0,class:"value-text"},ne={key:1,class:"placeholder-text"},re={key:0,class:"search-container"},ie=["placeholder","onKeydown"],de={class:"options-container"},ce=["onClick","onMouseenter"],ue={key:0,class:"no-results"},pe=Q({__name:"SearchableDropdown",props:{modelValue:{},options:{default:()=>[]},placeholder:{default:"Select option..."},disabled:{type:Boolean,default:!1},isDarkMode:{type:Boolean,default:!1},isRtl:{type:Boolean,default:!1},searchPlaceholder:{default:"Search..."},noResultsText:{default:"No results found"}},emits:["update:modelValue","change"],setup(N,{emit:P}){const n=N,S=P,a=u(!1),r=u(""),i=u(-1),_=u(),B=u(),R=u(),D=u({}),V=H(()=>n.options.find(e=>e.value===n.modelValue)),p=H(()=>r.value?n.options.filter(e=>{const t=e.label||"",o=e.value||"";return typeof t=="string"&&t.toLowerCase().includes(r.value.toLowerCase())||o.toString().toLowerCase().includes(r.value.toLowerCase())}):n.options),F=()=>{n.disabled||(a.value?v():K())},K=async()=>{n.disabled||(a.value=!0,r.value="",i.value=-1,await M(),h(),_.value&&_.value.focus())},v=()=>{a.value=!1,r.value="",i.value=-1},E=e=>{S("update:modelValue",e.value),S("change",e.value),v()},U=()=>{p.value.length>0&&E(p.value[0])},A=()=>{i.value<p.value.length-1&&i.value++},G=()=>{i.value>0&&i.value--},h=()=>{if(!B.value||!R.value)return;const e=8,t=B.value.getBoundingClientRect(),o=window.innerWidth,d=window.innerHeight,m=R.value;m.style.maxHeight="";const j=m.offsetHeight,f=Math.min(j,d-e*2),k=Math.min(Math.max(t.width,260),o-e*2),z=d-t.bottom,q=t.top;let w=z>=f||z>=q?t.bottom+4:t.top-f-4;w<e&&(w=e),w+f>d-e&&(w=d-f-e);let c=t.left;n.isRtl&&(c=t.right-k),c+k>o-e&&(c=o-k-e),c<e&&(c=e),D.value={position:"fixed",left:n.isRtl?`${c}px`:`${c-50}px`,top:`${w}px`,width:`${k}px`,maxHeight:`${f}px`,zIndex:"999999",overflow:"hidden"}},O=e=>{const t=e.target;!t.closest(".searchable-dropdown")&&!t.closest(".dropdown-panel-portal")&&v()},T=()=>{a.value&&h()},$=()=>{a.value&&h()};return W(()=>{document.addEventListener("click",O),window.addEventListener("scroll",T,!0),window.addEventListener("resize",$)}),X(()=>{document.removeEventListener("click",O),window.removeEventListener("scroll",T,!0),window.removeEventListener("resize",$)}),I(a,e=>{e&&M(()=>{h()})}),I(r,()=>{M(()=>h())}),(e,t)=>(l(),s("div",{class:y(["searchable-dropdown",{"dark-mode":e.isDarkMode,rtl:e.isRtl,disabled:e.disabled}])},[g("div",{ref_key:"dropdownTrigger",ref:B,class:y(["dropdown-trigger",{active:a.value,disabled:e.disabled}]),onClick:F},[V.value?(l(),s("span",se,C(V.value.label||""),1)):(l(),s("span",ne,C(e.placeholder||"Select option..."),1)),(l(),s("svg",{class:y(["dropdown-icon",{rotated:a.value}]),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},t[1]||(t[1]=[g("polyline",{points:"6,9 12,15 18,9"},null,-1)]),2))],2),(l(),J(Y,{to:"body"},[a.value?(l(),s("div",{key:0,class:"dropdown-panel-portal",style:Z(D.value)},[g("div",{class:"dropdown-panel",ref_key:"panelRef",ref:R},[e.searchPlaceholder?(l(),s("div",re,[ee(g("input",{ref_key:"searchInput",ref:_,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),type:"text",class:"search-input",placeholder:e.searchPlaceholder,onKeydown:[x(v,["esc"]),x(L(U,["prevent"]),["enter"]),x(L(A,["prevent"]),["arrow-down"]),x(L(G,["prevent"]),["arrow-up"])]},null,40,ie),[[te,r.value]])])):b("",!0),g("div",de,[(l(!0),s(oe,null,le(p.value,(o,d)=>(l(),s("div",{key:o.value,class:y(["option-item",{selected:o.value===e.modelValue,highlighted:d===i.value}]),onClick:m=>E(o),onMouseenter:m=>i.value=d},C(o.label||""),43,ce))),128)),p.value.length===0?(l(),s("div",ue,C(e.noResultsText||"No results found"),1)):b("",!0)])],512)],4)):b("",!0)])),a.value?(l(),s("div",{key:0,class:"dropdown-backdrop",onClick:v})):b("",!0)],2))}}),fe=ae(pe,[["__scopeId","data-v-38908975"]]);export{fe as S};
