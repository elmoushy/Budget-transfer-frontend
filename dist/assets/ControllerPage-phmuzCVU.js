import{y as v,A as p,a as Q,d as H,u as G,z as J,r as d,o as W,e as c,f as e,h as g,k as X,t,n as y,i as b,F as D,D as T,p as $,b as F,I as Y,v as V,U as Z,m as ee,s as i,_ as se}from"./index-MpiCtzOB.js";const _=()=>{const r=Q();if(!r.token)throw new Error("Authentication token not found");return{Authorization:`Bearer ${r.token}`,Accept:"application/json","Content-Type":"application/json"}},S={async listCurrencies(){try{return(await v.get(`${p}/api/admin_panel/main-currencies/`,{headers:_()})).data.data}catch(r){throw console.error("Error fetching currencies:",r),r}},async createCurrency(r){try{return(await v.post(`${p}/api/admin_panel/main-currencies/create/`,r,{headers:_()})).data.data}catch(o){throw console.error("Error creating currency:",o),o}},async getCurrency(r){try{return(await v.get(`${p}/api/admin_panel/main-currencies/${r}/`,{headers:_()})).data.data}catch(o){throw console.error("Error fetching currency:",o),o}},async updateCurrency(r,o){try{return(await v.put(`${p}/api/admin_panel/main-currencies/${r}/update/`,o,{headers:_()})).data.data}catch(a){throw console.error("Error updating currency:",a),a}},async deleteCurrency(r){try{await v.delete(`${p}/api/admin_panel/main-currencies/${r}/delete/`,{headers:_()})}catch(o){throw console.error("Error deleting currency:",o),o}},async listRoutes(){try{return(await v.get(`${p}/api/admin_panel/main-routes/`,{headers:_()})).data.data}catch(r){throw console.error("Error fetching routes:",r),r}},async createRoute(r){try{return(await v.post(`${p}/api/admin_panel/main-routes/create/`,r,{headers:_()})).data.data}catch(o){throw console.error("Error creating route:",o),o}},async getRoute(r){try{return(await v.get(`${p}/api/admin_panel/main-routes/${r}/`,{headers:_()})).data.data}catch(o){throw console.error("Error fetching route:",o),o}},async updateRoute(r,o){try{return(await v.put(`${p}/api/admin_panel/main-routes/${r}/update/`,o,{headers:_()})).data.data}catch(a){throw console.error("Error updating route:",a),a}},async deleteRoute(r){try{await v.delete(`${p}/api/admin_panel/main-routes/${r}/delete/`,{headers:_()})}catch(o){throw console.error("Error deleting route:",o),o}}},ae=[{country:"United States",currency_name:"US Dollar",currency_icon:"$"},{country:"European Union",currency_name:"Euro",currency_icon:"€"},{country:"Saudi Arabia",currency_name:"Saudi Riyal",currency_icon:"﷼"},{country:"United Arab Emirates",currency_name:"UAE Dirham",currency_icon:"د.إ"},{country:"Egypt",currency_name:"Egyptian Pound",currency_icon:"E£"},{country:"India",currency_name:"Indian Rupee",currency_icon:"₹"},{country:"Kuwait",currency_name:"Kuwaiti Dinar",currency_icon:"د.ك"},{country:"Qatar",currency_name:"Qatari Riyal",currency_icon:"ر.ق"}],te={currencies:ae},ne=["dir"],oe={class:"page-header glass-panel"},re={class:"header-left"},ie={class:"page-title"},le={class:"page-subtitle"},ce={class:"tabs-container glass-panel"},ue={key:1,class:"tab-content"},de={class:"list-section glass-panel"},ve={class:"section-header"},pe={class:"section-title"},_e=["disabled"],me={key:0,class:"loading-state"},ye={class:"loading-container"},he={class:"loading-text"},fe={key:1,class:"items-grid"},ge={class:"item-header"},be={class:"item-icon"},Ce={class:"item-info"},ke={class:"item-name"},we={class:"item-meta"},Ee={class:"item-actions"},Re=["onClick","title"],$e={key:2,class:"empty-state"},Se={key:2,class:"tab-content"},Oe={class:"list-section glass-panel"},Ae={class:"section-header"},Me={class:"section-title"},xe=["disabled"],Ue={key:0,class:"loading-state"},De={class:"loading-container"},Te={class:"loading-text"},Fe={key:1,class:"items-grid"},Ie={class:"item-header"},Ne={class:"item-info"},Be={class:"item-name"},Ve={class:"item-meta"},Pe={class:"item-id"},Le={class:"item-actions"},qe=["onClick","title"],ze={key:2,class:"empty-state"},je={class:"modal-header"},Ke={class:"form-group"},Qe={value:"",disabled:""},He=["value"],Ge={key:0,class:"form-group preview-group"},Je={class:"currency-preview"},We={class:"preview-icon"},Xe={class:"preview-name"},Ye={class:"preview-country"},Ze={class:"modal-actions"},es=["disabled"],ss={class:"modal-header"},as={class:"form-group"},ts={class:"form-group"},ns={class:"modal-actions"},os={type:"submit",class:"btn-primary"},rs=H({__name:"ControllerPage",setup(r){const o=G(),a=J(()=>o.language==="ar"),I=d(te.currencies),h=d("currencies"),w=d(""),N=d(!1),O=d([]),C=d(!1);d(null);const l=d({}),A=d(!1),M=d([]),k=d(!1);d({english_name:"",arabic_name:""});const m=d({}),x=d(!1),f=(u,s=!0)=>{w.value=u,N.value=s,setTimeout(()=>{w.value=""},5e3)},U=async()=>{C.value=!0;try{O.value=await S.listCurrencies()}catch(u){console.error("Error loading currencies:",u),f(a.value?"فشل في تحميل العملات":"Failed to load currencies",!1)}finally{C.value=!1}},P=u=>{const s=I.value.find(n=>n.currency_name===u.name&&n.currency_icon===u.icon);l.value={...u,selectedOption:s||null},A.value=!0},L=()=>{l.value.selectedOption&&(l.value.name=l.value.selectedOption.currency_name,l.value.icon=l.value.selectedOption.currency_icon)},q=async()=>{try{if(l.value.id&&l.value.selectedOption){const u={name:l.value.selectedOption.currency_name,icon:l.value.selectedOption.currency_icon};await S.updateCurrency(l.value.id,u),f(a.value?"تم تحديث العملة بنجاح":"Currency updated successfully"),E(),U()}}catch(u){console.error("Error updating currency:",u),f(a.value?"فشل في تحديث العملة":"Failed to update currency",!1)}},E=()=>{A.value=!1,l.value={}},B=async()=>{k.value=!0;try{M.value=await S.listRoutes()}catch(u){console.error("Error loading routes:",u),f(a.value?"فشل في تحميل المسارات":"Failed to load routes",!1)}finally{k.value=!1}},z=u=>{m.value={...u},x.value=!0},j=async()=>{try{m.value.id&&(await S.updateRoute(m.value.id,m.value),f(a.value?"تم تحديث المسار بنجاح":"Route updated successfully"),R(),setTimeout(()=>{window.location.reload()},1e3))}catch(u){console.error("Error updating route:",u),f(a.value?"فشل في تحديث المسار":"Failed to update route",!1)}},R=()=>{x.value=!1,m.value={}};return W(()=>{U(),B()}),(u,s)=>(i(),c("div",{class:y(["unified-page controller-page",{"dark-theme":ee(o).darkMode}]),dir:a.value?"rtl":"ltr"},[s[20]||(s[20]=e("div",{class:"background-effects"},[e("div",{class:"floating-orb orb-1"}),e("div",{class:"floating-orb orb-2"})],-1)),e("div",oe,[e("div",re,[e("h1",ie,t(a.value?"لوحة التحكم":"Controller"),1),e("p",le,t(a.value?"إدارة العملات والمسارات":"Manage Currencies and Routes"),1)])]),w.value?(i(),c("div",{key:0,class:y(["feedback-message glass-panel",N.value?"success":"error"])},t(w.value),3)):g("",!0),e("div",ce,[e("button",{class:y(["tab-btn",{active:h.value==="currencies"}]),onClick:s[0]||(s[0]=n=>h.value="currencies")},[s[7]||(s[7]=e("i",{class:"fas fa-coins"},null,-1)),b(" "+t(a.value?"العملات":"Currencies"),1)],2),e("button",{class:y(["tab-btn",{active:h.value==="routes"}]),onClick:s[1]||(s[1]=n=>h.value="routes")},[s[8]||(s[8]=e("i",{class:"fas fa-route"},null,-1)),b(" "+t(a.value?"المسارات":"Routes"),1)],2)]),h.value==="currencies"?(i(),c("div",ue,[e("div",de,[e("div",ve,[e("h3",pe,[s[9]||(s[9]=e("i",{class:"fas fa-list"},null,-1)),b(" "+t(a.value?"العمله المتاحة":"Available Currency"),1)]),e("button",{class:"btn-refresh",onClick:U,disabled:C.value},[e("i",{class:y(["fas fa-sync-alt",{"fa-spin":C.value}])},null,2),b(" "+t(a.value?"تحديث":"Refresh"),1)],8,_e)]),C.value?(i(),c("div",me,[e("div",ye,[s[10]||(s[10]=e("div",{class:"loading-spinner-enhanced"},[e("div",{class:"spinner-ring ring-1"}),e("div",{class:"spinner-ring ring-2"}),e("div",{class:"spinner-ring ring-3"})],-1)),e("p",he,t(a.value?"جاري التحميل...":"Loading..."),1)])])):O.value.length>0?(i(),c("div",fe,[(i(!0),c(D,null,T(O.value,n=>(i(),c("div",{key:n.id,class:"item-card"},[e("div",ge,[e("div",be,[e("i",{class:y(n.icon||"fas fa-coins")},null,2)]),e("div",Ce,[e("h4",ke,t(n.name),1),e("p",we,"ID: "+t(n.id),1)])]),e("div",Ee,[e("button",{class:"btn-edit",onClick:K=>P(n),title:a.value?"تعديل":"Edit"},s[11]||(s[11]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Re)])]))),128))])):(i(),c("div",$e,[s[12]||(s[12]=e("i",{class:"fas fa-coins"},null,-1)),e("p",null,t(a.value?"لا توجد عملات متاحة":"No currencies available"),1)]))])])):g("",!0),h.value==="routes"?(i(),c("div",Se,[e("div",Oe,[e("div",Ae,[e("h3",Me,[s[13]||(s[13]=e("i",{class:"fas fa-list"},null,-1)),b(" "+t(a.value?"المسارات المتاحة":"Available Routes"),1)]),e("button",{class:"btn-refresh",onClick:B,disabled:k.value},[e("i",{class:y(["fas fa-sync-alt",{"fa-spin":k.value}])},null,2),b(" "+t(a.value?"تحديث":"Refresh"),1)],8,xe)]),k.value?(i(),c("div",Ue,[e("div",De,[s[14]||(s[14]=e("div",{class:"loading-spinner-enhanced"},[e("div",{class:"spinner-ring ring-1"}),e("div",{class:"spinner-ring ring-2"}),e("div",{class:"spinner-ring ring-3"})],-1)),e("p",Te,t(a.value?"جاري التحميل...":"Loading..."),1)])])):M.value.length>0?(i(),c("div",Fe,[(i(!0),c(D,null,T(M.value,n=>(i(),c("div",{key:n.id,class:"item-card route-card"},[e("div",Ie,[s[15]||(s[15]=e("div",{class:"item-icon"},[e("i",{class:"fas fa-route"})],-1)),e("div",Ne,[e("h4",Be,t(a.value?n.arabic_name:n.english_name),1),e("p",Ve,t(a.value?n.english_name:n.arabic_name),1),e("p",Pe,"ID: "+t(n.id),1)])]),e("div",Le,[e("button",{class:"btn-edit",onClick:K=>z(n),title:a.value?"تعديل":"Edit"},s[16]||(s[16]=[e("i",{class:"fas fa-edit"},null,-1)]),8,qe)])]))),128))])):(i(),c("div",ze,[s[17]||(s[17]=e("i",{class:"fas fa-route"},null,-1)),e("p",null,t(a.value?"لا توجد مسارات متاحة":"No routes available"),1)]))])])):g("",!0),A.value?(i(),c("div",{key:3,class:"modal-overlay",onClick:E},[e("div",{class:"modal-content",onClick:s[3]||(s[3]=$(()=>{},["stop"]))},[e("div",je,[e("h3",null,t(a.value?"تعديل العملة":"Edit Currency"),1),e("button",{class:"modal-close",onClick:E},s[18]||(s[18]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:$(q,["prevent"]),class:"modal-form"},[e("div",Ke,[e("label",null,t(a.value?"اختر العملة":"Select Currency"),1),F(e("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>l.value.selectedOption=n),class:"form-select",onChange:L,required:""},[e("option",Qe,t(a.value?"اختر عملة...":"Choose a currency..."),1),(i(!0),c(D,null,T(I.value,n=>(i(),c("option",{key:n.currency_name,value:n},t(n.currency_icon)+" "+t(n.currency_name)+" ("+t(n.country)+") ",9,He))),128))],544),[[Y,l.value.selectedOption]])]),l.value.selectedOption?(i(),c("div",Ge,[e("label",null,t(a.value?"معاينة":"Preview"),1),e("div",Je,[e("span",We,t(l.value.selectedOption.currency_icon),1),e("span",Xe,t(l.value.selectedOption.currency_name),1),e("span",Ye,t(l.value.selectedOption.country),1)])])):g("",!0),e("div",Ze,[e("button",{type:"button",class:"btn-secondary",onClick:E},t(a.value?"إلغاء":"Cancel"),1),e("button",{type:"submit",class:"btn-primary",disabled:!l.value.selectedOption},t(a.value?"حفظ":"Save"),9,es)])],32)])])):g("",!0),(i(),X(Z,{to:"body"},[x.value?(i(),c("div",{key:0,class:"modal-overlay",onClick:R},[e("div",{class:"modal-content",onClick:s[6]||(s[6]=$(()=>{},["stop"]))},[e("div",ss,[e("h3",null,t(a.value?"تعديل المسار":"Edit Route"),1),e("button",{class:"modal-close",onClick:R},s[19]||(s[19]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:$(j,["prevent"]),class:"modal-form"},[e("div",as,[e("label",null,t(a.value?"الاسم بالإنجليزية":"English Name"),1),F(e("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>m.value.english_name=n),type:"text",class:"form-input",required:""},null,512),[[V,m.value.english_name]])]),e("div",ts,[e("label",null,t(a.value?"الاسم بالعربية":"Arabic Name"),1),F(e("input",{"onUpdate:modelValue":s[5]||(s[5]=n=>m.value.arabic_name=n),type:"text",class:"form-input",required:""},null,512),[[V,m.value.arabic_name]])]),e("div",ns,[e("button",{type:"button",class:"btn-secondary",onClick:R},t(a.value?"إلغاء":"Cancel"),1),e("button",os,t(a.value?"حفظ":"Save"),1)])],32)])])):g("",!0)]))],10,ne))}}),ls=se(rs,[["__scopeId","data-v-a07b46e9"]]);export{ls as default};
