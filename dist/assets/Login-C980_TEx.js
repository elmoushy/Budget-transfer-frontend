import{c as q,d as C,u as F,r as i,o as N,w as S,a as U,b as n,e as l,f as s,l as $,t as u,g as k,h as M,i as j,n as x,v as z,j as O,k as I,m as D,p as R,q as G,s as t,_ as H}from"./index-Cre1HAju.js";import{a as J}from"./apiService-CkcypGzS.js";import{E as K}from"./eye-ZqwV11c3.js";import"./api-D_YAzMdB.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=q("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),W={class:"login-container glass-panel"},X={class:"logo-section",delay:200},Y={class:"app-name glow-text"},Z={class:"form-container",delay:300},ee={class:"form-title"},se={key:0,class:"alert error glass-alert"},ae={class:"form-group",delay:400},oe={for:"username"},te={class:"input-wrapper"},re=["placeholder"],le={key:0,class:"error-text"},ne={class:"form-group",delay:500},ie={for:"password"},de={class:"input-wrapper password-input-container"},ue=["type","placeholder"],ce={key:0,class:"error-text"},pe=["disabled"],ve={key:0,class:"loader"},me={key:1},ge=C({name:"LoginPage",__name:"Login",setup(he){const P=G(),v=F(),b=i(!1),r=i(!1);N(()=>{b.value=v.darkMode,r.value=v.language==="ar",T()}),S(()=>v.darkMode,a=>{b.value=a}),S(()=>v.language,a=>{r.value=a==="ar"});const m=i(""),g=i(""),h=i(!1),f=i(""),c=i(""),p=i(""),_=i(!1),V=U();async function A(){f.value="",c.value="",p.value="";let a=!0;if(m.value.trim()||(c.value=r.value?"الرجاء إدخال اسم المستخدم":"Please enter your username",a=!1),g.value.trim()||(p.value=r.value?"الرجاء إدخال كلمة المرور":"Please enter your password",a=!1),!!a){_.value=!0;try{const e=await J.auth.login({username:m.value,password:g.value});await V.setAuth({token:e.token,user:e.data}),P.push({name:"Dashboard"})}catch(e){console.error("Login error:",e),f.value=r.value?"حدث خطأ أثناء محاولة تسجيل الدخول. الرجاء المحاولة مرة أخرى.":"An error occurred while trying to log in. Please try again."}finally{_.value=!1}}}function B(a){const o=a.target.closest(".input-wrapper");o&&o.classList.add("focused")}function E(a){const e=a.target,o=e.closest(".input-wrapper");o&&(o.classList.remove("focused"),e.value?o.classList.add("has-value"):o.classList.remove("has-value"))}function T(){const a=(o,d)=>Math.floor(Math.random()*(d-o+1)+o);document.querySelectorAll(".gradient-sphere").forEach(o=>{const d=o;setInterval(()=>{const y=a(-20,20),L=a(-20,20);d.style.transform=`translate(${y}px, ${L}px)`},6e3)})}return(a,e)=>{const o=k("motion-slide-top"),d=k("motion-slide-right"),y=k("motion-slide-bottom"),L=k("motion-fade");return n((t(),l("div",{class:x(["login-page",{"dark-mode":b.value}])},[e[7]||(e[7]=s("div",{class:"login-background"},[s("div",{class:"gradient-sphere sphere-1"}),s("div",{class:"gradient-sphere sphere-2"}),s("div",{class:"gradient-sphere sphere-3"})],-1)),n((t(),l("div",W,[n((t(),l("div",X,[e[3]||(e[3]=s("img",{src:$,alt:"LightIdea Logo",class:"logo-img"},null,-1)),s("h1",Y,u(r.value?"مناقلة":"Budget Transfer"),1)])),[[o]]),n((t(),l("div",Z,[s("h2",ee,u(r.value?"تسجيل الدخول":"Login"),1),s("form",{onSubmit:R(A,["prevent"]),class:"login-form"},[f.value?n((t(),l("div",se,[j(u(f.value),1)])),[[d]]):M("",!0),n((t(),l("div",ae,[s("label",oe,u(r.value?"اسم المستخدم":"Username"),1),s("div",te,[n(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=w=>m.value=w),placeholder:r.value?"أدخل اسم المستخدم":"Enter username",required:"",class:x({"has-error":c.value}),onFocus:B,onBlur:E},null,42,re),[[z,m.value]]),e[4]||(e[4]=s("div",{class:"input-focus-indicator"},null,-1))]),c.value?(t(),l("div",le,u(c.value),1)):M("",!0)])),[[d]]),n((t(),l("div",ne,[s("label",ie,u(r.value?"كلمة المرور":"Password"),1),s("div",de,[n(s("input",{type:h.value?"text":"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=w=>g.value=w),placeholder:r.value?"أدخل كلمة المرور":"Enter password",required:"",class:x({"has-error":p.value}),onFocus:B,onBlur:E},null,42,ue),[[O,g.value]]),e[5]||(e[5]=s("div",{class:"input-focus-indicator"},null,-1)),s("button",{type:"button",class:"toggle-password",onClick:e[2]||(e[2]=w=>h.value=!h.value),"aria-label":"Toggle password visibility"},[h.value?(t(),I(D(Q),{key:1})):(t(),I(D(K),{key:0}))])]),p.value?(t(),l("div",ce,u(p.value),1)):M("",!0)])),[[d]]),n((t(),l("button",{type:"submit",class:"login-btn glow-btn",disabled:_.value,delay:600},[_.value?(t(),l("span",ve)):(t(),l("span",me,u(r.value?"تسجيل الدخول":"Login"),1)),e[6]||(e[6]=s("div",{class:"btn-glint"},null,-1))],8,pe)),[[d]])],32)])),[[y]])])),[[y]])],2)),[[L]])}}}),ke=H(ge,[["__scopeId","data-v-da3956b9"]]);export{ke as default};
