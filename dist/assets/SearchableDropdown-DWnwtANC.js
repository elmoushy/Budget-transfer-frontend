import{d as W,r as c,y as O,o as q,z as J,w as $,e as s,n as y,f as g,k as X,h as b,t as C,M as Y,S as Z,b as ee,v as te,a4 as _,m as S,F as oe,C as le,V as L,s as l,_ as ae}from"./index-1DZghGKI.js";const se={key:0,class:"value-text"},ne={key:1,class:"placeholder-text"},re={key:0,class:"search-container"},ie=["placeholder","onKeydown"],de={class:"options-container"},ce=["onClick","onMouseenter"],ue={key:0,class:"no-results"},pe=W({__name:"SearchableDropdown",props:{modelValue:{},options:{default:()=>[]},placeholder:{default:"Select option..."},disabled:{type:Boolean,default:!1},isDarkMode:{type:Boolean,default:!1},isRtl:{type:Boolean,default:!1},searchPlaceholder:{default:"Search..."},noResultsText:{default:"No results found"}},emits:["update:modelValue","change"],setup(N,{emit:P}){const i=N,R=P,a=c(!1),n=c(""),r=c(-1),x=c(),B=c(),M=c(),D=c({}),V=O(()=>i.options.find(e=>e.value===i.modelValue)),p=O(()=>n.value?i.options.filter(e=>{const t=e.label||"",o=e.value||"";return typeof t=="string"&&t.toLowerCase().includes(n.value.toLowerCase())||o.toString().toLowerCase().includes(n.value.toLowerCase())}):i.options),F=()=>{i.disabled||(a.value?v():K())},K=async()=>{i.disabled||(a.value=!0,n.value="",r.value=-1,await L(),h(),x.value&&x.value.focus())},v=()=>{a.value=!1,n.value="",r.value=-1},E=e=>{R("update:modelValue",e.value),R("change",e.value),v()},U=()=>{p.value.length>0&&E(p.value[0])},A=()=>{r.value<p.value.length-1&&r.value++},j=()=>{r.value>0&&r.value--},h=()=>{if(!B.value||!M.value)return;const e=8,t=B.value.getBoundingClientRect(),o=window.innerWidth,d=window.innerHeight,m=M.value;m.style.maxHeight="";const G=m.offsetHeight,f=Math.min(G,d-e*2),k=Math.min(Math.max(t.width,260),o-e*2),I=d-t.bottom,Q=t.top;let w=I>=f||I>=Q?t.bottom+4:t.top-f-4;w<e&&(w=e),w+f>d-e&&(w=d-f-e);let u=t.left;i.isRtl&&(u=t.right-k),u+k>o-e&&(u=o-k-e),u<e&&(u=e),D.value={position:"fixed",left:`${u}px`,top:`${w}px`,width:`${k}px`,maxHeight:`${f}px`,zIndex:"999999",overflow:"hidden"}},z=e=>{const t=e.target;!t.closest(".searchable-dropdown")&&!t.closest(".dropdown-panel-portal")&&v()},T=()=>{a.value&&h()},H=()=>{a.value&&h()};return q(()=>{document.addEventListener("click",z),window.addEventListener("scroll",T,!0),window.addEventListener("resize",H)}),J(()=>{document.removeEventListener("click",z),window.removeEventListener("scroll",T,!0),window.removeEventListener("resize",H)}),$(a,e=>{e&&L(()=>{h()})}),$(n,()=>{L(()=>h())}),(e,t)=>(l(),s("div",{class:y(["searchable-dropdown",{"dark-mode":e.isDarkMode,rtl:e.isRtl,disabled:e.disabled}])},[g("div",{ref_key:"dropdownTrigger",ref:B,class:y(["dropdown-trigger",{active:a.value,disabled:e.disabled}]),onClick:F},[V.value?(l(),s("span",se,C(V.value.label||""),1)):(l(),s("span",ne,C(e.placeholder||"Select option..."),1)),(l(),s("svg",{class:y(["dropdown-icon",{rotated:a.value}]),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},t[1]||(t[1]=[g("polyline",{points:"6,9 12,15 18,9"},null,-1)]),2))],2),(l(),X(Y,{to:"body"},[a.value?(l(),s("div",{key:0,class:"dropdown-panel-portal",style:Z(D.value)},[g("div",{class:"dropdown-panel",ref_key:"panelRef",ref:M},[e.searchPlaceholder?(l(),s("div",re,[ee(g("input",{ref_key:"searchInput",ref:x,"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),type:"text",class:"search-input",placeholder:e.searchPlaceholder,onKeydown:[_(v,["esc"]),_(S(U,["prevent"]),["enter"]),_(S(A,["prevent"]),["arrow-down"]),_(S(j,["prevent"]),["arrow-up"])]},null,40,ie),[[te,n.value]])])):b("",!0),g("div",de,[(l(!0),s(oe,null,le(p.value,(o,d)=>(l(),s("div",{key:o.value,class:y(["option-item",{selected:o.value===e.modelValue,highlighted:d===r.value}]),onClick:m=>E(o),onMouseenter:m=>r.value=d},C(o.label||""),43,ce))),128)),p.value.length===0?(l(),s("div",ue,C(e.noResultsText||"No results found"),1)):b("",!0)])],512)],4)):b("",!0)])),a.value?(l(),s("div",{key:0,class:"dropdown-backdrop",onClick:v})):b("",!0)],2))}}),fe=ae(pe,[["__scopeId","data-v-d5b70ae3"]]);export{fe as S};
