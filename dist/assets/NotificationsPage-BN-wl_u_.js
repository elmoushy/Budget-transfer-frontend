import{c as A,d as I,u as U,y as p,r as v,o as E,V as h,e as o,f as t,t as r,D as d,i as $,m as f,W as k,F as V,B as H,n as g,k as q,Y as P,h as Q,Z as W,$ as Y,a0 as Z,a1 as j,I as G,M as J,s as i,_ as K}from"./index-Cre1HAju.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=A("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=A("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ee={class:"page-header"},se={class:"header-actions"},te={class:"notifications-container"},ae={key:0,class:"loading-state"},ne={key:1,class:"empty-state"},re={class:"notification-date"},ie={class:"notification-content"},oe={class:"notification-meta"},ce={class:"timestamp"},le={class:"notification-actions"},ue=["onClick","title"],de=["onClick","title"],fe=I({__name:"NotificationsPage",setup(me){const w=U(),D=p(()=>w.darkMode),n=p(()=>w.language==="ar"),m=v([]),_=v(!1),N=v("all"),C=v(""),M=p(()=>m.value.filter(s=>N.value==="read"?s.is_read:N.value==="unread"?!s.is_read:!0).filter(s=>C.value?s.message.toLowerCase().includes(C.value.toLowerCase()):!0));E(()=>{y()});async function y(){_.value=!0;try{const s=await h.getAllNotifications();m.value=s.notifications||[]}catch(s){console.error("Error fetching notifications:",s)}finally{_.value=!1}}async function b(s){try{await h.markNotificationAsRead(s.id),s.is_read=!0}catch(e){console.error(`Error marking notification ${s.id} as read:`,e)}}async function L(){try{await h.markAllNotificationsAsRead(),await y()}catch(s){console.error("Error marking all notifications as read:",s)}}async function z(s){try{await h.deleteNotification(s.id),m.value=m.value.filter(e=>e.id!==s.id)}catch(e){console.error(`Error deleting notification ${s.id}:`,e)}}function B(){y()}function R(s){const e=new Date(s);return n.value?new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(e):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e)}function S(s){const a=new Date().getTime()-s.getTime(),c=Math.floor(a/(1e3*60*60*24)),l=Math.floor(a/(1e3*60*60)),u=Math.floor(a/(1e3*60));return n.value?u<60?`منذ ${u} دقيقة`:l<24?`منذ ${l} ساعة`:`منذ ${c} يوم`:u<60?`${u} minute${u===1?"":"s"} ago`:l<24?`${l} hour${l===1?"":"s"} ago`:`${c} day${c===1?"":"s"} ago`}function T(s){const e=s.message.toLowerCase();return e.includes("budget")||e.includes("ميزانية")?"success":e.includes("transfer")||e.includes("تحويل")?"warning":e.includes("system")||e.includes("نظام")?"info":e.includes("error")||e.includes("خطأ")?"danger":e.includes("user")||e.includes("مستخدم")?"user":"info"}function x(s){const e=s.message.toLowerCase();return n.value?e.includes("budget")||e.includes("ميزانية")?"تحديث الميزانية":e.includes("transfer")||e.includes("تحويل")?"طلب تحويل":e.includes("system")||e.includes("نظام")?"تحديث النظام":e.includes("error")||e.includes("خطأ")?"تنبيه":e.includes("user")||e.includes("مستخدم")?"مستخدم جديد":"إشعار":e.includes("budget")||e.includes("ميزانية")?"Budget Update":e.includes("transfer")||e.includes("تحويل")?"Transfer Request":e.includes("system")||e.includes("نظام")?"System Update":e.includes("error")||e.includes("خطأ")?"Alert":e.includes("user")||e.includes("مستخدم")?"New User":"Notification"}function F(s){switch(s){case"success":return k;case"warning":return J;case"info":return G;case"danger":return j;case"user":return Z;default:return Y}}return(s,e)=>(i(),o("div",{class:g(["notifications-page",{"dark-theme":D.value}])},[t("div",ee,[t("h1",null,r(n.value?"سجل الإشعارات":"Notifications History"),1),t("div",se,[t("button",{class:"action-button",onClick:L},[d(f(k),{size:18,class:"icon"}),$(" "+r(n.value?"تعليم الكل كمقروءة":"Mark all as read"),1)]),t("button",{class:"action-button",onClick:B},[d(f(X),{size:18,class:"icon"}),$(" "+r(n.value?"تحديث":"Refresh"),1)])])]),t("div",te,[_.value?(i(),o("div",ae,[e[0]||(e[0]=t("div",{class:"loader"},null,-1)),t("p",null,r(n.value?"جاري تحميل الإشعارات...":"Loading notifications..."),1)])):M.value.length===0?(i(),o("div",ne,[d(f(O),{size:48}),t("p",null,r(n.value?"لا توجد إشعارات لعرضها":"No notifications to display"),1)])):(i(!0),o(V,{key:2},H(M.value,a=>(i(),o("div",{class:"notification-item-container",key:a.id},[t("div",re,r(R(a.created_at)),1),t("div",{class:g(["notification-item",{"is-read":a.is_read}])},[t("div",{class:g(["notification-icon",T(a)])},[(i(),q(P(F(T(a))),{size:20}))],2),t("div",ie,[t("h3",null,r(x(a)),1),t("p",null,r(a.message),1),t("div",oe,[t("span",ce,r(S(new Date(a.created_at))),1),t("span",{class:g(["status",{unread:!a.is_read}])},r(a.is_read?n.value?"مقروءة":"Read":n.value?"غير مقروءة":"Unread"),3)])]),t("div",le,[a.is_read?Q("",!0):(i(),o("button",{key:0,class:"action-icon",onClick:c=>b(a),title:n.value?"تعليم كمقروءة":"Mark as read"},[d(f(k),{size:18})],8,ue)),t("button",{class:"action-icon",onClick:c=>z(a),title:n.value?"حذف":"Delete"},[d(f(W),{size:18})],8,de)])],2)]))),128))])],2))}}),he=K(fe,[["__scopeId","data-v-884d25e3"]]);export{he as default};
