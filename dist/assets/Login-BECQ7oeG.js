import{c as q,d as C,u as F,r as i,o as N,w as S,a as U,b as n,e as l,f as a,t as d,g as k,h as L,i as $,n as M,v as j,j as z,k as I,l as A,m as O,p as R,q as W,s as r,_ as G}from"./index-BPQ70nuw.js";import{a as H}from"./apiService-BXlmQZqc.js";import{E as J}from"./eye-DAsvhNVG.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=q("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Q="/assets/lightidea_logo-ByWf1S-u.png",X={class:"login-container glass-panel"},Y={class:"logo-section",delay:200},Z={class:"app-name glow-text"},ee={class:"form-container",delay:300},se={class:"form-title"},ae={key:0,class:"alert error glass-alert"},oe={class:"form-group",delay:400},te={for:"username"},re={class:"input-wrapper"},le=["placeholder"],ne={key:0,class:"error-text"},ie={class:"form-group",delay:500},ue={for:"password"},de={class:"input-wrapper password-input-container"},ce=["type","placeholder"],ve={key:0,class:"error-text"},pe=["disabled"],me={key:0,class:"loader"},ge={key:1},fe=C({name:"LoginPage",__name:"Login",setup(he){const D=R(),m=F(),b=i(!1),o=i(!1);N(()=>{b.value=m.darkMode,o.value=m.language==="ar",V()}),S(()=>m.darkMode,t=>{b.value=t}),S(()=>m.language,t=>{o.value=t==="ar"});const g=i(""),f=i(""),h=i(!1),c=i(""),v=i(""),p=i(""),_=i(!1),P=U();async function T(){c.value="",v.value="",p.value="";let t=!0;if(g.value.trim()||(v.value=o.value?"الرجاء إدخال اسم المستخدم":"Please enter your username",t=!1),f.value.trim()||(p.value=o.value?"الرجاء إدخال كلمة المرور":"Please enter your password",t=!1),!!t){_.value=!0;try{const e=await H.auth.login({username:g.value,password:f.value});await P.setAuth({token:e.token,refreshToken:e.refresh,user:e.data,user_level:e.user_level}),D.push({name:"Dashboard"})}catch(e){if(console.error("Login error:",e),W.isAxiosError(e)&&e.response)if(e.response.status===401)c.value=o.value?"اسم المستخدم أو كلمة المرور غير صحيحة":"Invalid username or password";else if(e.response.status===400){const s=e.response.data;s.username&&(v.value=s.username[0]),s.password&&(p.value=s.password[0]),!s.username&&!s.password&&(c.value=o.value?"بيانات الدخول غير صحيحة":"Invalid login data")}else c.value=o.value?"حدث خطأ أثناء محاولة تسجيل الدخول. الرجاء المحاولة مرة أخرى.":"An error occurred while trying to log in. Please try again.";else c.value=o.value?"حدث خطأ أثناء محاولة تسجيل الدخول. الرجاء المحاولة مرة أخرى.":"An error occurred while trying to log in. Please try again."}finally{_.value=!1}}}function B(t){const s=t.target.closest(".input-wrapper");s&&s.classList.add("focused")}function E(t){const e=t.target,s=e.closest(".input-wrapper");s&&(s.classList.remove("focused"),e.value?s.classList.add("has-value"):s.classList.remove("has-value"))}function V(){const t=(s,u)=>Math.floor(Math.random()*(u-s+1)+s);document.querySelectorAll(".gradient-sphere").forEach(s=>{const u=s;setInterval(()=>{const y=t(-20,20),x=t(-20,20);u.style.transform=`translate(${y}px, ${x}px)`},6e3)})}return(t,e)=>{const s=k("motion-slide-top"),u=k("motion-slide-right"),y=k("motion-slide-bottom"),x=k("motion-fade");return n((r(),l("div",{class:M(["login-page",{"dark-mode":b.value}])},[e[7]||(e[7]=a("div",{class:"login-background"},[a("div",{class:"gradient-sphere sphere-1"}),a("div",{class:"gradient-sphere sphere-2"}),a("div",{class:"gradient-sphere sphere-3"})],-1)),n((r(),l("div",X,[n((r(),l("div",Y,[e[3]||(e[3]=a("img",{src:Q,alt:"LightIdea Logo",class:"logo-img"},null,-1)),a("h1",Z,d(o.value?"مناقلة":"Budget Transfer"),1)])),[[s]]),n((r(),l("div",ee,[a("h2",se,d(o.value?"تسجيل الدخول":"Login"),1),a("form",{onSubmit:O(T,["prevent"]),class:"login-form"},[c.value?n((r(),l("div",ae,[$(d(c.value),1)])),[[u]]):L("",!0),n((r(),l("div",oe,[a("label",te,d(o.value?"اسم المستخدم":"Username"),1),a("div",re,[n(a("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=w=>g.value=w),placeholder:o.value?"أدخل اسم المستخدم":"Enter username",required:"",class:M({"has-error":v.value}),onFocus:B,onBlur:E},null,42,le),[[j,g.value]]),e[4]||(e[4]=a("div",{class:"input-focus-indicator"},null,-1))]),v.value?(r(),l("div",ne,d(v.value),1)):L("",!0)])),[[u]]),n((r(),l("div",ie,[a("label",ue,d(o.value?"كلمة المرور":"Password"),1),a("div",de,[n(a("input",{type:h.value?"text":"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=w=>f.value=w),placeholder:o.value?"أدخل كلمة المرور":"Enter password",required:"",class:M({"has-error":p.value}),onFocus:B,onBlur:E},null,42,ce),[[z,f.value]]),e[5]||(e[5]=a("div",{class:"input-focus-indicator"},null,-1)),a("button",{type:"button",class:"toggle-password",onClick:e[2]||(e[2]=w=>h.value=!h.value),"aria-label":"Toggle password visibility"},[h.value?(r(),I(A(K),{key:1})):(r(),I(A(J),{key:0}))])]),p.value?(r(),l("div",ve,d(p.value),1)):L("",!0)])),[[u]]),n((r(),l("button",{type:"submit",class:"login-btn glow-btn",disabled:_.value,delay:600},[_.value?(r(),l("span",me)):(r(),l("span",ge,d(o.value?"تسجيل الدخول":"Login"),1)),e[6]||(e[6]=a("div",{class:"btn-glint"},null,-1))],8,pe)),[[u]])],32)])),[[y]])])),[[y]])],2)),[[x]])}}}),ke=G(fe,[["__scopeId","data-v-984d669c"]]);export{ke as default};
