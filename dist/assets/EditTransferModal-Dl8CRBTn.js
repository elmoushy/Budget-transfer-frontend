import{d as F,a as A,r as n,u as B,y as E,w as C,e as h,F as J,h as P,G as M,f as e,t as a,b as O,H as x,l as I,Q as N,n as q,m as R,q as b,s as U}from"./index-DKsQNwYd.js";import{a as j}from"./apiService-Bs_XDTQg.js";import{F as Q}from"./FuturisticPopup-1VHhFaeB.js";const z={class:"modal-header"},G={class:"modal-body"},H={class:"form-group"},K={for:"timePeriod",class:"required"},W={class:"select-wrapper"},L={value:"",disabled:""},X={value:"Jan"},Y={value:"Feb"},Z={value:"Mar"},$={value:"Apr"},ee={value:"May"},te={value:"Jun"},ae={value:"Jul"},oe={value:"Aug"},se={value:"Sep"},re={value:"Oct"},le={value:"Nov"},ne={value:"Dec"},ue={class:"form-group"},ie={for:"transferReason",class:"required"},de={key:0,class:"error-message"},ce={class:"modal-footer"},ve=F({__name:"EditTransferModal",props:{modelValue:{type:Boolean,default:!1},transferData:{type:Object,required:!0,default:()=>({})}},emits:["update:modelValue","submit"],setup(y,{emit:S}){const i=y,g=S;A();const l=n(""),c=n(!1),r=n({timePeriod:"",transferId:null}),T=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],w={placeholder:"Enter your reason here...",modules:{toolbar:T}},k=B(),t=E(()=>k.language==="ar"),V=E(()=>k.darkMode);function v(){g("update:modelValue",!1)}C(()=>i.transferData,s=>{s&&Object.keys(s).length>0&&(r.value.timePeriod=s.transaction_date||"",r.value.transferId=s.transaction_id,l.value=s.notes||"<p>Enter your reason here...</p>")},{immediate:!0,deep:!0}),C(()=>i.modelValue,s=>{s&&i.transferData&&(r.value.timePeriod=i.transferData.transaction_date||"",r.value.transferId=i.transferData.transaction_id,l.value=i.transferData.notes||"<p>Enter your reason here...</p>")});const d=n(!1),p=n("success"),m=n(""),f=n(""),_=n(3e3);async function D(){const s=l.value==="<p>Enter your reason here...</p>"||l.value==="<p><br></p>"||l.value==="";if(!r.value.timePeriod||s){s&&(c.value=!0),p.value="warning",m.value=t.value?"تنبيه":"Warning",f.value=t.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",_.value=0,d.value=!0;return}c.value=!1;try{const o={transaction_date:r.value.timePeriod,notes:l.value,type:"FAR"},u=await j.transfers.updateTransfer(r.value.transferId,o);p.value="success",m.value=t.value?"تم بنجاح":"Success",f.value=t.value?"تم تحديث طلب المناقلة بنجاح":"Transfer request updated successfully",_.value=3e3,d.value=!0,g("submit",u.data),v()}catch(o){console.error("Error updating transfer request:",o),p.value="error",m.value=t.value?"خطأ":"Error",f.value=t.value?"حدث خطأ أثناء تحديث الطلب":"Error updating request",_.value=0,d.value=!0}}return(s,o)=>(b(),h(J,null,[y.modelValue?(b(),h("div",{key:0,class:"modal-overlay",onClick:v},[e("div",{class:q(["modal-container",{"dark-mode":V.value}]),onClick:o[2]||(o[2]=R(()=>{},["stop"]))},[e("div",z,[e("h2",null,a(t.value?"تعديل المناقلة":"Edit Transfer"),1),e("button",{class:"close-modal",onClick:v},"×")]),e("div",G,[e("div",H,[e("label",K,a(t.value?"الفترة الزمنية":"Time Period"),1),e("div",W,[O(e("select",{id:"timePeriod","onUpdate:modelValue":o[0]||(o[0]=u=>r.value.timePeriod=u),required:""},[e("option",L,a(t.value?"اختر فترة":"Select period"),1),e("option",X,a(t.value?"يناير":"January"),1),e("option",Y,a(t.value?"فبراير":"February"),1),e("option",Z,a(t.value?"مارس":"March"),1),e("option",$,a(t.value?"أبريل":"April"),1),e("option",ee,a(t.value?"مايو":"May"),1),e("option",te,a(t.value?"يونيو":"June"),1),e("option",ae,a(t.value?"يوليو":"July"),1),e("option",oe,a(t.value?"أغسطس":"August"),1),e("option",se,a(t.value?"سبتمبر":"September"),1),e("option",re,a(t.value?"أكتوبر":"October"),1),e("option",le,a(t.value?"نوفمبر":"November"),1),e("option",ne,a(t.value?"ديسمبر":"December"),1)],512),[[x,r.value.timePeriod]]),o[4]||(o[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",ue,[e("label",ie,a(t.value?"سبب المناقلة":"Reason for Transfer"),1),M(I(N),{content:l.value,"onUpdate:content":o[1]||(o[1]=u=>l.value=u),toolbar:T,contentType:"html",theme:"snow",options:w,class:q(["transfer-editor",{"editor-error":c.value}])},null,8,["content","class"]),c.value?(b(),h("div",de,a(t.value?"هذا الحقل مطلوب":"This field is required"),1)):P("",!0)])]),e("div",ce,[e("button",{class:"btn-secondary",onClick:v},a(t.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:D},a(t.value?"حفظ التغييرات":"Save Changes"),1)])],2)])):P("",!0),M(Q,{show:d.value,"onUpdate:show":o[3]||(o[3]=u=>d.value=u),type:p.value,title:m.value,message:f.value,timer:_.value,showConfirmButton:!0,confirmButtonText:t.value?"حسناً":"OK"},null,8,["show","type","title","message","timer","confirmButtonText"])],64))}}),_e=U(ve,[["__scopeId","data-v-ad2fec56"]]);export{_e as E};
