import{c as Ve,d as te,r as n,u as Z,B as C,w as z,e as v,h as S,I as q,f as e,t,b as de,H as fe,n as A,l as O,Q as _e,m as N,F as Q,s as he,q as d,y as ae,G as we,o as Ze,T as Et,K as Ye,x as J,a as H,L as At,C as St,k as Fe,v as jt,D as qt,i as Ft,J as xt,M as Vt,N as We,O as Bt}from"./index-Cgy_Usry.js";import{F as re,t as Ce,I as It,u as Nt}from"./TransferService-B-C5ktSr.js";import{S as Ut,T as Ot}from"./trash-BiQaUqs8.js";import"./check-BKVbTcCV.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Ve("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Ve("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=Ve("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Jt={class:"modal-header"},Ht={class:"modal-body"},Wt={class:"form-group"},Gt={for:"timePeriod",class:"required"},Kt={class:"select-wrapper"},Qt={value:"",disabled:""},Zt={value:"Jan"},Yt={value:"Feb"},Xt={value:"Mar"},ea={value:"Apr"},ta={value:"May"},aa={value:"Jun"},oa={value:"Jul"},sa={value:"Aug"},na={value:"Sep"},la={value:"Oct"},ra={value:"Nov"},ia={value:"Dec"},ua={class:"form-group"},ca={for:"transferReason",class:"required"},da={key:0,class:"error-message"},va={class:"modal-footer"},pa=te({__name:"NewRequestModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(u,{emit:b}){const s=u,y=b,r=n("<p>Enter your reason here...</p>"),p=n(!1),i=n({timePeriod:"",transferReason:""}),E=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],$={placeholder:"Enter your reason here...",modules:{toolbar:E}},w=Z(),a=C(()=>w.language==="ar"),f=C(()=>w.darkMode),g=n(!1),_=n("info"),k=n(""),M=n("");function j(){F(),y("update:modelValue",!1)}function F(){i.value={timePeriod:"",transferReason:""},r.value="<p>Enter your reason here...</p>",p.value=!1}async function I(){const D=r.value==="<p>Enter your reason here...</p>"||r.value==="<p><br></p>"||r.value==="";if(!i.value.timePeriod||D){D&&(p.value=!0),_.value="warning",k.value=a.value?"تنبيه!":"Warning!",M.value=a.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",g.value=!0;return}p.value=!1;try{const h={transaction_date:i.value.timePeriod,notes:r.value,type:"FAR"},m=await he.transfers.createTransfer(h);y("submit",m.data),j()}catch(h){console.error("Error creating transfer request:",h),_.value="error",k.value=a.value?"خطأ!":"Error!",M.value=a.value?"حدث خطأ أثناء إنشاء الطلب":"Error creating request",g.value=!0}}return z(()=>s.modelValue,D=>{D&&F()}),(D,h)=>(d(),v(Q,null,[u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:j},[e("div",{class:A(["modal-container",{"dark-mode":f.value}]),onClick:h[2]||(h[2]=N(()=>{},["stop"]))},[e("div",Jt,[e("h2",null,t(a.value?"طلب مناقلة جديد":"New Transfer Request"),1),e("button",{class:"close-modal",onClick:j},"×")]),e("div",Ht,[e("div",Wt,[e("label",Gt,t(a.value?"الفترة الزمنية":"Time Period"),1),e("div",Kt,[de(e("select",{id:"timePeriod","onUpdate:modelValue":h[0]||(h[0]=m=>i.value.timePeriod=m),required:""},[e("option",Qt,t(a.value?"اختر فترة":"Select period"),1),e("option",Zt,t(a.value?"يناير":"January"),1),e("option",Yt,t(a.value?"فبراير":"February"),1),e("option",Xt,t(a.value?"مارس":"March"),1),e("option",ea,t(a.value?"أبريل":"April"),1),e("option",ta,t(a.value?"مايو":"May"),1),e("option",aa,t(a.value?"يونيو":"June"),1),e("option",oa,t(a.value?"يوليو":"July"),1),e("option",sa,t(a.value?"أغسطس":"August"),1),e("option",na,t(a.value?"سبتمبر":"September"),1),e("option",la,t(a.value?"أكتوبر":"October"),1),e("option",ra,t(a.value?"نوفمبر":"November"),1),e("option",ia,t(a.value?"ديسمبر":"December"),1)],512),[[fe,i.value.timePeriod]]),h[4]||(h[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",ua,[e("label",ca,t(a.value?"سبب المناقلة":"Reason for Transfer"),1),q(O(_e),{content:r.value,"onUpdate:content":h[1]||(h[1]=m=>r.value=m),toolbar:E,contentType:"html",theme:"snow",options:$,class:A(["transfer-editor",{"editor-error":p.value}])},null,8,["content","class"]),p.value?(d(),v("div",da,t(a.value?"هذا الحقل مطلوب":"This field is required"),1)):S("",!0)])]),e("div",va,[e("button",{class:"btn-secondary",onClick:j},t(a.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:I},t(a.value?"إنشاء":"Create"),1)])],2)])):S("",!0),q(re,{show:g.value,"onUpdate:show":h[3]||(h[3]=m=>g.value=m),type:_.value,title:k.value,message:M.value,timer:3e3},null,8,["show","type","title","message"])],64))}}),Ke=ae(pa,[["__scopeId","data-v-60a1c7bf"]]),fa={class:"modal-header"},_a={class:"modal-body"},ha={class:"form-group"},ma={for:"timePeriod",class:"required"},ba={class:"select-wrapper"},ya={value:"",disabled:""},ga={value:"Jan"},$a={value:"Feb"},ka={value:"Mar"},wa={value:"Apr"},Ca={value:"May"},Da={value:"Jun"},Ra={value:"Jul"},Ta={value:"Aug"},Ma={value:"Sep"},Pa={value:"Oct"},Ea={value:"Nov"},Aa={value:"Dec"},Sa={class:"form-group"},ja={for:"enhancementReason",class:"required"},qa={key:0,class:"error-message"},Fa={class:"modal-footer"},xa=te({__name:"EnhancementsRequestModel",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(u,{emit:b}){const s=u,y=b,r=n("<p>Enter your reason here...</p>"),p=n(!1),i=n({timePeriod:"",enhancementReason:""}),E=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],$={placeholder:"Enter your reason here...",modules:{toolbar:E}},w=Z(),a=C(()=>w.language==="ar"),f=C(()=>w.darkMode),g=n(!1),_=n("info"),k=n(""),M=n("");function j(){_.value="warning",k.value=a.value?"تحقق من البيانات":"Validation Error",M.value=a.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",g.value=!0}function F(m){console.error("Error creating enhancement request:",m),_.value="error",k.value=a.value?"خطأ!":"Error!",M.value=a.value?"حدث خطأ أثناء إنشاء الطلب":"Error creating request",g.value=!0}function I(){D(),y("update:modelValue",!1)}function D(){i.value={timePeriod:"",enhancementReason:""},r.value="<p></p>",p.value=!1}async function h(){const m=r.value==="<p></p>"||r.value==="<p><br></p>"||r.value==="";if(!i.value.timePeriod||m){m&&(p.value=!0),j();return}p.value=!1;try{const P={transaction_date:i.value.timePeriod,notes:r.value,type:"AFR"},V=await he.transfers.createTransfer(P);y("submit",V),I()}catch(P){F(P)}}return z(()=>s.modelValue,m=>{m&&D()}),(m,P)=>(d(),v(Q,null,[u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:I},[e("div",{class:A(["modal-container",{"dark-mode":f.value}]),onClick:P[2]||(P[2]=N(()=>{},["stop"]))},[e("div",fa,[e("h2",null,t(a.value?"طلب تعزيز جديد":"New Enhancement Request"),1),e("button",{class:"close-modal",onClick:I},"×")]),e("div",_a,[e("div",ha,[e("label",ma,t(a.value?"الفترة الزمنية":"Time Period"),1),e("div",ba,[de(e("select",{id:"timePeriod","onUpdate:modelValue":P[0]||(P[0]=V=>i.value.timePeriod=V),required:""},[e("option",ya,t(a.value?"اختر فترة":"Select period"),1),e("option",ga,t(a.value?"يناير":"January"),1),e("option",$a,t(a.value?"فبراير":"February"),1),e("option",ka,t(a.value?"مارس":"March"),1),e("option",wa,t(a.value?"أبريل":"April"),1),e("option",Ca,t(a.value?"مايو":"May"),1),e("option",Da,t(a.value?"يونيو":"June"),1),e("option",Ra,t(a.value?"يوليو":"July"),1),e("option",Ta,t(a.value?"أغسطس":"August"),1),e("option",Ma,t(a.value?"سبتمبر":"September"),1),e("option",Pa,t(a.value?"أكتوبر":"October"),1),e("option",Ea,t(a.value?"نوفمبر":"November"),1),e("option",Aa,t(a.value?"ديسمبر":"December"),1)],512),[[fe,i.value.timePeriod]]),P[4]||(P[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",Sa,[e("label",ja,t(a.value?"سبب التعزيز":"Reason for Enhancement"),1),q(O(_e),{content:r.value,"onUpdate:content":P[1]||(P[1]=V=>r.value=V),toolbar:E,contentType:"html",theme:"snow",options:$,class:A(["transfer-editor",{"editor-error":p.value}])},null,8,["content","class"]),p.value?(d(),v("div",qa,t(a.value?"هذا الحقل مطلوب":"This field is required"),1)):S("",!0)])]),e("div",Fa,[e("button",{class:"btn-secondary",onClick:I},t(a.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:h},t(a.value?"إنشاء":"Create"),1)])],2)])):S("",!0),q(re,{show:g.value,"onUpdate:show":P[3]||(P[3]=V=>g.value=V),type:_.value,title:k.value,message:M.value,timer:3e3},null,8,["show","type","title","message"])],64))}}),Va=ae(xa,[["__scopeId","data-v-541acc7f"]]),Ba={class:"modal-header"},Ia={class:"modal-body"},Na={class:"form-group"},Ua={for:"timePeriod",class:"required"},Oa={class:"select-wrapper"},za={value:"",disabled:""},La={value:"Jan"},Ja={value:"Feb"},Ha={value:"Mar"},Wa={value:"Apr"},Ga={value:"May"},Ka={value:"Jun"},Qa={value:"Jul"},Za={value:"Aug"},Ya={value:"Sep"},Xa={value:"Oct"},eo={value:"Nov"},to={value:"Dec"},ao={class:"form-group"},oo={for:"contractReason",class:"required"},so={key:0,class:"error-message"},no={class:"modal-footer"},lo=te({__name:"NewContractModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(u,{emit:b}){const s=u,y=b,r=n("<p>Enter your reason here...</p>"),p=n(!1),i=n({timePeriod:"",contractReason:""}),E=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],$={placeholder:"Enter your reason here...",modules:{toolbar:E}},w=Z(),a=C(()=>w.language==="ar"),f=C(()=>w.darkMode),g=n(!1),_=n("info"),k=n(""),M=n(""),j=(h,m="info")=>{let P="";return m==="error"?P=a.value?"خطأ!":"Error!":m==="success"?P=a.value?"تم!":"Success!":m==="warning"?P=a.value?"تنبيه!":"Warning!":P=a.value?"معلومات":"Information",k.value=P,M.value=h,_.value=m,g.value=!0,new Promise(V=>{const ie=setInterval(()=>{g.value||(clearInterval(ie),V(!0))},100)})};function F(){I(),y("update:modelValue",!1)}function I(){i.value={timePeriod:"",contractReason:""},r.value="<p>Enter your reason here...</p>",p.value=!1}async function D(){const h=r.value==="<p>Enter your reason here...</p>"||r.value==="<p><br></p>"||r.value==="";if(!i.value.timePeriod||h){h&&(p.value=!0),j(a.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields","warning");return}p.value=!1;try{const m={transaction_date:i.value.timePeriod,notes:r.value,type:"FAD"},P=await he.transfers.createTransfer(m);y("submit",P),F(),j(a.value?"تم إنشاء طلب العقد بنجاح":"Contract request created successfully","success")}catch(m){console.error("Error creating contract request:",m),j(a.value?"حدث خطأ أثناء إنشاء الطلب":"Error creating request","error")}}return z(()=>s.modelValue,h=>{h&&I()}),(h,m)=>(d(),v(Q,null,[u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:F},[e("div",{class:A(["modal-container",{"dark-mode":f.value}]),onClick:m[2]||(m[2]=N(()=>{},["stop"]))},[e("div",Ba,[e("h2",null,t(a.value?"طلب عقد جديد":"New Contract Request"),1),e("button",{class:"close-modal",onClick:F},"×")]),e("div",Ia,[e("div",Na,[e("label",Ua,t(a.value?"الفترة الزمنية":"Time Period"),1),e("div",Oa,[de(e("select",{id:"timePeriod","onUpdate:modelValue":m[0]||(m[0]=P=>i.value.timePeriod=P),required:""},[e("option",za,t(a.value?"اختر فترة":"Select period"),1),e("option",La,t(a.value?"يناير":"January"),1),e("option",Ja,t(a.value?"فبراير":"February"),1),e("option",Ha,t(a.value?"مارس":"March"),1),e("option",Wa,t(a.value?"أبريل":"April"),1),e("option",Ga,t(a.value?"مايو":"May"),1),e("option",Ka,t(a.value?"يونيو":"June"),1),e("option",Qa,t(a.value?"يوليو":"July"),1),e("option",Za,t(a.value?"أغسطس":"August"),1),e("option",Ya,t(a.value?"سبتمبر":"September"),1),e("option",Xa,t(a.value?"أكتوبر":"October"),1),e("option",eo,t(a.value?"نوفمبر":"November"),1),e("option",to,t(a.value?"ديسمبر":"December"),1)],512),[[fe,i.value.timePeriod]]),m[4]||(m[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",ao,[e("label",oo,t(a.value?"سبب العقد":"Reason for Contract"),1),q(O(_e),{content:r.value,"onUpdate:content":m[1]||(m[1]=P=>r.value=P),toolbar:E,contentType:"html",theme:"snow",options:$,class:A(["transfer-editor",{"editor-error":p.value}])},null,8,["content","class"]),p.value?(d(),v("div",so,t(a.value?"هذا الحقل مطلوب":"This field is required"),1)):S("",!0)])]),e("div",no,[e("button",{class:"btn-secondary",onClick:F},t(a.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:D},t(a.value?"إنشاء":"Create"),1)])],2)])):S("",!0),q(re,{show:g.value,"onUpdate:show":m[3]||(m[3]=P=>g.value=P),type:_.value,title:k.value,message:M.value,timer:3e3},null,8,["show","type","title","message"])],64))}}),ro=ae(lo,[["__scopeId","data-v-d2960448"]]),io={class:"modal-header"},uo={class:"modal-body"},co={class:"form-group"},vo={for:"timePeriod",class:"required"},po={class:"select-wrapper"},fo={value:"",disabled:""},_o={value:"Jan"},ho={value:"Feb"},mo={value:"Mar"},bo={value:"Apr"},yo={value:"May"},go={value:"Jun"},$o={value:"Jul"},ko={value:"Aug"},wo={value:"Sep"},Co={value:"Oct"},Do={value:"Nov"},Ro={value:"Dec"},To={class:"form-group"},Mo={for:"transferReason",class:"required"},Po={key:0,class:"error-message"},Eo={class:"modal-footer"},Ao=te({__name:"EditTransferModal",props:{modelValue:{type:Boolean,default:!1},transferData:{type:Object,required:!1,default:()=>({})}},emits:["update:modelValue","submit"],setup(u,{emit:b}){const s=u,y=b,r=n(""),p=n(!1),i=n({timePeriod:"",transferId:null}),E=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],$={placeholder:"Enter your reason here...",modules:{toolbar:E}},w=Z(),a=C(()=>w.language==="ar"),f=C(()=>w.darkMode);function g(){y("update:modelValue",!1)}z(()=>s.transferData,D=>{D&&Object.keys(D).length>0&&(i.value.timePeriod=D.transaction_date||"",i.value.transferId=D.transaction_id,r.value=D.notes||"<p>Enter your reason here...</p>")},{immediate:!0,deep:!0}),z(()=>s.modelValue,D=>{D&&s.transferData&&(i.value.timePeriod=s.transferData.transaction_date||"",i.value.transferId=s.transferData.transaction_id,r.value=s.transferData.notes||"<p>Enter your reason here...</p>")});const _=n(!1),k=n("success"),M=n(""),j=n(""),F=n(3e3);async function I(){const D=r.value==="<p>Enter your reason here...</p>"||r.value==="<p><br></p>"||r.value==="";if(!i.value.timePeriod||D){D&&(p.value=!0),k.value="warning",M.value=a.value?"تنبيه":"Warning",j.value=a.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",F.value=0,_.value=!0;return}p.value=!1;try{const h={transaction_date:i.value.timePeriod,notes:r.value,type:"FAR"},m=await he.transfers.updateTransfer(i.value.transferId,h);k.value="success",M.value=a.value?"تم بنجاح":"Success",j.value=a.value?"تم تحديث طلب المناقلة بنجاح":"Transfer request updated successfully",F.value=3e3,_.value=!0,y("submit",m.data),g()}catch(h){console.error("Error updating transfer request:",h),k.value="error",M.value=a.value?"خطأ":"Error",j.value=a.value?"حدث خطأ أثناء تحديث الطلب":"Error updating request",F.value=0,_.value=!0}}return(D,h)=>(d(),v(Q,null,[u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:g},[e("div",{class:A(["modal-container",{"dark-mode":f.value}]),onClick:h[2]||(h[2]=N(()=>{},["stop"]))},[e("div",io,[e("h2",null,t(a.value?"تعديل المناقلة":"Edit Transfer"),1),e("button",{class:"close-modal",onClick:g},"×")]),e("div",uo,[e("div",co,[e("label",vo,t(a.value?"الفترة الزمنية":"Time Period"),1),e("div",po,[de(e("select",{id:"timePeriod","onUpdate:modelValue":h[0]||(h[0]=m=>i.value.timePeriod=m),required:""},[e("option",fo,t(a.value?"اختر فترة":"Select period"),1),e("option",_o,t(a.value?"يناير":"January"),1),e("option",ho,t(a.value?"فبراير":"February"),1),e("option",mo,t(a.value?"مارس":"March"),1),e("option",bo,t(a.value?"أبريل":"April"),1),e("option",yo,t(a.value?"مايو":"May"),1),e("option",go,t(a.value?"يونيو":"June"),1),e("option",$o,t(a.value?"يوليو":"July"),1),e("option",ko,t(a.value?"أغسطس":"August"),1),e("option",wo,t(a.value?"سبتمبر":"September"),1),e("option",Co,t(a.value?"أكتوبر":"October"),1),e("option",Do,t(a.value?"نوفمبر":"November"),1),e("option",Ro,t(a.value?"ديسمبر":"December"),1)],512),[[fe,i.value.timePeriod]]),h[4]||(h[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",To,[e("label",Mo,t(a.value?"سبب المناقلة":"Reason for Transfer"),1),q(O(_e),{content:r.value,"onUpdate:content":h[1]||(h[1]=m=>r.value=m),toolbar:E,contentType:"html",theme:"snow",options:$,class:A(["transfer-editor",{"editor-error":p.value}])},null,8,["content","class"]),p.value?(d(),v("div",Po,t(a.value?"هذا الحقل مطلوب":"This field is required"),1)):S("",!0)])]),e("div",Eo,[e("button",{class:"btn-secondary",onClick:g},t(a.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:I},t(a.value?"حفظ التغييرات":"Save Changes"),1)])],2)])):S("",!0),q(re,{show:_.value,"onUpdate:show":h[3]||(h[3]=m=>_.value=m),type:k.value,title:M.value,message:j.value,timer:F.value,showConfirmButton:!0,confirmButtonText:a.value?"حسناً":"OK"},null,8,["show","type","title","message","timer","confirmButtonText"])],64))}}),xe=ae(Ao,[["__scopeId","data-v-713b316e"]]),So={class:"modal-header"},jo={class:"modal-body"},qo={class:"form-group"},Fo={for:"contractPeriod",class:"required"},xo={class:"select-wrapper"},Vo={value:"",disabled:""},Bo={value:"Jan"},Io={value:"Feb"},No={value:"Mar"},Uo={value:"Apr"},Oo={value:"May"},zo={value:"Jun"},Lo={value:"Jul"},Jo={value:"Aug"},Ho={value:"Sep"},Wo={value:"Oct"},Go={value:"Nov"},Ko={value:"Dec"},Qo={class:"form-group"},Zo={for:"contractDescription",class:"required"},Yo={key:0,class:"error-message"},Xo={class:"modal-footer"},es=te({__name:"EditContractModal",props:{modelValue:{type:Boolean,default:!1},contractData:{type:Object,required:!0,default:()=>({})}},emits:["update:modelValue","submit"],setup(u,{emit:b}){const s=u,y=b,r=n(""),p=n(!1),i=n({contractPeriod:"",contractId:null}),E=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],$={placeholder:"Enter contract description here...",modules:{toolbar:E}},w=Z(),a=C(()=>w.language==="ar"),f=C(()=>w.darkMode),g=n(!1),_=n("success"),k=n(""),M=n(""),j=n(3e3);function F(){y("update:modelValue",!1)}z(()=>s.contractData,D=>{D&&Object.keys(D).length>0&&(i.value.contractPeriod=D.transaction_date||"",i.value.contractId=D.transaction_id,r.value=D.notes||"<p>Enter contract description here...</p>")},{immediate:!0,deep:!0}),z(()=>s.modelValue,D=>{D&&s.contractData&&(i.value.contractPeriod=s.contractData.transaction_date||"",i.value.contractId=s.contractData.transaction_id,r.value=s.contractData.notes||"<p>Enter contract description here...</p>")});async function I(){const D=r.value==="<p>Enter contract description here...</p>"||r.value==="<p><br></p>"||r.value==="";if(!i.value.contractPeriod||D){D&&(p.value=!0),_.value="warning",k.value=a.value?"تنبيه":"Attention",M.value=a.value?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",j.value=0,g.value=!0;return}p.value=!1;try{const h={transaction_date:i.value.contractPeriod,notes:r.value,type:"CTR"},m=await he.transfers.updateTransfer(i.value.contractId,h);_.value="success",k.value=a.value?"تم بنجاح":"Success",M.value=a.value?"تم تحديث العقد بنجاح":"Contract updated successfully",j.value=3e3,g.value=!0,y("submit",m.data),F()}catch(h){console.error("Error updating contract:",h),_.value="error",k.value=a.value?"خطأ":"Error",M.value=a.value?"حدث خطأ أثناء تحديث العقد":"Error updating contract",j.value=0,g.value=!0}}return(D,h)=>(d(),v(Q,null,[u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:F},[e("div",{class:A(["modal-container",{"dark-mode":f.value}]),onClick:h[2]||(h[2]=N(()=>{},["stop"]))},[e("div",So,[e("h2",null,t(a.value?"تحرير العقد":"Edit Contract"),1),e("button",{class:"close-modal",onClick:F},"×")]),e("div",jo,[e("div",qo,[e("label",Fo,t(a.value?"فترة العقد":"Contract Period"),1),e("div",xo,[de(e("select",{id:"contractPeriod","onUpdate:modelValue":h[0]||(h[0]=m=>i.value.contractPeriod=m),required:""},[e("option",Vo,t(a.value?"اختر فترة":"Select period"),1),e("option",Bo,t(a.value?"يناير":"January"),1),e("option",Io,t(a.value?"فبراير":"February"),1),e("option",No,t(a.value?"مارس":"March"),1),e("option",Uo,t(a.value?"أبريل":"April"),1),e("option",Oo,t(a.value?"مايو":"May"),1),e("option",zo,t(a.value?"يونيو":"June"),1),e("option",Lo,t(a.value?"يوليو":"July"),1),e("option",Jo,t(a.value?"أغسطس":"August"),1),e("option",Ho,t(a.value?"سبتمبر":"September"),1),e("option",Wo,t(a.value?"أكتوبر":"October"),1),e("option",Go,t(a.value?"نوفمبر":"November"),1),e("option",Ko,t(a.value?"ديسمبر":"December"),1)],512),[[fe,i.value.contractPeriod]]),h[4]||(h[4]=e("div",{class:"select-arrow"},"▼",-1))])]),e("div",Qo,[e("label",Zo,t(a.value?"وصف العقد":"Contract Description"),1),q(O(_e),{content:r.value,"onUpdate:content":h[1]||(h[1]=m=>r.value=m),toolbar:E,contentType:"html",theme:"snow",options:$,class:A(["transfer-editor",{"editor-error":p.value}])},null,8,["content","class"]),p.value?(d(),v("div",Yo,t(a.value?"هذا الحقل مطلوب":"This field is required"),1)):S("",!0)])]),e("div",Xo,[e("button",{class:"btn-secondary",onClick:F},t(a.value?"إلغاء":"Cancel"),1),e("button",{class:"btn-primary submit-btn",onClick:I},t(a.value?"حفظ التغييرات":"Save Changes"),1)])],2)])):S("",!0),q(re,{show:g.value,"onUpdate:show":h[3]||(h[3]=m=>g.value=m),type:_.value,title:k.value,message:M.value,timer:j.value,showConfirmButton:!0,confirmButtonText:a.value?"حسناً":"OK"},null,8,["show","type","title","message","timer","confirmButtonText"])],64))}}),ts=ae(es,[["__scopeId","data-v-7b141b7d"]]),as={class:"modal-header"},os={class:"modal-body file-modal-body"},ss={key:0,class:"file-upload-section"},ns=["accept"],ls={class:"drop-zone-content"},rs={class:"file-types"},is={key:0,class:"selected-file"},us={key:1,class:"file-error"},cs=["disabled"],ds={key:0},vs={key:1},ps={key:1,class:"read-only-notice"},fs={class:"file-list-section"},_s={key:0,class:"loading-files"},hs={key:1,class:"no-files"},ms={key:2,class:"file-list"},bs={class:"file-info"},ys={class:"file-name"},gs={class:"file-size"},$s={class:"file-date"},ks={class:"file-actions"},ws=["onClick"],Cs={__name:"AttachmentModal",props:{show:{type:Boolean,default:!1},transactionId:{type:Number,default:0},status:{type:String,default:"pending"}},emits:["update:show","files-updated"],setup(u,{emit:b}){const s=u,y=b,r=Z(),p=n(!1),i=n(!1),E=n([]),$=n(!1),w=n(null),a=n(null),f=n(!1),g=n(!1),_=n(""),k=n([".xlsx",".pdf",".doc",".docx",".xls"]);z(()=>r.darkMode,R=>{p.value=R},{immediate:!0}),z(()=>r.language,R=>{i.value=R==="ar"},{immediate:!0}),z(()=>s.transactionId,R=>{R&&s.show&&I()});function M(R){return R?new Date(R).toLocaleDateString():""}function j(R){return R<1024?R+" B":R<1024*1024?(R/1024).toFixed(1)+" KB":(R/(1024*1024)).toFixed(1)+" MB"}function F(){y("update:show",!1),P()}async function I(){if(s.transactionId){$.value=!0;try{const R=await Ce.listFiles(s.transactionId);R&&R.attachments?E.value=R.attachments:E.value=[]}catch(R){console.error("Error loading files:",R),E.value=[]}finally{$.value=!1}}}function D(R){const B=R.target.files[0];B&&m(B)}function h(R){f.value=!1;const B=R.dataTransfer.files[0];B&&m(B)}function m(R){if(R.size>20971520){_.value=i.value?"حجم الملف كبير جدًا. الحد الأقصى هو 5 ميغابايت.":"File is too large. Maximum size is 5MB.";return}const T="."+R.name.split(".").pop().toLowerCase();if(!k.value.includes(T)){_.value=i.value?"نوع الملف غير مدعوم. الأنواع المدعومة هي: .xlsx، .pdf، .doc، .docx":"File type not allowed. Allowed types are: .xlsx, .pdf, .doc, .docx";return}_.value="",w.value=R}function P(){w.value=null,_.value="",a.value&&(a.value.value="")}const V=n(!1),ie=n("success"),W=n(""),me=n("");async function Y(){if(!(!w.value||!s.transactionId)){g.value=!0;try{await Ce.uploadFile(w.value,s.transactionId),P(),I(),y("files-updated"),ie.value="success",W.value=i.value?"تم بنجاح!":"Success!",me.value=i.value?"تم تحميل الملف بنجاح":"File uploaded successfully",V.value=!0}catch(R){console.error("Error uploading file:",R),_.value=i.value?"حدث خطأ أثناء تحميل الملف. يرجى المحاولة مرة أخرى.":"Error uploading file. Please try again."}finally{g.value=!1}}}function G(R){const B=atob(R.file_data),T=B.length,ve=new Uint8Array(T);for(let se=0;se<T;se++)ve[se]=B.charCodeAt(se);const oe=new Blob([ve],{type:R.file_type}),X=URL.createObjectURL(oe),ee=document.createElement("a");ee.href=X,ee.download=R.file_name,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(X)}return(R,B)=>(d(),v(Q,null,[u.show?(d(),v("div",{key:0,class:"modal-overlay",onClick:F},[e("div",{class:A(["file-modal-container",{"dark-mode":p.value}]),onClick:B[3]||(B[3]=N(()=>{},["stop"]))},[e("div",as,[e("h2",null,t(i.value?"إدارة المرفقات":"Manage Attachments"),1),e("button",{class:"close-modal",onClick:F},"×")]),e("div",os,[u.status.toLowerCase()==="waiting-to-submit"?(d(),v("div",ss,[e("h3",null,t(i.value?"تحميل ملف جديد":"Upload New File"),1),e("div",{class:A(["file-drop-zone",{"file-drop-active":f.value}]),onDragover:B[1]||(B[1]=N(T=>f.value=!0,["prevent"])),onDragleave:B[2]||(B[2]=T=>f.value=!1),onDrop:N(h,["prevent"])},[e("input",{type:"file",ref_key:"fileInput",ref:a,onChange:D,class:"file-input",accept:k.value.join(",")},null,40,ns),e("div",ls,[q(O(zt),{size:"48"}),e("p",null,t(i.value?"اسحب وأفلت الملف هنا أو":"Drag and drop files here or"),1),e("button",{class:"btn-secondary",onClick:B[0]||(B[0]=T=>R.$refs.fileInput.click())},t(i.value?"اختر ملفًا":"Browse files"),1),e("p",rs,t(i.value?"الملفات المسموح بها":"Allowed files")+": .xlsx, .pdf, .doc, .docx ",1)]),w.value?(d(),v("div",is,[q(O(Ge),{size:"18"}),e("span",null,t(w.value.name),1),e("button",{class:"clear-file",onClick:N(P,["prevent"])},"×")])):S("",!0),_.value?(d(),v("div",us,t(_.value),1)):S("",!0)],34),e("button",{class:"btn-primary upload-btn",disabled:!w.value||g.value,onClick:Y},[g.value?(d(),v("span",vs,t(i.value?"جاري التحميل...":"Uploading..."),1)):(d(),v("span",ds,t(i.value?"تحميل الملف":"Upload File"),1))],8,cs)])):(d(),v("div",ps,[q(O(It),{size:"18"}),e("p",null,t(i.value?"المرفقات للقراءة فقط. لا يمكن إضافة مرفقات جديدة بعد التقديم.":"Attachments are read-only. You cannot add new attachments after submission."),1)])),e("div",fs,[e("h3",null,t(i.value?"المرفقات الحالية":"Current Attachments"),1),$.value?(d(),v("div",_s,t(i.value?"جاري تحميل المرفقات...":"Loading attachments..."),1)):E.value.length===0?(d(),v("div",hs,t(i.value?"لا توجد مرفقات لهذه المعاملة":"No attachments for this transaction"),1)):(d(),v("ul",ms,[(d(!0),v(Q,null,we(E.value,T=>(d(),v("li",{key:T.attachment_id,class:"file-item"},[e("div",bs,[q(O(Ge),{size:"18"}),e("span",ys,t(T.file_name),1),e("span",gs,t(j(T.file_size)),1),e("span",$s,t(M(T.upload_date)),1)]),e("div",ks,[e("button",{onClick:ve=>G(T),class:"icon-btn",title:"Download"},[q(O(Lt),{size:"18"})],8,ws)])]))),128))]))])])],2)])):S("",!0),q(re,{show:V.value,"onUpdate:show":B[4]||(B[4]=T=>V.value=T),type:ie.value,title:W.value,message:me.value,timer:3e3},null,8,["show","type","title","message"])],64))}},Ds={class:"modal-header"},Rs={class:"modal-body approval-pipeline-body"},Ts={key:0,class:"waiting-to-submit"},Ms={class:"waiting-message"},Ps={key:1,class:"approval-steps"},Es={class:"step-icon"},As={class:"step-content"},Ss={class:"step-title"},js={class:"step-approver"},qs={key:0,class:"step-date"},Fs={key:1,class:"step-status"},xs={key:2,class:"step-status rejected-text"},Vs={class:"step-icon"},Bs={class:"step-content"},Is={class:"step-title"},Ns={class:"step-approver"},Us={key:0,class:"step-date"},Os={key:1,class:"step-status"},zs={key:2,class:"step-status rejected-text"},Ls={class:"step-icon"},Js={class:"step-content"},Hs={class:"step-title"},Ws={class:"step-approver"},Gs={key:0,class:"step-date"},Ks={key:1,class:"step-status"},Qs={key:2,class:"step-status rejected-text"},Zs={class:"step-icon"},Ys={class:"step-content"},Xs={class:"step-title"},en={class:"step-approver"},tn={key:0,class:"step-date"},an={key:1,class:"step-status"},on={key:2,class:"step-status rejected-text"},sn=te({__name:"ApprovalPipelineModal",props:{modelValue:{type:Boolean,default:!1},approvalData:{type:Object,required:!0,default:()=>({})}},emits:["update:modelValue"],setup(u,{emit:b}){const s=u,y=b,r=Z(),p=C(()=>r.language==="ar"),i=C(()=>r.darkMode),E=C(()=>!s.approvalData?.approvel_1&&!s.approvalData?.approvel_2&&!s.approvalData?.approvel_3&&!s.approvalData?.approvel_4&&!s.approvalData?.approvel_1_date&&!s.approvalData?.approvel_2_date&&!s.approvalData?.approvel_3_date&&!s.approvalData?.approvel_4_date&&s.approvalData?.status_level===1);function $(g){if(s.approvalData?.status_level===-1){if(g<4){let _,k,M;return g===1?(_=s.approvalData?.approvel_1_date,k=s.approvalData?.approvel_1,M=s.approvalData?.approvel_2_date):g===2?(_=s.approvalData?.approvel_2_date,k=s.approvalData?.approvel_2,M=s.approvalData?.approvel_3_date):(_=s.approvalData?.approvel_3_date,k=s.approvalData?.approvel_3,M=s.approvalData?.approvel_4_date),!!_&&!!k&&!M}if(g===4)return!!s.approvalData?.approvel_4_date}return!1}function w(g){for(let _=1;_<g;_++)if($(_))return!0;return!1}function a(){y("update:modelValue",!1)}function f(g){return g?new Date(g).toLocaleDateString():""}return(g,_)=>u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:a},[e("div",{class:A(["approval-modal-container",{"dark-mode":i.value}]),onClick:_[0]||(_[0]=N(()=>{},["stop"]))},[e("div",Ds,[e("h2",null,t(p.value?"سير عملية الموافقة":"Approval Pipeline"),1),e("button",{class:"close-modal",onClick:a},"×")]),e("div",Rs,[E.value?(d(),v("div",Ts,[_[1]||(_[1]=e("div",{class:"waiting-icon"},[e("i",{class:"fas fa-clock"})],-1)),e("div",Ms,t(p.value?"في انتظار التقديم":"Waiting to submit"),1)])):(d(),v("div",Ps,[e("div",{class:A(["step-card",{approved:u.approvalData?.approvel_1_date,pending:!u.approvalData?.approvel_1_date,rejected:$(1),rtl:p.value}])},[e("div",Es,[e("i",{class:A($(1)?"fas fa-times-circle":"fas fa-clipboard-check")},null,2)]),e("div",As,[e("div",Ss,t(p.value?"قسم التخطيط والموازنة":"Planning & Budget"),1),e("div",js,t(u.approvalData?.approvel_1||"-"),1),u.approvalData?.approvel_1_date?(d(),v("div",qs,t(f(u.approvalData.approvel_1_date)),1)):$(1)?(d(),v("div",xs,t(p.value?"مرفوض":"Rejected"),1)):(d(),v("div",Fs,t(p.value?"قيد الانتظار":"Pending"),1))])],2),e("div",{class:A(["step-arrow",{"rtl-arrow":p.value}])},null,2),e("div",{class:A(["step-card",{approved:u.approvalData?.approvel_2_date&&!$(2),pending:!u.approvalData?.approvel_2_date&&!$(2),rejected:$(2),rtl:p.value,"greyed-out":w(2)}])},[e("div",Vs,[e("i",{class:A($(2)?"fas fa-times-circle":"fas fa-file-invoice-dollar")},null,2)]),e("div",Bs,[e("div",Is,t(p.value?"مدير إدارة المالية":"Finance Director"),1),e("div",Ns,t(u.approvalData?.approvel_2||"-"),1),u.approvalData?.approvel_2_date?(d(),v("div",Us,t(f(u.approvalData.approvel_2_date)),1)):!$(2)&&!w(2)?(d(),v("div",Os,t(p.value?"قيد الانتظار":"Pending"),1)):$(2)?(d(),v("div",zs,t(p.value?"مرفوض":"Rejected"),1)):S("",!0)])],2),e("div",{class:A(["step-arrow",{"rtl-arrow":p.value}])},null,2),e("div",{class:A(["step-card",{approved:u.approvalData?.approvel_3_date&&!$(3),pending:!u.approvalData?.approvel_3_date&&!$(3),rejected:$(3),rtl:p.value,"greyed-out":w(3)}])},[e("div",Ls,[e("i",{class:A($(3)?"fas fa-times-circle":"fas fa-chart-line")},null,2)]),e("div",Js,[e("div",Hs,t(p.value?"المدير المالي التنفيذي":"CFO"),1),e("div",Ws,t(u.approvalData?.approvel_3||"-"),1),u.approvalData?.approvel_3_date?(d(),v("div",Gs,t(f(u.approvalData.approvel_3_date)),1)):!$(3)&&!w(3)?(d(),v("div",Ks,t(p.value?"قيد الانتظار":"Pending"),1)):$(3)?(d(),v("div",Qs,t(p.value?"مرفوض":"Rejected"),1)):S("",!0)])],2),e("div",{class:A(["step-arrow",{"rtl-arrow":p.value}])},null,2),e("div",{class:A(["step-card",{approved:u.approvalData?.approvel_4_date&&!$(4),pending:!u.approvalData?.approvel_4_date&&!$(4),rejected:$(4),rtl:p.value,"greyed-out":w(4)}])},[e("div",Zs,[e("i",{class:A($(4)?"fas fa-times-circle":"fas fa-check-double")},null,2)]),e("div",Ys,[e("div",Xs,t(p.value?"المدير العام":"General Manager"),1),e("div",en,t(u.approvalData?.approvel_4||"-"),1),u.approvalData?.approvel_4_date?(d(),v("div",tn,t(f(u.approvalData.approvel_4_date)),1)):!$(4)&&!w(4)?(d(),v("div",an,t(p.value?"قيد الانتظار":"Pending"),1)):$(4)?(d(),v("div",on,t(p.value?"مرفوض":"Rejected"),1)):S("",!0)])],2)]))])],2)])):S("",!0)}}),nn=ae(sn,[["__scopeId","data-v-65c3060c"]]),ln={class:"rejection-modal-header"},rn={class:"rejection-modal-body"},un={key:0,class:"loading-container"},cn={key:1,class:"error-container"},dn={key:2,class:"no-reports"},vn={key:3,class:"reports-list"},pn={class:"report-header"},fn={class:"report-title"},_n={class:"report-number"},hn={class:"report-date"},mn={class:"report-content"},bn={class:"report-field"},yn={class:"field-label"},gn={class:"field-value"},$n={class:"report-field reason"},kn={class:"field-label"},wn={class:"reason-text"},Cn={class:"report-footer"},Dn={class:"transaction-id"},Rn=te({__name:"RejectionReportModal",props:{show:{type:Boolean,default:!1},transactionId:{type:Number,default:0}},emits:["update:show"],setup(u,{emit:b}){const s=u,y=b,r=n([]),p=n(!1),i=n(""),E=Z(),$=C(()=>E.darkMode),w=C(()=>E.language==="ar");z(()=>s.show,async _=>{_&&s.transactionId&&await g()}),z(()=>s.transactionId,async _=>{s.show&&_&&await g()});function a(_){return _?new Date(_).toLocaleString():""}function f(){y("update:show",!1)}async function g(){if(s.transactionId){p.value=!0,i.value="",r.value=[];try{const _=await Ce.getRejectionReports(s.transactionId);r.value=_||[]}catch(_){i.value=w.value?"حدث خطأ أثناء تحميل تقارير الرفض":"An error occurred while loading rejection reports",console.error("Error loading rejection reports:",_)}finally{p.value=!1}}}return Ze(async()=>{s.show&&s.transactionId&&await g()}),(_,k)=>u.show?(d(),v("div",{key:0,class:"rejection-modal-overlay",onClick:f},[e("div",{class:A(["rejection-modal-container",{"dark-mode":$.value}]),onClick:k[0]||(k[0]=N(()=>{},["stop"]))},[e("div",ln,[e("h2",null,t(w.value?"تقارير الرفض":"Rejection Reports"),1),e("button",{class:"close-modal",onClick:f},k[1]||(k[1]=[e("span",{class:"close-icon"},"×",-1)]))]),e("div",rn,[p.value?(d(),v("div",un,[k[2]||(k[2]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,t(w.value?"جاري التحميل...":"Loading..."),1)])):i.value?(d(),v("div",cn,[k[3]||(k[3]=e("div",{class:"error-icon"},"!",-1)),e("p",null,t(i.value),1)])):r.value.length===0?(d(),v("div",dn,[k[4]||(k[4]=e("div",{class:"info-icon"},"i",-1)),e("p",null,t(w.value?"لا توجد تقارير رفض":"No rejection reports found"),1)])):(d(),v("div",vn,[q(Et,{name:"fade",tag:"div"},{default:Ye(()=>[(d(!0),v(Q,null,we(r.value,(M,j)=>(d(),v("div",{key:j,class:"report-card"},[e("div",pn,[e("div",fn,[k[5]||(k[5]=e("span",{class:"report-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})])],-1)),e("span",_n,t(w.value?"تقرير رفض":"Rejection Report")+" #"+t(j+1),1)]),e("div",hn,t(a(M.created_at)),1)]),e("div",mn,[e("div",bn,[e("span",yn,t(w.value?"رفض بواسطة":"Rejected by")+":",1),e("span",gn,t(M["rejected by"]),1)]),e("div",$n,[e("span",kn,t(w.value?"السبب":"Reason")+":",1),e("div",wn,t(M.reason_text),1)])]),e("div",Cn,[e("div",Dn,t(w.value?"رقم المعاملة":"Transaction ID")+": "+t(M.transaction_id),1)])]))),128))]),_:1})]))])],2)])):S("",!0)}}),Tn=ae(Rn,[["__scopeId","data-v-8f9f49fb"]]),Mn={class:"modal-header"},Pn={class:"modal-body oracle-pipeline-body"},En={class:"waiting-for-erp"},An={class:"waiting-message"},Sn={class:"waiting-description"},jn=te({__name:"OracleApprovalPipelineModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:b}){const s=b,y=Z(),r=C(()=>y.language==="ar"),p=C(()=>y.darkMode);function i(){s("update:modelValue",!1)}return(E,$)=>u.modelValue?(d(),v("div",{key:0,class:"modal-overlay",onClick:i},[e("div",{class:A(["oracle-modal-container",{"dark-mode":p.value}]),onClick:$[0]||($[0]=N(()=>{},["stop"]))},[e("div",Mn,[e("h2",null,t(r.value?"حالة نظام الأوراكل":"Oracle ERP Status"),1),e("button",{class:"close-modal",onClick:i},"×")]),e("div",Pn,[e("div",En,[$[1]||($[1]=e("div",{class:"waiting-icon"},[e("i",{class:"fas fa-sync-alt fa-spin"})],-1)),e("div",An,t(r.value?"في انتظار الاتصال بنظام ERP...":"Waiting to connect to ERP..."),1),e("div",Sn,t(r.value?"جاري محاولة الاتصال بنظام أوراكل للمؤسسة":"Attempting to establish connection with Oracle Enterprise System"),1)])])],2)])):S("",!0)}}),qn=ae(jn,[["__scopeId","data-v-c157c779"]]),L="https://lightidea.org:9000",Fn="https://lightidea.org:9000",xn="/api/budget/transfers/list/",Vn=6,Qe={async fetchTransfers(u="FAR",b="",s=1){const y=H();if(!y.token)throw new Error("Authentication token not found");const r={page:s.toString(),page_size:Vn.toString()},p={Authorization:`Bearer ${y.token}`,Accept:"application/json","Content-Type":"application/json"},i=b.trim()?{code:u,search:b.trim()}:{code:u};try{return(await J.post(`${Fn}${xn}`,i,{headers:p,params:r})).data}catch(E){throw console.error("Error fetching transfers:",E),E}},async deleteTransfer(u){const b=H();if(!b.token)throw new Error("Authentication token not found");try{return(await J.delete(`${L}/api/budget/transfers/${u}/delete/`,{headers:{Authorization:`Bearer ${b.token}`}})).data}catch(s){throw console.error("Error deleting transfer:",s),s}},async getTransferDetails(u){const b=H();try{return(await J.get(`${L}/api/budget/transfers/${u}/`,{headers:{Authorization:`Bearer ${b.token}`}})).data}catch(s){throw console.error("Error fetching transfer details:",s),s}},async submitTransferRequest(u){const b=H();try{return(await J.post(`${L}/api/adjd-transfers/submit/`,{transaction:u},{headers:{Authorization:`Bearer ${b.token}`}})).data}catch(s){throw console.error("Error submitting transfer request:",s),s}},async reopenTransferRequest(u){const b=H();try{return(await J.post(`${L}/api/adjd-transfers/reopen/`,{transaction:u,action:"reopen"},{headers:{Authorization:`Bearer ${b.token}`}})).data}catch(s){throw console.error("Error reopening transfer request:",s),s}},async generateReport(u){const b=H();try{return(await J.get(`${L}/api/budget/transfers/${u}/report/`,{headers:{Authorization:`Bearer ${b.token}`},responseType:"blob"})).data}catch(s){throw console.error("Error generating report:",s),s}},async createTransfer(u,b){const s=H();try{const y=b.map(i=>({transaction:i.transaction,cost_center_code:i.cost_center_code,cost_center_name:i.cost_center_name,account_code:i.account_code,account_name:i.account_name,approved_budget:parseFloat(i.approved_budget)||0,available_budget:parseFloat(i.available_budget)||0,from_center:parseFloat(i.from_center)||0,to_center:parseFloat(i.to_center)||0,encumbrance:parseFloat(i.encumbrance)||0,actual:parseFloat(i.actual)||0,done:1}));let r;switch(u){case"AFR":r=`${L}/api/adjd-transfers/create/`;break;case"FAD":r=`${L}/api/fund-adj-transfers/create/`;break;case"FAR":default:r=`${L}/api/fund-transfers/create/`;break}return(await J.post(r,y,{headers:{Authorization:`Bearer ${s.token}`}})).data}catch(y){throw console.error("Error creating transfer request:",y),y}},async uploadFile(u,b){const s=H(),y=new FormData;y.append("file",u),y.append("transaction_id",b.toString());try{return(await J.post(`${L}/api/budget/transfers/upload-file/`,y,{headers:{Authorization:`Bearer ${s.token}`,"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading file:",r),r}},async listFiles(u){const b=H();try{return(await J.get(`${L}/api/budget/transfers/${u}/files/`,{headers:{Authorization:`Bearer ${b.token}`}})).data}catch(s){throw console.error("Error listing files:",s),s}},async uploadExcelFile(u,b){const s=H(),y=new FormData;y.append("file",u);try{return(await J.post(`${L}/api/budget/transfers/${b}/upload-excel/`,y,{headers:{Authorization:`Bearer ${s.token}`,"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading Excel file:",r),r}},async getPivotFundDetails(u,b){const s=H();try{return(await J.get(`${L}/api/accounts-entities/pivot-funds/getdetail/?entity_id=${u}&account_id=${b}`,{headers:{Authorization:`Bearer ${s.token}`}})).data}catch(y){throw(!y.response||y.response.status!==404)&&console.error("Error fetching pivot fund details:",y),y}},getTransfers(u){return J.get(`${L}/api/budget/transfers/?transaction=${u}`)}},Bn=["dir"],In={class:"page-header glass-panel"},Nn={class:"header-left"},Un={class:"page-title"},On={class:"page-subtitle"},zn={class:"header-right"},Ln=["title"],Jn={class:"search-section glass-panel"},Hn={class:"search-container"},Wn={class:"search-input-wrapper"},Gn=["placeholder"],Kn={class:"table-container glass-panel"},Qn={key:0,class:"loading-state"},Zn={class:"loading-text"},Yn={key:1,class:"empty-state"},Xn={key:2,class:"modern-table-wrapper"},el={class:"modern-table"},tl={class:"table-header"},al={class:"th-actions"},ol={class:"th-code"},sl={class:"th-requested-by"},nl={class:"th-description"},ll={class:"th-request-date"},rl={class:"th-transaction-date"},il={class:"th-track"},ul={class:"th-status"},cl={class:"th-attachments"},dl={class:"td-actions"},vl={class:"action-buttons-group"},pl=["onClick","disabled","title"],fl=["onClick","disabled","title"],_l=["onClick","title"],hl={class:"td-code"},ml={class:"td-requested-by"},bl={class:"td-description"},yl=["onClick"],gl={class:"td-request-date"},$l={class:"td-transaction-date"},kl={class:"td-track"},wl={class:"td-status"},Cl=["onClick"],Dl={class:"td-attachments"},Rl=["onClick","title"],Tl={key:0,class:"pagination-wrapper glass-panel"},Ml={class:"pagination-info"},Pl={class:"pagination-text"},El={class:"pagination-controls"},Al=["disabled"],Sl=["disabled"],jl={class:"page-numbers"},ql=["onClick","disabled"],Fl=["disabled"],xl=["disabled"],Vl={class:"modal-header"},Bl={class:"modal-body"},Il={class:"modal-footer"},Nl={class:"modal-header"},Ul={class:"modal-body"},Ol=["innerHTML"],zl={class:"modal-footer"},Ll={class:"rejection-popup-header"},Jl={class:"rejection-popup-title"},Hl={class:"rejection-popup-body"},Wl={key:0,class:"rejection-details"},Gl={class:"rejection-meta"},Kl={class:"meta-label"},Ql={class:"meta-value"},Zl={class:"rejection-reason-content"},Yl={class:"reason-label"},Xl={class:"reason-text-container"},er={class:"reason-text-full"},tr={class:"rejection-popup-footer"},ar=te({name:"UnifiedTransfersPage",__name:"UnifiedTransfers",setup(u){const b=At(),s=Z(),y=Nt(),r=C(()=>{switch(b.name){case"Home":return{pageType:"transfers",code:"FAR",newRequestComponent:Ke,editComponent:xe,cssClass:"home-page",title:"Transfers",subtitle:"Fund Adjustment Requests",searchPlaceholder:"Search transfers...",showRejectionColumn:!1,detailRoute:"/cost-center-transfer"};case"Enhancements":return{pageType:"enhancements",code:"AFR",newRequestComponent:Va,editComponent:xe,cssClass:"enhancements-page",title:"Enhancements",subtitle:"Additional Fund Requests",searchPlaceholder:"Search enhancements...",showRejectionColumn:!1,detailRoute:"/cost-center-transfer"};case"Settlements":return{pageType:"contracts",code:"FAD",newRequestComponent:ro,editComponent:ts,cssClass:"contract-page",title:"Settlements",subtitle:"Fund Adjustment Department",searchPlaceholder:"Search settlements...",showRejectionColumn:!1,detailRoute:"/contracts"};default:return{pageType:"transfers",code:"FAR",newRequestComponent:Ke,editComponent:xe,cssClass:"home-page",title:"Transfers",subtitle:"Fund Adjustment Requests",searchPlaceholder:"Search transfers...",showRejectionColumn:!1,detailRoute:"/cost-center-transfer"}}}),p=C(()=>r.value.cssClass),i=C(()=>{if(f.value)switch(b.name){case"Home":return"المناقلات";case"Enhancements":return"التعزيزات";case"Settlements":return"التسويات";default:return"المناقلات"}return r.value.title}),E=C(()=>{if(f.value)switch(b.name){case"Home":return"طلبات تعديل الميزانية";case"Enhancements":return"طلبات الأموال الإضافية";case"Settlements":return"قسم تعديل الأموال";default:return"طلبات تعديل الميزانية"}return r.value.subtitle}),$=C(()=>{if(f.value)switch(b.name){case"Home":return"البحث في المناقلات...";case"Enhancements":return"البحث في التعزيزات...";case"Settlements":return"البحث في التسويات...";default:return"البحث في المناقلات..."}return r.value.searchPlaceholder}),w=C(()=>r.value.newRequestComponent),a=C(()=>r.value.editComponent),f=C(()=>s.language==="ar"),g=C(()=>f.value?"طلب جديد":"New Request"),_=C(()=>f.value?`إنشاء ${i.value} جديد`:`Create New ${r.value.title}`),k=C(()=>f.value?"جاري التحميل...":"Loading..."),M=C(()=>f.value?"لا توجد بيانات":"No Data Available"),j=C(()=>f.value?`لا توجد ${i.value} متاحة`:`No ${r.value.title.toLowerCase()} available`),F=C(()=>f.value?"تأكيد الحذف":"Confirm Delete"),I=C(()=>f.value?"هل أنت متأكد من حذف هذا العنصر؟":"Are you sure you want to delete this item?"),D=C(()=>f.value?"إلغاء":"Cancel"),h=C(()=>f.value?"حذف":"Delete"),m=C(()=>f.value?"الوصف":"Description"),P=C(()=>f.value?"إغلاق":"Close"),V=C(()=>({actions:f.value?"الإجراءات":"Actions",code:f.value?"الرمز":"Code",requestedBy:f.value?"طلب بواسطة":"Requested By",description:f.value?"الوصف":"Description",requestDate:f.value?"تاريخ الطلب":"Request Date",transactionDate:f.value?"تاريخ المعاملة":"Transaction Date",track:f.value?"تتبع":"Track",status:f.value?"الحالة":"Status",attachments:f.value?"المرفقات":"Attachments",rejection:f.value?"الرفض":"Rejection"})),ie=C(()=>{const o=(T.value-1)*6+1,l=Math.min(T.value*6,G.value);return f.value?`عرض ${o} إلى ${l} من ${G.value} عنصر`:`Showing ${o} to ${l} of ${G.value} items`}),W=n(!1),me=n(null),Y=n([]),G=n(0),R=n(!1),B=n(!1),T=n(1),ve=n(6),oe=n(""),X=n(null),ee=n(!1),se=n(!1),Be=n(""),De=n(!1),Ie=n(null),be=n(!1),pe=n(null),Re=n(!1),Ne=n(0),Ue=n("pending"),Te=n(!1),Oe=n(null),Me=n(!1),ze=n(0),Pe=n(!1),Ee=n(!1),Le=n("info"),Je=n(""),ue=n(new Map),Ae=n(new Set),ye=n(!1),ce=n(null),ge=n(""),le=C(()=>G.value===0?1:Math.ceil(G.value/ve.value)),Xe=C(()=>{const o=[],l=le.value,x=T.value;if(l<=7)for(let c=1;c<=l;c++)o.push(c);else if(x<=4){for(let c=1;c<=5;c++)o.push(c);l>6&&o.push(-1),o.push(l)}else if(x>=l-3){o.push(1),l>6&&o.push(-1);for(let c=l-4;c<=l;c++)o.push(c)}else{o.push(1),o.push(-1);for(let c=x-1;c<=x+1;c++)o.push(c);o.push(-1),o.push(l)}return o});function et(o){if(!o)return"";try{return new Date(o).toLocaleDateString("en-GB")}catch{return o}}function tt(o){return o?o.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""):""}function at(o){const l=o.toLowerCase();return{"row-pending":l==="pending","row-approved":l==="approved","row-rejected":l==="rejected","row-submitted":l==="submitted"}}function ot(o){const l=r.value.detailRoute,x=r.value.pageType==="enhancements"?{source:"EnhancementsPage"}:{};return{path:`${l}/${o.transaction_id}`,query:x}}function st(o){return!o.attachment_count||o.attachment_count===0?f.value?"لا توجد مرفقات":"No attachments":f.value?`${o.attachment_count} مرفق(ات)`:`${o.attachment_count} attachment(s)`}function $e(o){return o.status.toLowerCase()==="rejected"}function K(o){return!o.approvel_1&&!o.approvel_2&&!o.approvel_3&&!o.approvel_4&&!o.approvel_1_date&&!o.approvel_2_date&&!o.approvel_3_date&&!o.approvel_4_date&&o.status_level===1}function nt(o){r.value.pageType==="enhancements"&&y.setNavigationSource("EnhancementsPage",{transactionId:o.transaction_id,code:o.code})}async function He(o){if(ue.value.has(o))return ue.value.get(o)||"";if(Ae.value.has(o))return"";try{Ae.value.add(o);const l=await Ce.getRejectionReports(o);if(l&&l.length>0){const x=l[l.length-1],c=x.rejection_reason||x.reason_text||(f.value?"لا يوجد سبب محدد":"No specific reason provided");return ue.value.set(o,c),c}else{const x=f.value?"لا يوجد تقرير رفض":"No rejection report available";return ue.value.set(o,x),x}}catch(l){console.error("Error fetching rejection reason:",l);const x=f.value?"خطأ في تحميل سبب الرفض":"Error loading rejection reason";return ue.value.set(o,x),x}finally{Ae.value.delete(o)}}async function U(){try{W.value=!0;const o=await Qe.fetchTransfers(r.value.code,oe.value,T.value);o&&o.results?(me.value=o,Y.value=Array.isArray(o.results)?o.results:o.results.results||[],G.value=o.count||0,R.value=!!o.next,B.value=!!o.previous,Y.value.filter(x=>$e(x)).forEach(x=>{ue.value.has(x.transaction_id)||He(x.transaction_id)})):(Y.value=[],G.value=0)}catch(o){console.error("Error fetching data:",o),qe("error","Failed to load data"),Y.value=[],G.value=0}finally{W.value=!1}}function lt(){X.value&&clearTimeout(X.value),X.value=setTimeout(()=>{T.value=1,U()},500)}function rt(){oe.value="",T.value=1,U()}function it(){T.value<le.value&&(T.value++,U())}function ut(){T.value>1&&(T.value--,U())}function ct(){T.value!==1&&(T.value=1,U())}function dt(){T.value!==le.value&&(T.value=le.value,U())}function vt(o){o!==-1&&o!==T.value&&o>=1&&o<=le.value&&(T.value=o,U())}function pt(o){Be.value=o.description_x||o.notes||"",se.value=!0}function Se(){se.value=!1}function ft(o){Ie.value=o,De.value=!0}function _t(o){K(o)&&(pe.value=o,be.value=!0)}function je(){be.value=!1,pe.value=null}function ht(){pe.value&&(W.value=!0,be.value=!1,Qe.deleteTransfer(pe.value.transaction_id).then(()=>{qe("success","Item deleted successfully"),U()}).catch(o=>{console.error("Error deleting item:",o),qe("error","Failed to delete item")}).finally(()=>{W.value=!1,pe.value=null}))}function mt(o){Ne.value=o.transaction_id,Ue.value=K(o)?"waiting-to-submit":o.status,Re.value=!0}function bt(o){Oe.value=o,Te.value=!0}function yt(o){$e(o)&&(ze.value=o.transaction_id,Me.value=!0)}function gt(){Pe.value=!0}async function $t(o){if($e(o)){ce.value=o;try{const l=await He(o.transaction_id);ge.value=l,ye.value=!0}catch(l){console.error("Error loading rejection reason:",l),ge.value=f.value?"خطأ في تحميل سبب الرفض":"Error loading rejection reason",ye.value=!0}}}function ke(){ye.value=!1,ce.value=null,ge.value=""}function kt(){ce.value&&(yt(ce.value),ke())}function wt(){ee.value=!0}function Ct(o){console.log("New request submitted:",o),U()}function Dt(o){console.log("Item updated:",o),U()}function Rt(){U()}function qe(o,l){Le.value=o,Je.value=l,Ee.value=!0}function Tt(o){o.target.classList.add("search-focused")}function Mt(o){o.target.classList.remove("search-focused")}function Pt(){}return Ze(()=>{U()}),St(()=>{X.value&&(clearTimeout(X.value),X.value=null),document.querySelectorAll(".unified-page *").forEach(l=>{const x=l;x.style.animation="none"})}),z(()=>b.name,()=>{T.value=1,oe.value="",U()}),z(()=>s.darkMode,()=>{}),(o,l)=>{const x=xt("router-link");return d(),v("div",{class:A(["unified-page",[p.value,{"dark-theme":O(s).darkMode}]]),dir:f.value?"rtl":"ltr"},[l[22]||(l[22]=e("div",{class:"background-effects"},[e("div",{class:"floating-orb orb-1"}),e("div",{class:"floating-orb orb-2"})],-1)),e("div",In,[e("div",Nn,[e("h1",Un,t(i.value),1),e("p",On,t(E.value),1)]),e("div",zn,[e("button",{class:"btn-primary",onClick:wt,title:_.value},[e("span",null,t(g.value),1)],8,Ln)])]),e("div",Jn,[e("div",Hn,[e("div",Wn,[de(e("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>oe.value=c),type:"text",class:"search-input",placeholder:$.value,onInput:lt,onFocus:Tt,onBlur:Mt},null,40,Gn),[[jt,oe.value]]),oe.value?(d(),v("button",{key:0,class:"clear-search",onClick:rt},l[12]||(l[12]=[e("span",null,"×",-1)]))):S("",!0)]),e("div",{class:"search-actions"},[l[14]||(l[14]=e("button",{class:"btn-filter",title:"Advanced Filters"},[e("span",null,"Filters")],-1)),e("button",{class:"btn-refresh",onClick:U,title:"Refresh Data"},l[13]||(l[13]=[e("span",null,"⟳",-1)]))])])]),e("div",Kn,[W.value?(d(),v("div",Qn,[l[15]||(l[15]=qt('<div class="loading-container" data-v-aea8fa9d><div class="loading-spinner-enhanced" data-v-aea8fa9d><div class="spinner-ring ring-1" data-v-aea8fa9d></div><div class="spinner-ring ring-2" data-v-aea8fa9d></div><div class="loading-core" data-v-aea8fa9d><div class="core-dot" data-v-aea8fa9d></div></div></div><div class="loading-dots" data-v-aea8fa9d><span class="dot dot-1" data-v-aea8fa9d></span><span class="dot dot-2" data-v-aea8fa9d></span><span class="dot dot-3" data-v-aea8fa9d></span></div></div>',1)),e("p",Zn,t(k.value),1),l[16]||(l[16]=e("div",{class:"loading-progress"},[e("div",{class:"progress-bar"})],-1))])):Y.value.length===0?(d(),v("div",Yn,[l[17]||(l[17]=e("div",{class:"empty-icon"},"📋",-1)),e("h3",null,t(M.value),1),e("p",null,t(j.value),1)])):S("",!0),W.value?S("",!0):(d(),v("div",Xn,[e("table",el,[e("thead",null,[e("tr",tl,[e("th",al,t(V.value.actions),1),e("th",ol,t(V.value.code),1),e("th",sl,t(V.value.requestedBy),1),e("th",nl,t(V.value.description),1),e("th",ll,t(V.value.requestDate),1),e("th",rl,t(V.value.transactionDate),1),e("th",il,t(V.value.track),1),e("th",ul,t(V.value.status),1),e("th",cl,t(V.value.attachments),1)])]),e("tbody",null,[(d(!0),v(Q,null,we(Y.value,c=>(d(),v("tr",{key:c.transaction_id,class:A(["table-row",at(c.status)]),onMouseenter:Pt},[e("td",dl,[e("div",vl,[e("button",{class:A(["action-btn edit-btn",{disabled:!K(c)}]),onClick:ne=>K(c)?ft(c):null,disabled:!K(c),title:K(c)?"Edit":"Cannot edit after submission"},[q(O(Ut),{size:16})],10,pl),e("button",{class:A(["action-btn delete-btn",{disabled:!K(c)}]),onClick:ne=>K(c)?_t(c):null,disabled:!K(c),title:K(c)?"Delete":"Cannot delete after submission"},[q(O(Ot),{size:16})],10,fl),$e(c)?(d(),v("button",{key:0,class:"action-btn rejection-icon-btn",onClick:ne=>$t(c),title:f.value?"عرض سبب الرفض":"View rejection reason"},l[18]||(l[18]=[e("span",{class:"rejection-icon-small"},"⚠",-1)]),8,_l)):S("",!0)])]),e("td",hl,[q(x,{to:ot(c),class:"code-link",onClick:ne=>nt(c)},{default:Ye(()=>[Ft(t(c.code),1)]),_:2},1032,["to","onClick"])]),e("td",ml,t(c.requested_by),1),e("td",bl,[e("button",{class:"description-btn",onClick:ne=>pt(c),title:"View full description"},[q(O(Vt),{size:16})],8,yl)]),e("td",gl,t(et(c.request_date)),1),e("td",$l,t(c.transaction_date),1),e("td",kl,[e("button",{class:"track-btn",onClick:l[1]||(l[1]=ne=>gt())},"Track")]),e("td",wl,[e("span",{class:A(["status-badge","status-"+c.status.toLowerCase()]),onClick:ne=>bt(c),role:"button"},t(c.status),11,Cl)]),e("td",Dl,[e("button",{class:"attachment-btn",onClick:ne=>mt(c),title:st(c)}," Attachments ",8,Rl)])],34))),128))])])]))]),!W.value&&Y.value.length>0?(d(),v("div",Tl,[e("div",Ml,[e("span",Pl,t(ie.value),1),l[19]||(l[19]=e("div",{class:"items-per-page"},null,-1))]),e("div",El,[e("button",{class:"pagination-btn pagination-btn-first",onClick:ct,disabled:T.value===1,title:"First Page"}," ⟪ ",8,Al),e("button",{class:"pagination-btn pagination-btn-prev",onClick:ut,disabled:T.value===1,title:"Previous Page"}," ⟨ ",8,Sl),e("div",jl,[(d(!0),v(Q,null,we(Xe.value,c=>(d(),v("button",{key:c,class:A(["pagination-btn page-number",{active:c===T.value,ellipsis:c===-1}]),onClick:ne=>vt(c),disabled:c===-1},t(c===-1?"...":c),11,ql))),128))]),e("button",{class:"pagination-btn pagination-btn-next",onClick:it,disabled:T.value>=le.value,title:"Next Page"}," ⟩ ",8,Fl),e("button",{class:"pagination-btn pagination-btn-last",onClick:dt,disabled:T.value>=le.value,title:"Last Page"}," ⟫ ",8,xl)])])):S("",!0),(d(),Fe(We(w.value),{modelValue:ee.value,"onUpdate:modelValue":l[2]||(l[2]=c=>ee.value=c),onSubmit:Ct},null,40,["modelValue"])),(d(),Fe(We(a.value),{modelValue:De.value,"onUpdate:modelValue":l[3]||(l[3]=c=>De.value=c),"transfer-data":Ie.value,onSubmit:Dt},null,40,["modelValue","transfer-data"])),q(Cs,{show:Re.value,"onUpdate:show":l[4]||(l[4]=c=>Re.value=c),transactionId:Ne.value,status:Ue.value,onFilesUpdated:Rt},null,8,["show","transactionId","status"]),q(nn,{modelValue:Te.value,"onUpdate:modelValue":l[5]||(l[5]=c=>Te.value=c),"approval-data":Oe.value},null,8,["modelValue","approval-data"]),q(Tn,{modelValue:Me.value,"onUpdate:modelValue":l[6]||(l[6]=c=>Me.value=c),transactionId:ze.value},null,8,["modelValue","transactionId"]),q(qn,{modelValue:Pe.value,"onUpdate:modelValue":l[7]||(l[7]=c=>Pe.value=c)},null,8,["modelValue"]),q(re,{modelValue:Ee.value,"onUpdate:modelValue":l[8]||(l[8]=c=>Ee.value=c),type:Le.value,message:Je.value,timer:3e3},null,8,["modelValue","type","message"]),be.value?(d(),v("div",{key:1,class:"modal-overlay",onClick:je},[e("div",{class:"modal-container delete-modal",onClick:l[9]||(l[9]=N(()=>{},["stop"]))},[e("div",Vl,[e("h3",null,t(F.value),1),e("button",{class:"close-modal",onClick:je},"×")]),e("div",Bl,[e("p",null,t(I.value),1)]),e("div",Il,[e("button",{class:"btn-secondary",onClick:je},t(D.value),1),e("button",{class:"btn-danger",onClick:ht},t(h.value),1)])])])):S("",!0),se.value?(d(),v("div",{key:2,class:"modal-overlay",onClick:Se},[e("div",{class:"modal-container desc-modal",onClick:l[10]||(l[10]=N(()=>{},["stop"]))},[e("div",Nl,[e("h3",null,t(m.value),1),e("button",{class:"close-modal",onClick:Se},"×")]),e("div",Ul,[e("div",{class:"description-content",innerHTML:tt(Be.value)},null,8,Ol)]),e("div",zl,[e("button",{class:"btn-secondary",onClick:Se},t(P.value),1)])])])):S("",!0),(d(),Fe(Bt,{to:"body"},[ye.value?(d(),v("div",{key:0,class:"rejection-popup-overlay",onClick:ke},[e("div",{class:"rejection-popup-container",onClick:l[11]||(l[11]=N(()=>{},["stop"]))},[e("div",Ll,[e("div",Jl,[l[20]||(l[20]=e("span",{class:"rejection-popup-icon"},"⚠",-1)),e("h3",null,t(f.value?"سبب الرفض":"Rejection Reason"),1)]),e("button",{class:"rejection-popup-close",onClick:ke},l[21]||(l[21]=[e("span",null,"×",-1)]))]),e("div",Hl,[ce.value?(d(),v("div",Wl,[e("div",Gl,[e("span",Kl,t(f.value?"رقم المعاملة:":"Transaction:"),1),e("span",Ql,t(ce.value.code),1)]),e("div",Zl,[e("p",Yl,t(f.value?"السبب:":"Reason:"),1),e("div",Xl,[e("p",er,t(ge.value),1)])])])):S("",!0)]),e("div",tr,[e("button",{class:"btn-popup-close",onClick:ke},t(f.value?"إغلاق":"Close"),1),e("button",{class:"btn-popup-details",onClick:kt},t(f.value?"عرض التفاصيل الكاملة":"View Full Details"),1)])])])):S("",!0)]))],10,Bn)}}}),rr=ae(ar,[["__scopeId","data-v-aea8fa9d"]]);export{rr as default};
