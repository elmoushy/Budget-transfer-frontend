import{c as B,x as E,_ as T,u as F,y as $,r as b,w as x,o as z,W as j,k as m,s as l,G as D,I as q,e as g,h as w,f as s,m as P,n as N,t as S,l as v,X as R,i as I,S as M,U as O,M as U,a as c,q as i}from"./index-1DZghGKI.js";import{C as V}from"./check-B0BoeOkJ.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=B("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=B("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ne=E("navigation",{state:()=>({sourceComponent:null,navigationParams:{}}),actions:{setNavigationSource(t,r={}){this.sourceComponent=t,this.navigationParams=r},clearNavigationSource(){this.sourceComponent=null,this.navigationParams={}}}}),K={class:"popup-header"},W={class:"popup-title"},X={class:"popup-body"},Z={class:"popup-icon-container"},H={class:"popup-icon"},J={class:"popup-content"},Y={key:0,class:"popup-footer"},Q={key:1,class:"popup-timer"},ee={__name:"FuturisticPopup",props:{show:{type:Boolean,default:!1},type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:""},message:{type:String,required:!0},timer:{type:Number,default:0},showConfirmButton:{type:Boolean,default:!1},confirmButtonText:{type:String,default:"OK"},showCloseButton:{type:Boolean,default:!1},closeOnClickOutside:{type:Boolean,default:!0}},emits:["update:show","confirm"],setup(t,{emit:r}){const e=t,o=r,a=F(),d=$(()=>a.darkMode),p=b(Date.now()),f=b(e.timer),C=$(()=>e.timer<=0?{width:"0%"}:{width:`${f.value/e.timer*100}%`}),k=()=>{if(e.timer<=0)return;const h=Date.now()-p.value;f.value=Math.max(0,e.timer-h),f.value>0?requestAnimationFrame(k):y()},_=()=>{e.closeOnClickOutside&&y()},y=()=>{o("update:show",!1),o("confirm")};return x(()=>e.show,h=>{h&&e.timer>0&&(p.value=Date.now(),f.value=e.timer,requestAnimationFrame(k))}),z(()=>{e.show&&e.timer>0&&(p.value=Date.now(),f.value=e.timer,requestAnimationFrame(k))}),j(()=>{}),(h,n)=>(l(),m(U,{to:"body"},[D(O,{name:"popup-fade"},{default:q(()=>[t.show?(l(),g("div",{key:0,class:"futuristic-popup-overlay",onClick:_},[s("div",{class:N(["futuristic-popup-container",[`type-${t.type}`,{"dark-mode":d.value}]]),onClick:n[0]||(n[0]=P(()=>{},["stop"]))},[n[3]||(n[3]=s("div",{class:"popup-glow-effect"},null,-1)),s("div",K,[s("h3",W,S(t.title),1),t.showCloseButton?(l(),g("button",{key:0,class:"popup-close",onClick:y},"Ã—")):w("",!0)]),s("div",X,[s("div",Z,[s("div",H,[t.type==="success"?(l(),m(v(V),{key:0,class:"icon-svg"})):t.type==="error"?(l(),m(v(R),{key:1,class:"icon-svg"})):t.type==="warning"?(l(),m(v(L),{key:2,class:"icon-svg"})):(l(),m(v(G),{key:3,class:"icon-svg"}))]),n[1]||(n[1]=s("div",{class:"popup-pulse"},null,-1))]),s("div",J,S(t.message),1)]),t.showConfirmButton?(l(),g("div",Y,[s("button",{class:"popup-button",onClick:y},[I(S(t.confirmButtonText)+" ",1),n[2]||(n[2]=s("div",{class:"button-glow"},null,-1))])])):w("",!0),n[4]||(n[4]=s("div",{class:"popup-corner top-left"},null,-1)),n[5]||(n[5]=s("div",{class:"popup-corner top-right"},null,-1)),n[6]||(n[6]=s("div",{class:"popup-corner bottom-left"},null,-1)),n[7]||(n[7]=s("div",{class:"popup-corner bottom-right"},null,-1)),t.timer>0?(l(),g("div",Q,[s("div",{class:"popup-timer-bar",style:M(C.value)},null,4)])):w("",!0)],2)])):w("",!0)]),_:1})]))}},se=T(ee,[["__scopeId","data-v-a54c1369"]]),u="https://lightidea.org:9000",A="https://lightidea.org:9000",te="/api/budget/transfers/list/",re=6,ie={async fetchTransfers(t="",r=1){const e=c();if(!e.token)throw new Error("Authentication token not found");const o={page:r.toString(),page_size:re.toString()},a={Authorization:`Bearer ${e.token}`,Accept:"application/json","Content-Type":"application/json"},d=t.trim()?{code:"FAR",search:t.trim()}:{code:"FAR"};try{return(await i.post(`${A}${te}`,d,{headers:a,params:o})).data}catch(p){throw console.error("Error fetching transfers:",p),p}},async deleteTransfer(t){const r=c();if(!r.token)throw new Error("Authentication token not found");try{return await i.delete(`${A}/api/budget/transfers/${t}/delete/`,{headers:{Authorization:`Bearer ${r.token}`,Accept:"application/json"}})}catch(e){throw console.error("Error deleting transfer:",e),e}},async getTransferDetails(t){const r=c();try{return(await i.get(`${u}/api/adjd-transfers/?transaction=${t}`,{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(e){throw console.error("Error fetching transfer details:",e),e}},async submitTransferRequest(t){const r=c();try{return(await i.post(`${u}/api/adjd-transfers/submit/`,{transaction:t},{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(e){throw console.error("Error submitting transfer request:",e),e}},async reopenTransferRequest(t){const r=c();try{return(await i.post(`${u}/api/adjd-transfers/reopen/`,{transaction:t,action:"reopen"},{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(e){throw console.error("Error reopening transfer request:",e),e}},async generateReport(t){const r=c();try{return(await i.get(`${u}/api/budget/transfers/${t}/report/`,{headers:{Authorization:`Bearer ${r.token}`},responseType:"blob"})).data}catch(e){throw console.error("Error generating report:",e),e}},async createTransfer(t){const r=c();try{const e=t.map(a=>{const d={transaction:a.transaction,cost_center_code:a.cost_center_code,cost_center_name:a.cost_center_name,account_code:a.account_code,account_name:a.account_name,approved_budget:parseFloat(a.approved_budget)||0,available_budget:parseFloat(a.available_budget)||0,to_center:parseFloat(a.to_center)||0,encumbrance:parseFloat(a.encumbrance)||0,actual:parseFloat(a.actual)||0,done:1};return a.from_center!==null&&(d.from_center=parseFloat(a.from_center)||0),d});return(await i.post(`${u}/api/adjd-transfers/create/`,e,{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(e){throw console.error("Error creating transfer request:",e),e}},async uploadFile(t,r){const e=c();try{const o=new FormData;return o.append("transaction_id",r.toString()),o.append("file",t),(await i.post(`${u}/api/budget/transfers/upload-files/`,o,{headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"multipart/form-data"}})).data}catch(o){throw console.error("Error uploading file:",o),o}},async listFiles(t){const r=c();try{return(await i.get(`${u}/api/budget/transfers/list-files/?transaction_id=${t}`,{headers:{Authorization:`Bearer ${r.token}`}})).data}catch(e){throw console.error("Error listing files:",e),e}},async uploadExcelFile(t,r){const e=c();try{const o=new FormData;return o.append("file",t),o.append("transaction",r.toString()),(await i.post(`${u}/api/adjd-transfers/excel-upload/`,o,{headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"multipart/form-data"}})).data}catch(o){throw console.error("Error uploading Excel file:",o),o}},async getPivotFundDetails(t,r){const e=c();try{return(await i.get(`${u}/api/accounts-entities/pivot-funds/getdetail/?entity_id=${t}&account_id=${r}`,{headers:{Authorization:`Bearer ${e.token}`}})).data}catch(o){throw(!o.response||o.response.status!==404)&&console.error("Error fetching pivot fund details:",o),o}},getTransfers(t){return i.get(`${u}/api/budget/transfers/?transaction=${t}`)},async getRejectionReports(t){const r=c();try{return(await i.get(`${u}/api/budget/transfers/list_reject/?transaction_id=${t}`,{headers:{Authorization:`Bearer ${r.token}`,Accept:"application/json","Content-Type":"application/json"}})).data}catch(e){throw console.error("Error fetching rejection reports:",e),e}}};export{se as F,G as I,ie as t,ne as u};
